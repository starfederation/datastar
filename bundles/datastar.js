// Datastar v1.0.0-beta.3
var ot=/ðŸ–•JS_DSðŸš€/.source,be=ot.slice(0,5),Ke=ot.slice(4),G="datastar";var at="Datastar-Request",Ce=300,lt=1e3,ut="type module",Ne=!1,ct=!1,ft=!0,z={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},dt=z.Morph,U={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var R=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(R||{});var Se=`${G}-signals`;var ie=t=>t.trim()==="true",Ee=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),re=t=>Ee(t).replace(/-./g,e=>e[1].toUpperCase()),Je=t=>Ee(t).replace(/-/g,"_"),On=t=>re(t).replace(/^./,e=>e[0].toUpperCase()),Ie=t=>new Function(`return Object.assign({}, ${t})`)(),se=t=>t.startsWith("$")?t.slice(1):t,Fn={kebab:Ee,snake:Je,pascal:On};function W(t,e){for(let n of e.get("case")||[]){let r=Fn[n];r&&(t=r(t))}return t}var Hn="computed",pt={type:1,name:Hn,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=W(t,e);let i=r();n.setComputed(t,i)}};var mt={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:l}=t,c=n.has("ifmissing");if(e!==""){let u=W(e,n),d=i===""?i:l()();c?r.upsertIfMissing(u,d):r.setValue(u,d)}else{let u=Ie(t.value);t.value=JSON.stringify(u);let h=l()();r.merge(h,c)}}};var gt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var Te=class{#e=0;#n;constructor(e=G){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e;return this}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function ht(t){if(t.id)return t.id;let e=new Te,n=t;for(;n.parentNode;){if(n.id){e.with(n.id);break}if(n===n.ownerDocument.documentElement)e.with(n.tagName);else for(let r=1,i=t;i.previousElementSibling;i=i.previousElementSibling,r++)e.with(r);n=n.parentNode}return e.value}function Le(t,e){return(...n)=>{setTimeout(()=>{t(...n)},e)}}function vt(t,e,n=!1,r=!0){let i=-1,l=()=>i&&clearTimeout(i);return(...c)=>{l(),n&&!i&&t(...c),i=setTimeout(()=>{r&&t(...c),l()},e)}}function yt(t,e,n=!0,r=!1){let i=!1;return(...l)=>{i||(n&&t(...l),i=!0,setTimeout(()=>{i=!1,r&&t(...l)},e))}}var Wn="https://data-star.dev/errors";function Ye(t,e,n={}){let r=new Error;r.name=`${G} ${t} error`;let i=Je(e),l=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),c=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${Wn}/${t}/${i}?${l}
Context: ${c}`,r}function X(t,e,n={}){return Ye("internal",e,Object.assign({from:t},n))}function K(t,e,n={}){let r={plugin:{name:e.plugin.name,type:R[e.plugin.type]}};return Ye("init",t,Object.assign(r,n))}function P(t,e,n={}){let r={plugin:{name:e.plugin.name,type:R[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Ye("runtime",t,Object.assign(r,n))}var le="preact-signals",qn=Symbol.for("preact-signals"),Q=1,de=2,_e=4,me=8,De=16,pe=32;function ze(){Ve++}function Qe(){if(Ve>1){Ve--;return}let t,e=!1;for(;Ae!==void 0;){let n=Ae;for(Ae=void 0,Xe++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~de,!(n._flags&me)&&St(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(Xe=0,Ve--,e)throw X(le,"BatchError, error",{error:t})}var C;var Ae,Ve=0,Xe=0,ke=0;function bt(t){if(C===void 0)return;let e=t._node;if(e===void 0||e._target!==C)return e={_version:0,_source:t,_prevSource:C._sources,_nextSource:void 0,_target:C,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},C._sources!==void 0&&(C._sources._nextSource=e),C._sources=e,t._node=e,C._flags&pe&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=C._sources,e._nextSource=void 0,C._sources._nextSource=e,C._sources=e),e}function O(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}O.prototype.brand=qn;O.prototype._refresh=()=>!0;O.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};O.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};O.prototype.subscribe=function(t){return Oe(()=>{let e=this.value,n=C;C=void 0;try{t(e)}finally{C=n}})};O.prototype.valueOf=function(){return this.value};O.prototype.toString=function(){return`${this.value}`};O.prototype.toJSON=function(){return this.value};O.prototype.peek=function(){let t=C;C=void 0;try{return this.value}finally{C=t}};Object.defineProperty(O.prototype,"value",{get(){let t=bt(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(Xe>100)throw X(le,"SignalCycleDetected");this._value=t,this._version++,ke++,ze();try{for(let e=this._targets;e!==void 0;e=e._nextTarget)e._target._notify()}finally{Qe()}}}});function St(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function Et(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function Tt(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function ue(t){O.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=ke-1,this._flags=_e}ue.prototype=new O;ue.prototype._refresh=function(){if(this._flags&=~de,this._flags&Q)return!1;if((this._flags&(_e|pe))===pe||(this._flags&=~_e,this._globalVersion===ke))return!0;if(this._globalVersion=ke,this._flags|=Q,this._version>0&&!St(this))return this._flags&=~Q,!0;let t=C;try{Et(this),C=this;let e=this._fn();(this._flags&De||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~De,this._version++)}catch(e){this._value=e,this._flags|=De,this._version++}return C=t,Tt(this),this._flags&=~Q,!0};ue.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=_e|pe;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}O.prototype._subscribe.call(this,t)};ue.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(O.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~pe;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};ue.prototype._notify=function(){if(!(this._flags&de)){this._flags|=_e|de;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(ue.prototype,"value",{get(){if(this._flags&Q)throw X(le,"SignalCycleDetected");let t=bt(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&De)throw X(le,"GetComputedError",{value:this._value});return this._value}});function At(t){return new ue(t)}function _t(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){ze();let n=C;C=void 0;try{e()}catch(r){throw t._flags&=~Q,t._flags|=me,Ze(t),X(le,"CleanupEffectError",{error:r})}finally{C=n,Qe()}}}function Ze(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,_t(t)}function $n(t){if(C!==this)throw X(le,"EndEffectError");Tt(this),C=t,this._flags&=~Q,this._flags&me&&Ze(this),Qe()}function Re(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=pe}Re.prototype._callback=function(){let t=this._start();try{if(this._flags&me||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};Re.prototype._start=function(){if(this._flags&Q)throw X(le,"SignalCycleDetected");this._flags|=Q,this._flags&=~me,_t(this),Et(this),ze();let t=C;return C=this,$n.bind(this,t)};Re.prototype._notify=function(){this._flags&de||(this._flags|=de,this._nextBatchedEffect=Ae,Ae=this)};Re.prototype._dispose=function(){this._flags|=me,this._flags&Q||Ze(this)};function Oe(t){let e=new Re(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var Rt="namespacedSignals",Fe=t=>{document.dispatchEvent(new CustomEvent(Se,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function wt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof O?n[r]=i.value:n[r]=wt(i)}return n}function xt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw X(Rt,"InvalidSignalKey",{key:i});let l=e[i];if(l instanceof Object&&!Array.isArray(l)){t[i]||(t[i]={});let c=xt(t[i],l,n);r.added.push(...c.added.map(u=>`${i}.${u}`)),r.removed.push(...c.removed.map(u=>`${i}.${u}`)),r.updated.push(...c.updated.map(u=>`${i}.${u}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let u=t[i];if(u instanceof O){let d=u.value;u.value=l,d!==l&&r.updated.push(i);continue}}t[i]=new O(l),r.added.push(i)}}return r}function Pt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof O?e(n,r):Pt(r,(i,l)=>{e(`${n}.${i}`,l)})}}function Gn(t,...e){let n={};for(let r of e){let i=r.split("."),l=t,c=n;for(let d=0;d<i.length-1;d++){let h=i[d];if(!l[h])return{};c[h]||(c[h]={}),l=l[h],c=c[h]}let u=i[i.length-1];c[u]=l[u]}return n}var He=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let c=0;c<n.length-1;c++){let u=n[c];if(!r[u])return null;r=r[u]}let i=n[n.length-1],l=r[i];if(!l)throw X(Rt,"SignalNotFound",{path:e});return l}setSignal(e,n){let r=e.split("."),i=this.#e;for(let c=0;c<r.length-1;c++){let u=r[c];i[u]||(i[u]={}),i=i[u]}let l=r[r.length-1];i[l]=n}setComputed(e,n){let r=At(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let r=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&Fe({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let d=0;d<r.length-1;d++){let h=r[d];i[h]||(i[h]={}),i=i[h]}let l=r[r.length-1],c=i[l];if(c instanceof O)return c;let u=new O(n);return i[l]=u,Fe({added:[e]}),u}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),l=this.#e;for(let u=0;u<i.length-1;u++){let d=i[u];if(!l[d])return;l=l[d]}let c=i[i.length-1];delete l[c],n.push(r)}Fe({removed:n})}merge(e,n=!1){let r=xt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&Fe(r)}subset(...e){return Gn(this.values(),...e)}walk(e){Pt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return wt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var Mt=(t,e)=>`${t}${be}${e}`,We=class{constructor(){this.aliasPrefix="";this.#e=new He;this.#n=[];this.#r={};this.#l=[];this.#s=null;this.#t=new Map;this.#u=Le(()=>{this.#o(document.body),this.#c()},1)}#e;#n;#r;#l;#s;#t;get signals(){return this.#e}load(...e){let n=this;for(let r of e){let i={get signals(){return n.#e},effect:c=>Oe(c),actions:this.#r,plugin:r,applyAttributePlugin:n.#i.bind(n)},l;switch(r.type){case 2:{let c=r;this.#l.push(c),l=c.onGlobalInit;break}case 3:{this.#r[r.name]=r;break}case 1:{let c=r;this.#n.push(c),l=c.onGlobalInit;break}default:throw K("InvalidPluginType",i)}l&&l(i)}this.#n.sort((r,i)=>{let l=i.name.length-r.name.length;return l!==0?l:r.name.localeCompare(i.name)}),this.#u()}#u;#o(e){this.#a(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#c(){this.#s||(this.#s=new MutationObserver(e=>{for(let{target:n,type:r,attributeName:i,oldValue:l,addedNodes:c,removedNodes:u}of e)switch(r){case"childList":{for(let d of u){let h=d,m=this.#t.get(h);if(m){for(let[_,y]of m)y();this.#t.delete(h)}}for(let d of c){let h=d;this.#o(h)}}break;case"attributes":{{let d="data-",h=d+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!i?.startsWith(h))break;let m=n,_=re(i.slice(d.length));if(l!==null&&m.dataset[_]!==l){let y=this.#t.get(m);if(y){let E=Mt(_,l),b=y.get(E);b&&(b(),y.delete(E))}}_ in m.dataset&&this.#i(m,_)}break}}}),this.#s.observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}))}#i(e,n){let r=n.slice(this.aliasPrefix.length),i=this.#n.find(v=>r.startsWith(v.name));if(!i)return;let l=this.#t.get(e);if(l)for(let[v,T]of l)v.startsWith(n)&&(T(),l.delete(v));e.id.length||(e.id=ht(e));let[c,...u]=r.slice(i.name.length).split(/\_\_+/),d=c.length>0;d&&(c=re(c));let h=e.dataset[n]||"",m=h.length>0,_=this,y={get signals(){return _.#e},applyAttributePlugin:_.#i.bind(_),effect:v=>Oe(v),actions:this.#r,genRX:()=>this.#f(y,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:c,value:h,mods:new Map},E=i.keyReq||0;if(d){if(E===2)throw P(`${i.name}KeyNotAllowed`,y)}else if(E===1)throw P(`${i.name}KeyRequired`,y);let b=i.valReq||0;if(m){if(b===2)throw P(`${i.name}ValueNotAllowed`,y)}else if(b===1)throw P(`${i.name}ValueRequired`,y);if(E===3||b===3){if(d&&m)throw P(`${i.name}KeyAndValueProvided`,y);if(!d&&!m)throw P(`${i.name}KeyOrValueRequired`,y)}for(let v of u){let[T,...w]=v.split(".");y.mods.set(re(T),new Set(w.map(k=>k.toLowerCase())))}let M=i.onLoad(y);if(M){let v=this.#t.get(e);v||(v=new Map,this.#t.set(e,v)),v.set(Mt(n,h),M)}let V=i.removeOnLoad;V&&V(r)===!0&&delete e.dataset[n]}#f(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,l=e.value.trim().match(i);if(l){let b=l.length-1,M=l[b].trim();M.startsWith("return")||(l[b]=`return (${M});`),r=l.join(`;
`)}let c=new Map,u=new RegExp(`(?:${be})(.*?)(?:${Ke})`,"gm");for(let b of r.matchAll(u)){let M=b[1],V=new Te("dsEscaped").with(M).value;c.set(V,M),r=r.replace(be+M+Ke,V)}let d=/@(\w*)\(/gm,h=r.matchAll(d),m=new Set;for(let b of h)m.add(b[1]);let _=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(_,"ctx.actions.$1.fn(ctx,");let y=e.signals.paths();if(y.length){let b=new RegExp(`\\$(${y.join("|")})(\\W|$)`,"gm");r=r.replaceAll(b,"ctx.signals.signal('$1').value$2")}for(let[b,M]of c)r=r.replace(b,M);let E=`return (()=> {
${r}
})()`;e.fnContent=E;try{let b=new Function("ctx",...n,E);return(...M)=>{try{return b(e,...M)}catch(V){throw P("ExecuteExpression",e,{error:V.message})}}}catch(b){throw P("GenerateExpression",e,{error:b.message})}}#a(e,n){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;let r=e.dataset;if("starIgnore"in r)return null;"starIgnore__self"in r||n(e);let i=e.firstElementChild;for(;i;)this.#a(i,n),i=i.nextElementSibling}};var Ct=new We;Ct.load(gt,mt,pt);var et=Ct;async function Un(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function Bn(t){let e,n,r,i=!1;return function(c){e===void 0?(e=c,n=0,r=-1):e=Kn(e,c);let u=e.length,d=0;for(;n<u;){i&&(e[n]===10&&(d=++n),i=!1);let h=-1;for(;n<u&&h===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-d);break;case 13:i=!0;case 10:h=n;break}if(h===-1)break;t(e.subarray(d,h),r),d=n,r=-1}d===u?e=void 0:d!==0&&(e=e.subarray(d),n-=d)}}function jn(t,e,n){let r=Nt(),i=new TextDecoder;return function(c,u){if(c.length===0)n?.(r),r=Nt();else if(u>0){let d=i.decode(c.subarray(0,u)),h=u+(c[u+1]===32?2:1),m=i.decode(c.subarray(h));switch(d){case"data":r.data=r.data?`${r.data}
${m}`:m;break;case"event":r.event=m;break;case"id":t(r.id=m);break;case"retry":{let _=Number.parseInt(m,10);Number.isNaN(_)||e(r.retry=_);break}}}}}function Kn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Nt(){return{data:"",event:"",id:"",retry:void 0}}var Jn="text/event-stream",It="last-event-id";function Lt(t,e,{signal:n,headers:r,onopen:i,onmessage:l,onclose:c,onerror:u,openWhenHidden:d,fetch:h,retryInterval:m=1e3,retryScaler:_=2,retryMaxWaitMs:y=3e4,retryMaxCount:E=10,...b}){return new Promise((M,V)=>{let v=0,T={...r};T.accept||(T.accept=Jn);let w;function k(){w.abort(),document.hidden||L()}d||document.addEventListener("visibilitychange",k);let N=0;function x(){document.removeEventListener("visibilitychange",k),window.clearTimeout(N),w.abort()}n?.addEventListener("abort",()=>{x(),M()});let I=h??window.fetch,S=i??function(){};async function L(){w=new AbortController;try{let D=await I(e,{...b,headers:T,signal:w.signal});await S(D),await Un(D.body,Bn(jn(F=>{F?T[It]=F:delete T[It]},F=>{m=F},l))),c?.(),x(),M()}catch(D){if(!w.signal.aborted)try{let F=u?.(D)??m;window.clearTimeout(N),N=window.setTimeout(L,F),m*=_,m=Math.min(m,y),v++,v>=E?(x(),V(P("SseMaxRetries",t,{retryMaxCount:E}))):console.error(`Datastar failed to reach ${b.method}: ${e.toString()} retry in ${F}ms`)}catch(F){x(),V(F)}}}L()})}var ge=`${G}-sse`,tt=`${G}-settling`,ce=`${G}-swapping`,qe="started",$e="finished",Dt="error",Vt="retrying";function Z(t,e){document.addEventListener(ge,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function we(t,e){document.dispatchEvent(new CustomEvent(ge,{detail:{type:t,argsRaw:e}}))}var kt=t=>`${t}`.includes("text/event-stream"),ee=async(t,e,n,r)=>{let{el:{id:i},el:l,signals:c}=t,{headers:u,contentType:d,includeLocal:h,selector:m,openWhenHidden:_,retryInterval:y,retryScaler:E,retryMaxWaitMs:b,retryMaxCount:M,abort:V}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:lt,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),v=e.toLowerCase(),T=()=>{};try{if(we(qe,{elId:i}),!n?.length)throw P("SseNoUrlProvided",t,{action:v});let w={};w[at]=!0,d==="json"&&(w["Content-Type"]="application/json");let k=Object.assign({},w,u),N={method:e,headers:k,openWhenHidden:_,retryInterval:y,retryScaler:E,retryMaxWaitMs:b,retryMaxCount:M,signal:V,onopen:async S=>{if(S.status>=400){let L=S.status.toString();we(Dt,{status:L})}},onmessage:S=>{if(!S.event.startsWith(G))return;let L=S.event,D={},F=S.data.split(`
`);for(let q of F){let Y=q.indexOf(" "),Me=q.slice(0,Y),fe=D[Me];fe||(fe=[],D[Me]=fe);let ne=q.slice(Y+1).trim();fe.push(ne)}let te={};for(let[q,Y]of Object.entries(D))te[q]=Y.join(`
`);we(L,te)},onerror:S=>{if(kt(S))throw P("InvalidContentType",t,{url:n});S&&(console.error(S.message),we(Vt,{message:S.message}))}},x=new URL(n,window.location.origin),I=new URLSearchParams(x.search);if(d==="json"){let S=c.JSON(!1,!h);e==="GET"?I.set(G,S):N.body=S}else if(d==="form"){let S=m?document.querySelector(m):l.closest("form");if(S===null)throw m?P("SseFormNotFound",t,{action:v,selector:m}):P("SseClosestFormNotFound",t,{action:v});if(l!==S){let D=F=>F.preventDefault();S.addEventListener("submit",D),T=()=>S.removeEventListener("submit",D)}if(!S.checkValidity()){S.reportValidity(),T();return}let L=new FormData(S);if(e==="GET"){let D=new URLSearchParams(L);for(let[F,te]of D)I.set(F,te)}else N.body=L}else throw P("SseInvalidContentType",t,{action:v,contentType:d});x.search=I.toString();try{await Lt(t,x.toString(),N)}catch(S){if(!kt(S))throw P("SseFetchFailed",t,{method:e,url:n,error:S})}}finally{we($e,{elId:i}),T()}};var Ot={type:3,name:"delete",fn:async(t,e,n)=>ee(t,"DELETE",e,{...n})};var Ft={type:3,name:"get",fn:async(t,e,n)=>ee(t,"GET",e,{...n})};var Ht={type:3,name:"patch",fn:async(t,e,n)=>ee(t,"PATCH",e,{...n})};var Wt={type:3,name:"post",fn:async(t,e,n)=>ee(t,"POST",e,{...n})};var qt={type:3,name:"put",fn:async(t,e,n)=>ee(t,"PUT",e,{...n})};var $t={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let l=e?W(e,n):se(i),c=r.upsertIfMissing(l,!1),u=d=>{let{type:h,argsRaw:{elId:m}}=d.detail;if(m===t.id)switch(h){case qe:c.value=!0;break;case $e:c.value=!1;break}};return document.addEventListener(ge,u),()=>{document.removeEventListener(ge,u)}}};var Gt={type:2,name:U.ExecuteScript,onGlobalInit:async t=>{Z(U.ExecuteScript,({autoRemove:e=`${ft}`,attributes:n=ut,script:r})=>{let i=ie(e);if(!r?.length)throw K("NoScriptProvided",t);let l=document.createElement("script");for(let c of n.split(`
`)){let u=c.indexOf(" "),d=u?c.slice(0,u):c,h=u?c.slice(u):"";l.setAttribute(d.trim(),h.trim())}l.text=r,document.head.appendChild(l),i&&l.remove()})}};var xe=document,oe=!!xe.startViewTransition;var Ut=function(){"use strict";let t=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E,beforeNodePantried:E},head:{style:"merge",shouldPreserve:function(s){return s.getAttribute("im-preserve")==="true"},shouldReAppend:function(s){return s.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function n(s,o,a={}){s instanceof Document&&(s=s.documentElement),typeof o=="string"&&(o=I(o));let f=S(o),p=M(s,f,a);return r(s,f,p)}function r(s,o,a){if(a.head.block){let f=s.querySelector("head"),p=o.querySelector("head");if(f&&p){let g=_(p,f,a);Promise.all(g).then(function(){r(s,o,Object.assign(a,{head:{block:!1,ignore:!0}}))});return}}if(a.morphStyle==="innerHTML")return c(o,s,a),a.config.twoPass&&Y(s,a),Array.from(s.children);if(a.morphStyle==="outerHTML"||a.morphStyle==null){let f=D(o,s,a),p=f?.previousSibling??null,g=f?.nextSibling??null,A=l(s,f,a);if(f){if(A){let $=L(p,A,g);return a.config.twoPass&&Y(A.parentNode,a),$}}else return[]}else throw"Do not understand how to morph style "+a.morphStyle}function i(s,o){return!!o.ignoreActiveValue&&s===document.activeElement&&s!==document.body}function l(s,o,a){return a.ignoreActive&&s===document.activeElement?null:o==null?a.callbacks.beforeNodeRemoved(s)===!1?s:(s.parentNode?.removeChild(s),a.callbacks.afterNodeRemoved(s),null):T(s,o)?(a.callbacks.beforeNodeMorphed(s,o)===!1||(s instanceof HTMLHeadElement&&a.head.ignore||(s instanceof HTMLHeadElement&&a.head.style!=="morph"?_(o,s,a):(d(o,s,a),i(s,a)||c(o,s,a))),a.callbacks.afterNodeMorphed(s,o)),s):a.callbacks.beforeNodeRemoved(s)===!1||a.callbacks.beforeNodeAdded(o)===!1?s:(s.parentNode?.replaceChild(o,s),a.callbacks.afterNodeAdded(o),a.callbacks.afterNodeRemoved(s),o)}function c(s,o,a){s instanceof HTMLTemplateElement&&o instanceof HTMLTemplateElement&&(s=s.content,o=o.content);let f=s.firstChild,p=o.firstChild,g;for(;f;){if(g=f,f=g.nextSibling,p==null){if(a.config.twoPass&&a.persistentIds.has(g.id))o.appendChild(g);else{if(a.callbacks.beforeNodeAdded(g)===!1)continue;o.appendChild(g),a.callbacks.afterNodeAdded(g)}ne(a,g);continue}if(v(g,p,a)){l(p,g,a),p=p.nextSibling,ne(a,g);continue}let A=k(s,o,g,p,a);if(A){p=w(p,A,a),l(A,g,a),ne(a,g);continue}let $=N(s,o,g,p,a);if($){p=w(p,$,a),l($,g,a),ne(a,g);continue}if(a.config.twoPass&&a.persistentIds.has(g.id))o.insertBefore(g,p);else{if(a.callbacks.beforeNodeAdded(g)===!1)continue;o.insertBefore(g,p),a.callbacks.afterNodeAdded(g)}ne(a,g)}for(;p!==null;){let A=p;p=p.nextSibling,te(A,a)}}function u(s,o,a,f){return s==="value"&&f.ignoreActiveValue&&o===document.activeElement?!0:f.callbacks.beforeAttributeUpdated(s,o,a)===!1}function d(s,o,a){let f=s.nodeType;if(f===1){let p=s,g=o,A=p.attributes,$=g.attributes;for(let j of A)u(j.name,g,"update",a)||g.getAttribute(j.name)!==j.value&&g.setAttribute(j.name,j.value);for(let j=$.length-1;0<=j;j--){let ae=$[j];if(ae&&!p.hasAttribute(ae.name)){if(u(ae.name,g,"remove",a))continue;g.removeAttribute(ae.name)}}}(f===8||f===3)&&o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue),i(o,a)||m(s,o,a)}function h(s,o,a,f){if(!(s instanceof Element&&o instanceof Element))return;let p=s[a],g=o[a];if(p!==g){let A=u(a,o,"update",f);A||(o[a]=s[a]),p?A||o.setAttribute(a,p):u(a,o,"remove",f)||o.removeAttribute(a)}}function m(s,o,a){if(s instanceof HTMLInputElement&&o instanceof HTMLInputElement&&s.type!=="file"){let f=s.value,p=o.value;h(s,o,"checked",a),h(s,o,"disabled",a),s.hasAttribute("value")?f!==p&&(u("value",o,"update",a)||(o.setAttribute("value",f),o.value=f)):u("value",o,"remove",a)||(o.value="",o.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&o instanceof HTMLOptionElement)h(s,o,"selected",a);else if(s instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement){let f=s.value,p=o.value;if(u("value",o,"update",a))return;f!==p&&(o.value=f),o.firstChild&&o.firstChild.nodeValue!==f&&(o.firstChild.nodeValue=f)}}function _(s,o,a){let f=[],p=[],g=[],A=[],$=a.head.style,j=new Map;for(let H of s.children)j.set(H.outerHTML,H);for(let H of o.children){let J=j.has(H.outerHTML),ye=a.head.shouldReAppend(H),je=a.head.shouldPreserve(H);J||je?ye?p.push(H):(j.delete(H.outerHTML),g.push(H)):$==="append"?ye&&(p.push(H),A.push(H)):a.head.shouldRemove(H)!==!1&&p.push(H)}A.push(...j.values()),y("to append: ",A);let ae=[];for(let H of A){y("adding: ",H);let J=document.createRange().createContextualFragment(H.outerHTML).firstChild;if(y(J),a.callbacks.beforeNodeAdded(J)!==!1){if("href"in J&&J.href||"src"in J&&J.src){let ye,je=new Promise(function(kn){ye=kn});J.addEventListener("load",function(){ye()}),ae.push(je)}o.appendChild(J),a.callbacks.afterNodeAdded(J),f.push(J)}}for(let H of p)a.callbacks.beforeNodeRemoved(H)!==!1&&(o.removeChild(H),a.callbacks.afterNodeRemoved(H));return a.head.afterHeadMorphed(o,{added:f,kept:g,removed:p}),ae}function y(...s){}function E(){}function b(s){let o=Object.assign({},e);return Object.assign(o,s),o.callbacks=Object.assign({},e.callbacks,s.callbacks),o.head=Object.assign({},e.head,s.head),o}function M(s,o,a){let f=b(a);return{target:s,newContent:o,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:Dn(s,o),deadIds:new Set,persistentIds:f.twoPass?Vn(s,o):new Set,pantry:f.twoPass?V():document.createElement("div"),callbacks:f.callbacks,head:f.head}}function V(){let s=document.createElement("div");return s.hidden=!0,document.body.insertAdjacentElement("afterend",s),s}function v(s,o,a){return s==null||o==null?!1:s instanceof Element&&o instanceof Element&&s.tagName===o.tagName?s.id!==""&&s.id===o.id?!0:ve(a,s,o)>0:!1}function T(s,o){return s==null||o==null||s.id&&s.id!==o.id?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName}function w(s,o,a){let f=s;for(;f!==o;){let p=f;f=p.nextSibling,te(p,a)}return ne(a,o),o.nextSibling}function k(s,o,a,f,p){let g=ve(p,a,o),A=null;if(g>0){A=f;let $=0;for(;A!=null;){if(v(a,A,p))return A;if($+=ve(p,A,s),$>g)return null;A=A.nextSibling}}return A}function N(s,o,a,f,p){let g=f,A=a.nextSibling,$=0;for(;g!=null;){if(ve(p,g,s)>0)return null;if(T(g,a))return g;if(T(g,A)&&($++,A=A.nextSibling,$>=2))return null;g=g.nextSibling}return g}let x=new WeakSet;function I(s){let o=new DOMParser,a=s.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(a.match(/<\/html>/)||a.match(/<\/head>/)||a.match(/<\/body>/)){let f=o.parseFromString(s,"text/html");if(a.match(/<\/html>/))return x.add(f),f;{let p=f.firstChild;return p?(x.add(p),p):null}}else{let p=o.parseFromString("<body><template>"+s+"</template></body>","text/html").body.querySelector("template").content;return x.add(p),p}}function S(s){if(s==null)return document.createElement("div");if(x.has(s))return s;if(s instanceof Node){let o=document.createElement("div");return o.append(s),o}else{let o=document.createElement("div");for(let a of[...s])o.append(a);return o}}function L(s,o,a){let f=[],p=[];for(;s!=null;)f.push(s),s=s.previousSibling;let g=f.pop();for(;g!==void 0;)p.push(g),o.parentElement?.insertBefore(g,o),g=f.pop();for(p.push(o);a!=null;)f.push(a),p.push(a),a=a.nextSibling;for(;f.length>0;){let A=f.pop();o.parentElement?.insertBefore(A,o.nextSibling)}return p}function D(s,o,a){let f;f=s.firstChild;let p=f,g=0;for(;f;){let A=F(f,o,a);A>g&&(p=f,g=A),f=f.nextSibling}return p}function F(s,o,a){return T(o,s)?.5+ve(a,s,o):0}function te(s,o){if(ne(o,s),o.config.twoPass&&Ln(o,s)&&s instanceof Element)q(s,o);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function q(s,o){if(o.callbacks.beforeNodePantried(s)!==!1)if(Array.from(s.childNodes).forEach(a=>{q(a,o)}),o.persistentIds.has(s.id))o.pantry.moveBefore?o.pantry.moveBefore(s,null):o.pantry.insertBefore(s,null);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function Y(s,o){s instanceof Element&&(Array.from(o.pantry.children).reverse().forEach(a=>{let f=s.querySelector(`#${a.id}`);if(f){if(f.parentElement?.moveBefore)for(f.parentElement.moveBefore(a,f);f.hasChildNodes();)a.moveBefore(f.firstChild,null);else for(f.before(a);f.firstChild;)a.insertBefore(f.firstChild,null);o.callbacks.beforeNodeMorphed(a,f)!==!1&&(d(f,a,o),o.callbacks.afterNodeMorphed(a,f)),f.remove()}}),o.pantry.remove())}function Me(s,o){return!s.deadIds.has(o)}function fe(s,o,a){return(s.idMap.get(a)||t).has(o)}function ne(s,o){let a=s.idMap.get(o)||t;for(let f of a)s.deadIds.add(f)}function Ln(s,o){for(let a of s.idMap.get(o)||t)if(s.persistentIds.has(a))return!0;return!1}function ve(s,o,a){let f=s.idMap.get(o)||t,p=0;for(let g of f)Me(s,g)&&fe(s,g,a)&&++p;return p}function Be(s){let o=Array.from(s.querySelectorAll("[id]"));return s.id&&o.push(s),o}function st(s,o){let a=s.parentElement;for(let f of Be(s)){let p=f;for(;p!==a&&p!=null;){let g=o.get(p);g==null&&(g=new Set,o.set(p,g)),g.add(f.id),p=p.parentElement}}}function Dn(s,o){let a=new Map;return st(s,a),st(o,a),a}function Vn(s,o){let a=g=>g.tagName+"#"+g.id,f=new Set(Be(s).map(a)),p=new Set;for(let g of Be(o))f.has(a(g))&&p.add(g.id);return p}return{morph:n,defaults:e}}();var jt={type:2,name:U.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");Z(U.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=dt,settleDuration:l=`${Ce}`,useViewTransition:c=`${Ne}`})=>{let u=Number.parseInt(l),d=ie(c);e.innerHTML=n.trim();let h=[...e.content.children];for(let m of h){if(!(m instanceof Element))throw K("NoFragmentsFound",t);let _=r||`#${m.getAttribute("id")}`,y=[...document.querySelectorAll(_)||[]];if(!y.length)throw K("NoTargetsFound",t,{selectorOrID:_});d&&oe?xe.startViewTransition(()=>Bt(t,i,u,m,y)):Bt(t,i,u,m,y)}})}};function Bt(t,e,n,r,i){for(let l of i){l.classList.add(ce);let c=l.outerHTML,u=l;switch(e){case z.Morph:{let m=new Map,_=Ut.morph(u,r,{callbacks:{beforeAttributeUpdated:(y,E,b)=>{if(b==="update"&&y.startsWith("data-")){let M=m.get(E);M||(M=[],m.set(E,M));let V=y.slice(5);M.push(re(V))}return!0}}});if(!_?.length)throw K("MorphFailed",t);u=_[0];for(let[y,E]of m.entries())for(let b of E)t.applyAttributePlugin(y,b);break}case z.Inner:u.innerHTML=r.outerHTML;break;case z.Outer:u.replaceWith(r);break;case z.Prepend:u.prepend(r);break;case z.Append:u.append(r);break;case z.Before:u.before(r);break;case z.After:u.after(r);break;case z.UpsertAttributes:for(let m of r.getAttributeNames()){let _=r.getAttribute(m);u.setAttribute(m,_)}break;default:throw K("InvalidMergeMode",t,{mergeMode:e})}let d=u.classList;d.add(ce),setTimeout(()=>{l.classList.remove(ce),d.remove(ce)},n);let h=u.outerHTML;c!==h&&(d.add(tt),setTimeout(()=>{d.remove(tt)},n))}}var Kt={type:2,name:U.MergeSignals,onGlobalInit:async t=>{Z(U.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${ct}`})=>{let{signals:r}=t,i=ie(n);r.merge(Ie(e),i)})}};var Jt={type:2,name:U.RemoveFragments,onGlobalInit:async t=>{Z(U.RemoveFragments,({selector:e,settleDuration:n=`${Ce}`,useViewTransition:r=`${Ne}`})=>{if(!e.length)throw K("NoSelectorProvided",t);let i=Number.parseInt(n),l=ie(r),c=document.querySelectorAll(e),u=()=>{for(let d of c)d.classList.add(ce);setTimeout(()=>{for(let d of c)d.remove()},i)};l&&oe?xe.startViewTransition(()=>u()):u()})}};var Yt={type:2,name:U.RemoveSignals,onGlobalInit:async t=>{Z(U.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw K("NoPathsProvided",t);t.signals.remove(...n)})}};var Xt={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw P("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var zt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw P("CustomValidityInvalidElement",t);let i=n();return r(()=>{let l=i();if(typeof l!="string")throw P("CustomValidityInvalidExpression",t,{result:l});e.setCustomValidity(l)})}};var Qt="once",Zt="half",en="full",tn={type:1,name:"intersects",keyReq:2,mods:new Set([Qt,Zt,en]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(en)?i.threshold=1:n.has(Zt)&&(i.threshold=.5);let l=r(),c=new IntersectionObserver(u=>{for(let d of u)d.isIntersecting&&(l(),n.has(Qt)&&(c.disconnect(),delete t.dataset[e]))},i);return c.observe(t),()=>c.disconnect()}};var nn="session",rn={type:1,name:"persist",mods:new Set([nn]),onLoad:({key:t,effect:e,mods:n,signals:r,value:i})=>{t=W(t,n),t===""&&(t=G);let l=n.has(nn)?sessionStorage:localStorage,c=i.split(/\s+/).filter(h=>h!=="");c=c.map(h=>se(h));let u=()=>{let h=l.getItem(t)||"{}",m=JSON.parse(h);r.merge(m)},d=()=>{let h;c.length?h=r.subset(...c):h=r.values(),l.setItem(t,JSON.stringify(h))};return u(),e(()=>{d()})}};var sn={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,l=new URL(r,i).toString();window.history.replaceState({},"",l)})}};var Ge="smooth",nt="instant",rt="auto",on="hstart",an="hcenter",ln="hend",un="hnearest",cn="vstart",fn="vcenter",dn="vend",pn="vnearest",Yn="focus",Ue="center",mn="start",gn="end",hn="nearest",vn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([Ge,nt,rt,on,an,ln,un,cn,fn,dn,pn,Yn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:Ge,block:Ue,inline:Ue};if(n.has(Ge)&&(i.behavior=Ge),n.has(nt)&&(i.behavior=nt),n.has(rt)&&(i.behavior=rt),n.has(on)&&(i.inline=mn),n.has(an)&&(i.inline=Ue),n.has(ln)&&(i.inline=gn),n.has(un)&&(i.inline=hn),n.has(cn)&&(i.block=mn),n.has(fn)&&(i.block=Ue),n.has(dn)&&(i.block=gn),n.has(pn)&&(i.block=hn),!(e instanceof HTMLElement||e instanceof SVGElement))throw P("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var yn="none",bn="display",Sn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===yn&&t.removeProperty(bn):t.setProperty(bn,yn)})}};var En="view-transition",Tn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===En&&(t=!0);if(!t){let e=document.createElement("meta");e.name=En,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!oe){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let l=e.style;l.viewTransitionName=i})}};var An={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let l=i();for(let[c,u]of Object.entries(l))t.setAttribute(c,u)}):(e=Ee(e),n(async()=>{let l=!1;try{l=i()}catch{}let c;typeof l=="string"?c=l:c=JSON.stringify(l),!c||c==="false"||c==="null"||c==="undefined"?t.removeAttribute(e):t.setAttribute(e,c)}))}};var Xn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,_n=["change","input","keydown"],Rn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:l,effect:c}=t,u=n?W(n,r):se(l),d=()=>{},h=()=>{},m=e.tagName.toLowerCase(),_="",y=m.includes("input"),E=e.getAttribute("type"),b=m.includes("checkbox")||y&&E==="checkbox";b&&(_=!1),y&&E==="number"&&(_=0);let V=m.includes("select"),v=m.includes("radio")||y&&E==="radio",T=y&&E==="file";v&&(e.getAttribute("name")?.length||e.setAttribute("name",u)),i.upsertIfMissing(u,_),d=()=>{let N="value"in e,x=i.value(u),I=`${x}`;if(b||v){let S=e;b?S.checked=!!x||x==="true":v&&(S.checked=I===S.value)}else if(!T)if(V){let S=e;if(S.multiple)for(let L of S.options){if(L?.disabled)return;Array.isArray(x)||typeof x=="string"?L.selected=x.includes(L.value):typeof x=="number"?L.selected=x===Number(L.value):L.selected=x}else S.value=I}else N?e.value=I:e.setAttribute("value",I)},h=async()=>{if(T){let I=[...e?.files||[]],S=[],L=[],D=[];await Promise.all(I.map(F=>new Promise(te=>{let q=new FileReader;q.onload=()=>{if(typeof q.result!="string")throw P("InvalidFileResultType",t,{resultType:typeof q.result});let Y=q.result.match(Xn);if(!Y?.groups)throw P("InvalidDataUri",t,{result:q.result});S.push(Y.groups.contents),L.push(Y.groups.mime),D.push(F.name)},q.onloadend=()=>te(void 0),q.readAsDataURL(F)}))),i.setValue(u,S),i.setValue(`${u}Mimes`,L),i.setValue(`${u}Names`,D);return}let N=i.value(u),x=e||e;if(typeof N=="number"){let I=Number(x.value||x.getAttribute("value"));i.setValue(u,I)}else if(typeof N=="string"){let I=x.value||x.getAttribute("value")||"";i.setValue(u,I)}else if(typeof N=="boolean")if(b){let I=x.checked||x.getAttribute("checked")==="true";i.setValue(u,I)}else{let I=!!(x.value||x.getAttribute("value"));i.setValue(u,I)}else if(!(typeof N>"u"))if(Array.isArray(N))if(V){let L=[...e.selectedOptions].filter(D=>D.selected).map(D=>D.value);i.setValue(u,L)}else{let I=JSON.stringify(x.value.split(","));i.setValue(u,I)}else throw P("BindUnsupportedSignalType",t,{signalType:typeof N})};for(let N of _n)e.addEventListener(N,h);let w=c(()=>d()),k=N=>{N.persisted&&h()};return window.addEventListener("pageshow",k),()=>{w();for(let N of _n)e.removeEventListener(N,h);window.removeEventListener("pageshow",k)}}};var wn={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let l=t.classList,c=i();return r(()=>{if(e===""){let u=c();for(let[d,h]of Object.entries(u)){let m=d.split(/\s+/);h?l.add(...m):l.remove(...m)}}else e=W(e,n),c()?l.add(e):l.remove(e)})}};function Pe(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function he(t,e,n=!1){return t?t.has(e.toLowerCase()):n}var zn="evt",it="signalsChange",Qn=it.length,xn={type:1,name:"on",keyReq:1,valReq:1,argNames:[zn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,key:e,mods:n,rawKey:r,signals:i,value:l,effect:c,genRX:u})=>{let d=u(),h=t;n.has("window")&&(h=window);let m=v=>{v&&((n.has("prevent")||e==="submit")&&v.preventDefault(),n.has("stop")&&v.stopPropagation()),d(v)},_=n.get("delay");if(_){let v=Pe(_);m=Le(m,v)}let y=n.get("debounce");if(y){let v=Pe(y),T=he(y,"leading",!1),w=!he(y,"notrail",!1);m=vt(m,v,T,w)}let E=n.get("throttle");if(E){let v=Pe(E),T=!he(E,"noleading",!1),w=he(E,"trail",!1);m=yt(m,v,T,w)}if(oe&&n.has("viewtransition")){let v=m;m=(...T)=>document.startViewTransition(()=>v(...T))}let b={capture:!0,passive:!1,once:!1};if(n.has("capture")||(b.capture=!1),n.has("passive")&&(b.passive=!0),n.has("once")&&(b.once=!0),e==="load")return m(),()=>{};if(e==="interval"){let v=1e3,T=n.get("duration");T&&(v=Pe(T),he(T,"leading",!1)&&(t.dataset[r.replace(".leading","")]=l,delete t.dataset[r],m()));let w=setInterval(m,v);return()=>{clearInterval(w)}}if(e==="raf"){let v,T=()=>{m(),v=requestAnimationFrame(T)};return v=requestAnimationFrame(T),()=>{v&&cancelAnimationFrame(v)}}if(e.startsWith(it)){if(e===it){m();let w=k=>m(k);return document.addEventListener(Se,w),()=>{document.removeEventListener(Se,w)}}let v=W(re(e.slice(Qn)),n),T=new Map;return i.walk((w,k)=>{w.startsWith(v)&&T.set(k,k.value)}),c(()=>{for(let[w,k]of T)k!==w.value&&(m(),T.set(w,w.value))})}if(n.has("outside")){h=document;let v=m;m=w=>{let k=w?.target;t.contains(k)||v(w)}}let V=W(e,n);return h.addEventListener(V,m,b),()=>{h.removeEventListener(V,m)}}};var Pn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let l=e?W(e,n):se(i);return r.setValue(l,t),()=>r.setValue(l,null)}};var Mn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||P("TextInvalidElement",t),n(()=>{let l=i(t);e.textContent=`${l}`})}};var{round:Zn,max:er,min:tr}=Math,Cn={type:3,name:"fit",fn:(t,e,n,r,i,l,c=!1,u=!1)=>{let d=(e-n)/(r-n)*(l-i)+i;return u&&(d=Zn(d)),c&&(d=er(i,tr(l,d))),d}};var Nn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var In={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};et.load(An,Rn,wn,xn,Pn,Sn,Mn,$t,Ft,Wt,qt,Ht,Ot,jt,Kt,Jt,Yt,Gt,Xt,zt,tn,rn,sn,vn,Tn,Cn,Nn,In);var To=et;export{To as Datastar};
//# sourceMappingURL=datastar.js.map
