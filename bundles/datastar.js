// Datastar v1.0.0-beta.7
var $e=/ðŸ–•JS_DSðŸš€/.source,oe=$e.slice(0,5),Ne=$e.slice(4),D="datastar";var Ge="Datastar-Request",he=300,Ue=1e3,Be="type module",ve=!1,je=!1,Ke=!0,q={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},Je=q.Morph,k={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var M=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(M||{});var ae=`${D}-signals`;var J=t=>t.trim()==="true",le=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),j=t=>le(t).replace(/-./g,e=>e[1].toUpperCase()),Pe=t=>le(t).replace(/-/g,"_"),hn=t=>j(t).replace(/^./,e=>e[0].toUpperCase()),ye=t=>new Function(`return Object.assign({}, ${t})`)(),z=t=>t.startsWith("$")?t.slice(1):t,vn={kebab:le,snake:Pe,pascal:hn};function V(t,e){for(let n of e.get("case")||[]){let r=vn[n];r&&(t=r(t))}return t}var yn="computed",ze={type:1,name:yn,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=V(t,e);let i=r();n.setComputed(t,i)}};var Xe={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:s}=t,l=n.has("ifmissing");if(e!==""){let u=V(e,n),g=i===""?i:s()();l?r.upsertIfMissing(u,g):r.setValue(u,g)}else{let u=ye(t.value);t.value=JSON.stringify(u);let S=s()();r.merge(S,l)}}};var Ye={type:1,name:"star",keyReq:2,valReq:2,onLoad:({signals:t})=>{let e=t.signal("result")?.value;t.setValue("result",e+1)}};var ue=class{#e=0;#n;constructor(e=D){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function Qe(t){if(t.id)return t.id;let e=new ue,n=t;for(;n;){if(e.with(n.tagName||""),n.id){e.with(n.id);break}let r=n?.parentNode;r&&e.with([...r.children].indexOf(n)),n=r}return e.value}function Ce(t,e){if(!t||!(t instanceof HTMLElement||t instanceof SVGElement))return null;let n=t.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||e(t);let r=t.firstElementChild;for(;r;)Ce(r,e),r=r.nextElementSibling}var bn="https://data-star.dev/errors";function Le(t,e,n={}){let r=new Error;r.name=`${D} ${t} error`;let i=Pe(e),s=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),l=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${bn}/${t}/${i}?${s}
Context: ${l}`,r}function $(t,e,n={}){return Le("internal",e,Object.assign({from:t},n))}function F(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]}};return Le("init",t,Object.assign(r,n))}function N(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Le("runtime",t,Object.assign(r,n))}var Z="preact-signals",Sn=Symbol.for("preact-signals"),G=1,ee=2,fe=4,ne=8,be=16,te=32;function Ve(){Se++}function De(){if(Se>1){Se--;return}let t,e=!1;for(;ce!==void 0;){let n=ce;for(ce=void 0,Ie++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~ee,!(n._flags&ne)&&et(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(Ie=0,Se--,e)throw t}var P;var ce,Se=0,Ie=0,Te=0;function Ze(t){if(P===void 0)return;let e=t._node;if(e===void 0||e._target!==P)return e={_version:0,_source:t,_prevSource:P._sources,_nextSource:void 0,_target:P,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},P._sources!==void 0&&(P._sources._nextSource=e),P._sources=e,t._node=e,P._flags&te&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=P._sources,e._nextSource=void 0,P._sources._nextSource=e,P._sources=e),e}function C(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}C.prototype.brand=Sn;C.prototype._refresh=()=>!0;C.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};C.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};C.prototype.subscribe=function(t){return Ae(()=>{let e=this.value,n=P;P=void 0;try{t(e)}finally{P=n}})};C.prototype.valueOf=function(){return this.value};C.prototype.toString=function(){return`${this.value}`};C.prototype.toJSON=function(){return this.value};C.prototype.peek=function(){let t=P;P=void 0;try{return this.value}finally{P=t}};Object.defineProperty(C.prototype,"value",{get(){let t=Ze(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(Ie>100)throw $(Z,"SignalCycleDetected");let e=this._value,n=t;this._value=t,this._version++,Te++,Ve();try{for(let r=this._targets;r!==void 0;r=r._nextTarget)r._target._notify()}finally{De()}this?._onChange({old:e,revised:n})}}});function et(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function tt(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function nt(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function Y(t){C.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=Te-1,this._flags=fe}Y.prototype=new C;Y.prototype._refresh=function(){if(this._flags&=~ee,this._flags&G)return!1;if((this._flags&(fe|te))===te||(this._flags&=~fe,this._globalVersion===Te))return!0;if(this._globalVersion=Te,this._flags|=G,this._version>0&&!et(this))return this._flags&=~G,!0;let t=P;try{tt(this),P=this;let e=this._fn();(this._flags&be||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~be,this._version++)}catch(e){this._value=e,this._flags|=be,this._version++}return P=t,nt(this),this._flags&=~G,!0};Y.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=fe|te;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}C.prototype._subscribe.call(this,t)};Y.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(C.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~te;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};Y.prototype._notify=function(){if(!(this._flags&ee)){this._flags|=fe|ee;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(Y.prototype,"value",{get(){if(this._flags&G)throw $(Z,"SignalCycleDetected");let t=Ze(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&be)throw $(Z,"GetComputedError",{value:this._value});return this._value}});function rt(t){return new Y(t)}function it(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){Ve();let n=P;P=void 0;try{e()}catch(r){throw t._flags&=~G,t._flags|=ne,ke(t),$(Z,"CleanupEffectError",{error:r})}finally{P=n,De()}}}function ke(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,it(t)}function Tn(t){if(P!==this)throw $(Z,"EndEffectError");nt(this),P=t,this._flags&=~G,this._flags&ne&&ke(this),De()}function de(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=te}de.prototype._callback=function(){let t=this._start();try{if(this._flags&ne||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};de.prototype._start=function(){if(this._flags&G)throw $(Z,"SignalCycleDetected");this._flags|=G,this._flags&=~ne,it(this),tt(this),Ve();let t=P;return P=this,Tn.bind(this,t)};de.prototype._notify=function(){this._flags&ee||(this._flags|=ee,this._nextBatchedEffect=ce,ce=this)};de.prototype._dispose=function(){this._flags|=ne,this._flags&G||ke(this)};function Ae(t){let e=new de(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var st="namespacedSignals",re=t=>{document.dispatchEvent(new CustomEvent(ae,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function ot(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof C?n[r]=i.value:n[r]=ot(i)}return n}function at(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw $(st,"InvalidSignalKey",{key:i});let s=e[i];if(s instanceof Object&&!Array.isArray(s)){t[i]||(t[i]={});let l=at(t[i],s,n);r.added.push(...l.added.map(u=>`${i}.${u}`)),r.removed.push(...l.removed.map(u=>`${i}.${u}`)),r.updated.push(...l.updated.map(u=>`${i}.${u}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let g=t[i];if(g instanceof C){let S=g.value;g.value=s,S!==s&&r.updated.push(i);continue}}let u=new C(s);u._onChange=()=>{re({updated:[i]})},t[i]=u,r.added.push(i)}}return r}function lt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof C?e(n,r):lt(r,(i,s)=>{e(`${n}.${i}`,s)})}}function An(t,...e){let n={};for(let r of e){let i=r.split("."),s=t,l=n;for(let g=0;g<i.length-1;g++){let S=i[g];if(!s[S])return{};l[S]||(l[S]={}),s=s[S],l=l[S]}let u=i[i.length-1];l[u]=s[u]}return n}var Ee=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let l=0;l<n.length-1;l++){let u=n[l];if(!r[u])return null;r=r[u]}let i=n[n.length-1],s=r[i];if(!s)throw $(st,"SignalNotFound",{path:e});return s}setSignal(e,n){let r=e.split("."),i=this.#e;for(let l=0;l<r.length-1;l++){let u=r[l];i[u]||(i[u]={}),i=i[u]}let s=r[r.length-1];i[s]=n}setComputed(e,n){let r=rt(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let{signal:r}=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&re({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let g=0;g<r.length-1;g++){let S=r[g];i[S]||(i[S]={}),i=i[S]}let s=r[r.length-1],l=i[s];if(l instanceof C)return{signal:l,inserted:!1};let u=new C(n);return u._onChange=()=>{re({updated:[e]})},i[s]=u,re({added:[e]}),{signal:u,inserted:!0}}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),s=this.#e;for(let u=0;u<i.length-1;u++){let g=i[u];if(!s[g])return;s=s[g]}let l=i[i.length-1];delete s[l],n.push(r)}re({removed:n})}merge(e,n=!1){let r=at(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&re(r)}subset(...e){return An(this.values(),...e)}walk(e){lt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return ot(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var ut=(t,e)=>`${t}${oe}${e}`,_e=class{constructor(){this.aliasPrefix="";this.#e=new Ee;this.#n=[];this.#r={};this.#a=[];this.#s=null;this.#t=new Map}#e;#n;#r;#a;#s;#t;get signals(){return this.#e}load(...e){let n=this;for(let r of e){let i={get signals(){return n.#e},effect:l=>Ae(l),actions:this.#r,plugin:r,applyAttributePlugin:n.#i.bind(n)},s;switch(r.type){case 2:{let l=r;this.#a.push(l),s=l.onGlobalInit;break}case 3:{this.#r[r.name]=r;break}case 1:{let l=r;this.#n.push(l),s=l.onGlobalInit;break}default:throw F("InvalidPluginType",i)}s&&s(i)}this.#n.sort((r,i)=>{let s=i.name.length-r.name.length;return s!==0?s:r.name.localeCompare(i.name)}),this.#o(document.body),this.#l()}#o(e){Ce(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#l(){this.#s||(this.#s=new MutationObserver(e=>{for(let{target:n,type:r,attributeName:i,oldValue:s,addedNodes:l,removedNodes:u}of e)switch(r){case"childList":{for(let g of u){let S=g,y=this.#t.get(S);if(y){for(let[w,v]of y)v();this.#t.delete(S)}}for(let g of l){let S=g;this.#o(S)}}break;case"attributes":{{let g="data-",S=g+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!i?.startsWith(S))break;let y=n,w=j(i.slice(g.length));if(s!==null&&y.dataset[w]!==s){let v=this.#t.get(y);if(v){let x=ut(w,s),b=v.get(x);b&&(b(),v.delete(x))}}w in y.dataset&&this.#i(y,w)}break}}}),this.#s.observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}))}#i(e,n){let r=n.slice(this.aliasPrefix.length),i=this.#n.find(m=>r.startsWith(m.name));if(!i)return;let s=this.#t.get(e);if(s)for(let[m,o]of s)m.startsWith(n)&&(o(),s.delete(m));e.id.length||(e.id=Qe(e));let[l,...u]=r.slice(i.name.length).split(/\_\_+/),g=l.length>0;g&&(l=j(l));let S=e.dataset[n]||"",y=S.length>0,w=this,v={get signals(){return w.#e},applyAttributePlugin:w.#i.bind(w),effect:m=>Ae(m),actions:this.#r,genRX:()=>this.#u(v,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:l,value:S,mods:new Map},x=i.keyReq||0;if(g){if(x===2)throw N(`${i.name}KeyNotAllowed`,v)}else if(x===1)throw N(`${i.name}KeyRequired`,v);let b=i.valReq||0;if(y){if(b===2)throw N(`${i.name}ValueNotAllowed`,v)}else if(b===1)throw N(`${i.name}ValueRequired`,v);if(x===3||b===3){if(g&&y)throw N(`${i.name}KeyAndValueProvided`,v);if(!g&&!y)throw N(`${i.name}KeyOrValueRequired`,v)}for(let m of u){let[o,...c]=m.split(".");v.mods.set(j(o),new Set(c.map(a=>a.toLowerCase())))}let E=i.onLoad(v);if(E){let m=this.#t.get(e);m||(m=new Map,this.#t.set(e,m)),m.set(ut(n,S),E)}let A=i.removeOnLoad;A&&A(r)===!0&&delete e.dataset[n]}#u(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,s=e.value.trim().match(i);if(s){let b=s.length-1,E=s[b].trim();E.startsWith("return")||(s[b]=`return (${E});`),r=s.join(`;
`)}let l=new Map,u=new RegExp(`(?:${oe})(.*?)(?:${Ne})`,"gm");for(let b of r.matchAll(u)){let E=b[1],A=new ue("dsEscaped").with(E).value;l.set(A,E),r=r.replace(oe+E+Ne,A)}let g=/@(\w*)\(/gm,S=r.matchAll(g),y=new Set;for(let b of S)y.add(b[1]);let w=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(w,"ctx.actions.$1.fn(ctx,");let v=e.signals.paths();if(v.length){let b=new RegExp(`\\$(${v.join("|")})(\\W|$)`,"gm");r=r.replaceAll(b,"ctx.signals.signal('$1').value$2")}for(let[b,E]of l)r=r.replace(b,E);let x=`return (()=> {
${r}
})()`;e.fnContent=x;try{let b=new Function("ctx",...n,x);return(...E)=>{try{return b(e,...E)}catch(A){throw N("ExecuteExpression",e,{error:A.message})}}}catch(b){throw N("GenerateExpression",e,{error:b.message})}}};var ct=new _e;ct.load(Ye,Xe,ze);var Oe=ct;async function En(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function _n(t){let e,n,r,i=!1;return function(l){e===void 0?(e=l,n=0,r=-1):e=Rn(e,l);let u=e.length,g=0;for(;n<u;){i&&(e[n]===10&&(g=++n),i=!1);let S=-1;for(;n<u&&S===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-g);break;case 13:i=!0;case 10:S=n;break}if(S===-1)break;t(e.subarray(g,S),r),g=n,r=-1}g===u?e=void 0:g!==0&&(e=e.subarray(g),n-=g)}}function xn(t,e,n){let r=ft(),i=new TextDecoder;return function(l,u){if(l.length===0)n?.(r),r=ft();else if(u>0){let g=i.decode(l.subarray(0,u)),S=u+(l[u+1]===32?2:1),y=i.decode(l.subarray(S));switch(g){case"data":r.data=r.data?`${r.data}
${y}`:y;break;case"event":r.event=y;break;case"id":t(r.id=y);break;case"retry":{let w=Number.parseInt(y,10);Number.isNaN(w)||e(r.retry=w);break}}}}}function Rn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function ft(){return{data:"",event:"",id:"",retry:void 0}}var wn="text/event-stream",dt="last-event-id";function pt(t,e,{signal:n,headers:r,onopen:i,onmessage:s,onclose:l,onerror:u,openWhenHidden:g,fetch:S,retryInterval:y=1e3,retryScaler:w=2,retryMaxWaitMs:v=3e4,retryMaxCount:x=10,...b}){return new Promise((E,A)=>{let m=0,o={...r};o.accept||(o.accept=wn);let c;function a(){c.abort(),document.hidden||T()}g||document.addEventListener("visibilitychange",a);let d=0;function h(){document.removeEventListener("visibilitychange",a),window.clearTimeout(d),c.abort()}n?.addEventListener("abort",()=>{h(),E()});let p=S??window.fetch,f=i??function(){};async function T(){c=new AbortController;try{let _=await p(e,{...b,headers:o,signal:c.signal});await f(_),await En(_.body,_n(xn(R=>{R?o[dt]=R:delete o[dt]},R=>{y=R},s))),l?.(),h(),E()}catch(_){if(!c.signal.aborted)try{let R=u?.(_)??y;window.clearTimeout(d),d=window.setTimeout(T,R),y*=w,y=Math.min(y,v),m++,m>=x?(h(),A(N("SseMaxRetries",t,{retryMaxCount:x}))):console.error(`Datastar failed to reach ${b.method}: ${e.toString()} retry in ${R}ms`)}catch(R){h(),A(R)}}}T()})}var ie=`${D}-sse`,Fe=`${D}-settling`,Q=`${D}-swapping`,xe="started",Re="finished",mt="error",gt="retrying";function U(t,e){document.addEventListener(ie,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function pe(t,e){document.dispatchEvent(new CustomEvent(ie,{detail:{type:t,argsRaw:e}}))}var ht=t=>`${t}`.includes("text/event-stream"),B=async(t,e,n,r)=>{let{el:{id:i},el:s,signals:l}=t,{headers:u,contentType:g,includeLocal:S,selector:y,openWhenHidden:w,retryInterval:v,retryScaler:x,retryMaxWaitMs:b,retryMaxCount:E,abort:A}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:Ue,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),m=e.toLowerCase(),o=()=>{};try{if(pe(xe,{elId:i}),!n?.length)throw N("SseNoUrlProvided",t,{action:m});let c={};c[Ge]=!0,g==="json"&&(c["Content-Type"]="application/json");let a=Object.assign({},c,u),d={method:e,headers:a,openWhenHidden:w,retryInterval:v,retryScaler:x,retryMaxWaitMs:b,retryMaxCount:E,signal:A,onopen:async f=>{if(f.status>=400){let T=f.status.toString();pe(mt,{status:T})}},onmessage:f=>{if(!f.event.startsWith(D))return;let T=f.event,_={},R=f.data.split(`
`);for(let H of R){let I=H.indexOf(" "),W=H.slice(0,I),K=_[W];K||(K=[],_[W]=K);let gn=H.slice(I+1);K.push(gn)}let L={};for(let[H,I]of Object.entries(_))L[H]=I.join(`
`);pe(T,L)},onerror:f=>{if(ht(f))throw N("InvalidContentType",t,{url:n});f&&(console.error(f.message),pe(gt,{message:f.message}))}},h=new URL(n,window.location.origin),p=new URLSearchParams(h.search);if(g==="json"){let f=l.JSON(!1,!S);e==="GET"?p.set(D,f):d.body=f}else if(g==="form"){let f=y?document.querySelector(y):s.closest("form");if(f===null)throw y?N("SseFormNotFound",t,{action:m,selector:y}):N("SseClosestFormNotFound",t,{action:m});if(s!==f){let _=R=>R.preventDefault();f.addEventListener("submit",_),o=()=>f.removeEventListener("submit",_)}if(!f.checkValidity()){f.reportValidity(),o();return}let T=new FormData(f);if(e==="GET"){let _=new URLSearchParams(T);for(let[R,L]of _)p.set(R,L)}else d.body=T}else throw N("SseInvalidContentType",t,{action:m,contentType:g});h.search=p.toString();try{await pt(t,h.toString(),d)}catch(f){if(!ht(f))throw N("SseFetchFailed",t,{method:e,url:n,error:f})}}finally{pe(Re,{elId:i}),o()}};var vt={type:3,name:"delete",fn:async(t,e,n)=>B(t,"DELETE",e,{...n})};var yt={type:3,name:"get",fn:async(t,e,n)=>B(t,"GET",e,{...n})};var bt={type:3,name:"patch",fn:async(t,e,n)=>B(t,"PATCH",e,{...n})};var St={type:3,name:"post",fn:async(t,e,n)=>B(t,"POST",e,{...n})};var Tt={type:3,name:"put",fn:async(t,e,n)=>B(t,"PUT",e,{...n})};var At={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let s=e?V(e,n):z(i),{signal:l}=r.upsertIfMissing(s,!1),u=g=>{let{type:S,argsRaw:{elId:y}}=g.detail;if(y===t.id)switch(S){case xe:l.value=!0;break;case Re:l.value=!1;break}};return document.addEventListener(ie,u),()=>{document.removeEventListener(ie,u)}}};var Et={type:2,name:k.ExecuteScript,onGlobalInit:async t=>{U(k.ExecuteScript,({autoRemove:e=`${Ke}`,attributes:n=Be,script:r})=>{let i=J(e);if(!r?.length)throw F("NoScriptProvided",t);let s=document.createElement("script");for(let l of n.split(`
`)){let u=l.indexOf(" "),g=u?l.slice(0,u):l,S=u?l.slice(u):"";s.setAttribute(g.trim(),S.trim())}s.text=r,document.head.appendChild(s),i&&s.remove()})}};var me=document,X=!!me.startViewTransition;var _t=function(){"use strict";let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:v=>v.getAttribute("im-preserve")==="true",shouldReAppend:v=>v.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function n(v,x,b={}){v=y(v);let E=w(x),A=S(v,E,b),m=i(A,()=>u(A,v,E,o=>o.morphStyle==="innerHTML"?(s(o,v,E),Array.from(v.childNodes)):r(o,v,E)));return A.pantry.remove(),m}function r(v,x,b){let E=w(x),A=Array.from(E.childNodes),m=A.indexOf(x),o=A.length-(m+1);return s(v,E,b,x,x.nextSibling),A=Array.from(E.childNodes),A.slice(m,A.length-o)}function i(v,x){if(!v.config.restoreFocus)return x();let b=document.activeElement;if(!(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement))return x();let{id:E,selectionStart:A,selectionEnd:m}=b,o=x();return E&&E!==document.activeElement?.id&&(b=v.target.querySelector(`#${E}`),b?.focus()),b&&!b.selectionEnd&&m&&b.setSelectionRange(A,m),o}let s=function(){function v(a,d,h,p=null,f=null){d instanceof HTMLTemplateElement&&h instanceof HTMLTemplateElement&&(d=d.content,h=h.content),p||=d.firstChild;for(let T of h.childNodes){if(p&&p!=f){let R=b(a,T,p,f);if(R){R!==p&&A(a,p,R),l(R,T,a),p=R.nextSibling;continue}}if(T instanceof Element&&a.persistentIds.has(T.id)){let R=m(d,T.id,p,a);l(R,T,a),p=R.nextSibling;continue}let _=x(d,T,p,a);_&&(p=_.nextSibling)}for(;p&&p!=f;){let T=p;p=p.nextSibling,E(a,T)}}function x(a,d,h,p){if(p.callbacks.beforeNodeAdded(d)===!1)return null;if(p.idMap.has(d)){let f=document.createElement(d.tagName);return a.insertBefore(f,h),l(f,d,p),p.callbacks.afterNodeAdded(f),f}else{let f=document.importNode(d,!0);return a.insertBefore(f,h),p.callbacks.afterNodeAdded(f),f}}let b=function(){function a(p,f,T,_){let R=null,L=f.nextSibling,H=0,I=T;for(;I&&I!=_;){if(h(I,f)){if(d(p,I,f))return I;R===null&&(p.idMap.has(I)||(R=I))}if(R===null&&L&&h(I,L)&&(H++,L=L.nextSibling,H>=2&&(R=void 0)),I.contains(document.activeElement))break;I=I.nextSibling}return R||null}function d(p,f,T){let _=p.idMap.get(f),R=p.idMap.get(T);if(!R||!_)return!1;for(let L of _)if(R.has(L))return!0;return!1}function h(p,f){let T=p,_=f;return T.nodeType===_.nodeType&&T.tagName===_.tagName&&(!T.id||T.id===_.id)}return a}();function E(a,d){if(a.idMap.has(d))c(a.pantry,d,null);else{if(a.callbacks.beforeNodeRemoved(d)===!1)return;d.parentNode?.removeChild(d),a.callbacks.afterNodeRemoved(d)}}function A(a,d,h){let p=d;for(;p&&p!==h;){let f=p;p=p.nextSibling,E(a,f)}return p}function m(a,d,h,p){let f=p.target.querySelector(`#${d}`)||p.pantry.querySelector(`#${d}`);return o(f,p),c(a,f,h),f}function o(a,d){let h=a.id;for(;a=a.parentNode;){let p=d.idMap.get(a);p&&(p.delete(h),p.size||d.idMap.delete(a))}}function c(a,d,h){if(a.moveBefore)try{a.moveBefore(d,h)}catch{a.insertBefore(d,h)}else a.insertBefore(d,h)}return v}(),l=function(){function v(o,c,a){return a.ignoreActive&&o===document.activeElement?null:(a.callbacks.beforeNodeMorphed(o,c)===!1||(o instanceof HTMLHeadElement&&a.head.ignore||(o instanceof HTMLHeadElement&&a.head.style!=="morph"?g(o,c,a):(x(o,c,a),m(o,a)||s(a,o,c))),a.callbacks.afterNodeMorphed(o,c)),o)}function x(o,c,a){let d=c.nodeType;if(d===1){let h=o,p=c,f=h.attributes,T=p.attributes;for(let _ of T)A(_.name,h,"update",a)||h.getAttribute(_.name)!==_.value&&h.setAttribute(_.name,_.value);for(let _=f.length-1;0<=_;_--){let R=f[_];if(R&&!p.hasAttribute(R.name)){if(A(R.name,h,"remove",a))continue;h.removeAttribute(R.name)}}m(h,a)||b(h,p,a)}(d===8||d===3)&&o.nodeValue!==c.nodeValue&&(o.nodeValue=c.nodeValue)}function b(o,c,a){if(o instanceof HTMLInputElement&&c instanceof HTMLInputElement&&c.type!=="file"){let d=c.value,h=o.value;E(o,c,"checked",a),E(o,c,"disabled",a),c.hasAttribute("value")?h!==d&&(A("value",o,"update",a)||(o.setAttribute("value",d),o.value=d)):A("value",o,"remove",a)||(o.value="",o.removeAttribute("value"))}else if(o instanceof HTMLOptionElement&&c instanceof HTMLOptionElement)E(o,c,"selected",a);else if(o instanceof HTMLTextAreaElement&&c instanceof HTMLTextAreaElement){let d=c.value,h=o.value;if(A("value",o,"update",a))return;d!==h&&(o.value=d),o.firstChild&&o.firstChild.nodeValue!==d&&(o.firstChild.nodeValue=d)}}function E(o,c,a,d){let h=c[a],p=o[a];if(h!==p){let f=A(a,o,"update",d);f||(o[a]=c[a]),h?f||o.setAttribute(a,""):A(a,o,"remove",d)||o.removeAttribute(a)}}function A(o,c,a,d){return o==="value"&&d.ignoreActiveValue&&c===document.activeElement?!0:d.callbacks.beforeAttributeUpdated(o,c,a)===!1}function m(o,c){return!!c.ignoreActiveValue&&o===document.activeElement&&o!==document.body}return v}();function u(v,x,b,E){if(v.head.block){let A=x.querySelector("head"),m=b.querySelector("head");if(A&&m){let o=g(A,m,v);return Promise.all(o).then(()=>{let c=Object.assign(v,{head:{block:!1,ignore:!0}});return E(c)})}}return E(v)}function g(v,x,b){let E=[],A=[],m=[],o=[],c=new Map;for(let d of x.children)c.set(d.outerHTML,d);for(let d of v.children){let h=c.has(d.outerHTML),p=b.head.shouldReAppend(d),f=b.head.shouldPreserve(d);h||f?p?A.push(d):(c.delete(d.outerHTML),m.push(d)):b.head.style==="append"?p&&(A.push(d),o.push(d)):b.head.shouldRemove(d)!==!1&&A.push(d)}o.push(...c.values());let a=[];for(let d of o){let h=document.createRange().createContextualFragment(d.outerHTML).firstChild;if(b.callbacks.beforeNodeAdded(h)!==!1){if("href"in h&&h.href||"src"in h&&h.src){let p,f=new Promise(function(T){p=T});h.addEventListener("load",function(){p()}),a.push(f)}v.appendChild(h),b.callbacks.afterNodeAdded(h),E.push(h)}}for(let d of A)b.callbacks.beforeNodeRemoved(d)!==!1&&(v.removeChild(d),b.callbacks.afterNodeRemoved(d));return b.head.afterHeadMorphed(v,{added:E,kept:m,removed:A}),a}let S=function(){function v(c,a,d){let{persistentIds:h,idMap:p}=m(c,a),f=x(d),T=f.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(T))throw`Do not understand how to morph style ${T}`;return{target:c,newContent:a,config:f,morphStyle:T,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,restoreFocus:f.restoreFocus,idMap:p,persistentIds:h,pantry:b(),callbacks:f.callbacks,head:f.head}}function x(c){let a=Object.assign({},e);return Object.assign(a,c),a.callbacks=Object.assign({},e.callbacks,c.callbacks),a.head=Object.assign({},e.head,c.head),a}function b(){let c=document.createElement("div");return c.hidden=!0,document.body.insertAdjacentElement("afterend",c),c}function E(c){let a=Array.from(c.querySelectorAll("[id]"));return c.id&&a.push(c),a}function A(c,a,d,h){for(let p of h)if(a.has(p.id)){let f=p;for(;f;){let T=c.get(f);if(T==null&&(T=new Set,c.set(f,T)),T.add(p.id),f===d)break;f=f.parentElement}}}function m(c,a){let d=E(c),h=E(a),p=o(d,h),f=new Map;A(f,p,c,d);let T=a.__idiomorphRoot||a;return A(f,p,T,h),{persistentIds:p,idMap:f}}function o(c,a){let d=new Set,h=new Map;for(let{id:f,tagName:T}of c)h.has(f)?d.add(f):h.set(f,T);let p=new Set;for(let{id:f,tagName:T}of a)p.has(f)?d.add(f):h.get(f)===T&&p.add(f);for(let f of d)p.delete(f);return p}return v}(),{normalizeElement:y,normalizeParent:w}=function(){let v=new WeakSet;function x(m){return m instanceof Document?m.documentElement:m}function b(m){if(m==null)return document.createElement("div");if(typeof m=="string")return b(A(m));if(v.has(m))return m;if(m instanceof Node){if(m.parentNode)return E(m);{let o=document.createElement("div");return o.append(m),o}}else{let o=document.createElement("div");for(let c of[...m])o.append(c);return o}}function E(m){return{childNodes:[m],querySelectorAll:o=>{let c=m.querySelectorAll(o);return m.matches(o)?[m,...c]:c},insertBefore:(o,c)=>m.parentNode.insertBefore(o,c),moveBefore:(o,c)=>m.parentNode.moveBefore(o,c),get __idiomorphRoot(){return m}}}function A(m){let o=new DOMParser,c=m.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(c.match(/<\/html>/)||c.match(/<\/head>/)||c.match(/<\/body>/)){let a=o.parseFromString(m,"text/html");if(c.match(/<\/html>/))return v.add(a),a;{let d=a.firstChild;return d&&v.add(d),d}}else{let d=o.parseFromString("<body><template>"+m+"</template></body>","text/html").body.querySelector("template").content;return v.add(d),d}}return{normalizeElement:x,normalizeParent:b}}();return{morph:n,defaults:e}}();var Rt={type:2,name:k.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");U(k.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=Je,settleDuration:s=`${he}`,useViewTransition:l=`${ve}`})=>{let u=Number.parseInt(s),g=J(l);e.innerHTML=n.trim();let S=[...e.content.children];for(let y of S){if(!(y instanceof Element))throw F("NoFragmentsFound",t);let w=r||`#${y.getAttribute("id")}`,v=[...document.querySelectorAll(w)||[]];if(!v.length)throw F("NoTargetsFound",t,{selectorOrID:w});g&&X?me.startViewTransition(()=>xt(t,i,u,y,v)):xt(t,i,u,y,v)}})}};function xt(t,e,n,r,i){for(let s of i){s.classList.add(Q);let l=s.outerHTML,u=s;switch(e){case q.Morph:{let y=new Map,w=r.cloneNode(!0),v=_t.morph(u,w,{restoreFocus:!0,callbacks:{beforeAttributeUpdated:(x,b,E)=>{if(E==="update"&&x.startsWith("data-")){let A=y.get(b);A||(A=[],y.set(b,A));let m=x.slice(5);A.push(j(m))}return!0}}});if(v?.length){u=v[0];for(let[x,b]of y.entries())for(let E of b)t.applyAttributePlugin(x,E)}break}case q.Inner:u.innerHTML=r.outerHTML;break;case q.Outer:u.replaceWith(r);break;case q.Prepend:u.prepend(r);break;case q.Append:u.append(r);break;case q.Before:u.before(r);break;case q.After:u.after(r);break;case q.UpsertAttributes:for(let y of r.getAttributeNames()){let w=r.getAttribute(y);u.setAttribute(y,w)}break;default:throw F("InvalidMergeMode",t,{mergeMode:e})}let g=u.classList;g?.add(Q),setTimeout(()=>{s.classList.remove(Q),g?.remove(Q)},n);let S=u.outerHTML;g&&l!==S&&(g.add(Fe),setTimeout(()=>{g.remove(Fe)},n))}}var wt={type:2,name:k.MergeSignals,onGlobalInit:async t=>{U(k.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${je}`})=>{let{signals:r}=t,i=J(n);r.merge(ye(e),i)})}};var Mt={type:2,name:k.RemoveFragments,onGlobalInit:async t=>{U(k.RemoveFragments,({selector:e,settleDuration:n=`${he}`,useViewTransition:r=`${ve}`})=>{if(!e.length)throw F("NoSelectorProvided",t);let i=Number.parseInt(n),s=J(r),l=document.querySelectorAll(e),u=()=>{for(let g of l)g.classList.add(Q);setTimeout(()=>{for(let g of l)g.remove()},i)};s&&X?me.startViewTransition(()=>u()):u()})}};var Nt={type:2,name:k.RemoveSignals,onGlobalInit:async t=>{U(k.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw F("NoPathsProvided",t);t.signals.remove(...n)})}};var Pt={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw N("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Ct={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw N("CustomValidityInvalidElement",t);let i=n();return r(()=>{let s=i();if(typeof s!="string")throw N("CustomValidityInvalidExpression",t,{result:s});e.setCustomValidity(s)})}};var Lt="once",It="half",Vt="full",Dt={type:1,name:"intersects",keyReq:2,mods:new Set([Lt,It,Vt]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(Vt)?i.threshold=1:n.has(It)&&(i.threshold=.5);let s=r(),l=new IntersectionObserver(u=>{for(let g of u)g.isIntersecting&&(s(),n.has(Lt)&&(l.disconnect(),delete t.dataset[e]))},i);return l.observe(t),()=>l.disconnect()}};var kt="session",Ot={type:1,name:"persist",mods:new Set([kt]),onLoad:({key:t,effect:e,mods:n,signals:r,value:i})=>{t=V(t,n),t===""&&(t=D);let s=n.has(kt)?sessionStorage:localStorage,l=i.split(/\s+/).filter(S=>S!=="");l=l.map(S=>z(S));let u=()=>{let S=s.getItem(t)||"{}",y=JSON.parse(S);r.merge(y)},g=()=>{let S;l.length?S=r.subset(...l):S=r.values(),s.setItem(t,JSON.stringify(S))};return u(),e(()=>{g()})}};var Ft={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,s=new URL(r,i).toString();window.history.replaceState({},"",s)})}};var we="smooth",He="instant",We="auto",Ht="hstart",Wt="hcenter",qt="hend",$t="hnearest",Gt="vstart",Ut="vcenter",Bt="vend",jt="vnearest",Mn="focus",Me="center",Kt="start",Jt="end",zt="nearest",Xt={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([we,He,We,Ht,Wt,qt,$t,Gt,Ut,Bt,jt,Mn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:we,block:Me,inline:Me};if(n.has(we)&&(i.behavior=we),n.has(He)&&(i.behavior=He),n.has(We)&&(i.behavior=We),n.has(Ht)&&(i.inline=Kt),n.has(Wt)&&(i.inline=Me),n.has(qt)&&(i.inline=Jt),n.has($t)&&(i.inline=zt),n.has(Gt)&&(i.block=Kt),n.has(Ut)&&(i.block=Me),n.has(Bt)&&(i.block=Jt),n.has(jt)&&(i.block=zt),!(e instanceof HTMLElement||e instanceof SVGElement))throw N("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var Yt="none",Qt="display",Zt={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===Yt&&t.removeProperty(Qt):t.setProperty(Qt,Yt)})}};var en="view-transition",tn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===en&&(t=!0);if(!t){let e=document.createElement("meta");e.name=en,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!X){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let s=e.style;s.viewTransitionName=i})}};var nn={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let s=i();for(let[l,u]of Object.entries(s))t.setAttribute(l,u)}):(e=le(e),n(async()=>{let s=!1;try{s=i()}catch{}let l;typeof s=="string"?l=s:l=JSON.stringify(s),!l||l==="false"||l==="null"||l==="undefined"?t.removeAttribute(e):t.setAttribute(e,l)}))}};var Nn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,rn=["change","input","keydown"],sn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:s,effect:l}=t,u=n?V(n,r):z(s),g=e.tagName.toLowerCase(),S="",y=g.includes("input"),w=e.getAttribute("type"),v=g.includes("checkbox")||y&&w==="checkbox";v&&(S=!1),y&&w==="number"&&(S=0);let b=g.includes("select"),E=g.includes("radio")||y&&w==="radio",A=y&&w==="file";E&&(e.getAttribute("name")?.length||e.setAttribute("name",u));let m=()=>{let h="value"in e,p=i.value(u),f=`${p}`;if(v||E){let T=e;Array.isArray(p)?T.checked=p.includes(T.value):typeof p=="boolean"?T.checked=!!p:T.checked=f===T.value}else if(b){let T=e;if(T.multiple)for(let _ of T.options){if(_?.disabled)return;Array.isArray(p)||typeof p=="string"?_.selected=p.includes(_.value):typeof p=="number"?_.selected=p===Number(_.value):_.selected=p}else T.value=f}else A||(h?e.value=f:e.setAttribute("value",f))},o=async()=>{if(A){let T=[...e?.files||[]],_=[],R=[],L=[];await Promise.all(T.map(H=>new Promise(I=>{let W=new FileReader;W.onload=()=>{if(typeof W.result!="string")throw N("InvalidFileResultType",t,{resultType:typeof W.result});let K=W.result.match(Nn);if(!K?.groups)throw N("InvalidDataUri",t,{result:W.result});_.push(K.groups.contents),R.push(K.groups.mime),L.push(H.name)},W.onloadend=()=>I(void 0),W.readAsDataURL(H)}))),i.setValue(u,_),i.setValue(`${u}Mimes`,R),i.setValue(`${u}Names`,L);return}let h=i.value(u),p=e||e,f=p.value||p.getAttribute("value")||"";if(v){let T=p.checked||p.getAttribute("checked")==="true";if(Array.isArray(h)){let _=new Set(h);T?_.add(p.value):_.delete(p.value),i.setValue(u,[..._])}else if(p.getAttribute("value")){let R=T?f:!1;i.setValue(u,R)}else i.setValue(u,T);return}if(typeof h=="number")i.setValue(u,Number(f));else if(typeof h=="string")i.setValue(u,f||"");else if(typeof h=="boolean")i.setValue(u,!!f);else if(Array.isArray(h))if(b){let R=[...e.selectedOptions].filter(L=>L.selected).map(L=>L.value);i.setValue(u,R)}else i.setValue(u,JSON.stringify(f.split(",")));else if(!(typeof h>"u"))throw N("BindUnsupportedSignalType",t,{signalType:typeof h})},{inserted:c}=i.upsertIfMissing(u,S);c&&o();for(let h of rn)e.addEventListener(h,o);let a=l(()=>m()),d=h=>{h.persisted&&o()};return window.addEventListener("pageshow",d),()=>{a();for(let h of rn)e.removeEventListener(h,o);window.removeEventListener("pageshow",d)}}};var on={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let s=t.classList,l=i();return r(()=>{if(e===""){let u=l();for(let[g,S]of Object.entries(u)){let y=g.split(/\s+/);S?s.add(...y):s.remove(...y)}}else e=V(e,n),l()?s.add(e):s.remove(e)})}};function ge(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function se(t,e,n=!1){return t?t.has(e.toLowerCase()):n}function an(t,e,n=!1,r=!0){let i=-1,s=()=>i&&clearTimeout(i);return(...l)=>{s(),n&&!i&&t(...l),i=setTimeout(()=>{r&&t(...l),s()},e)}}function ln(t,e,n=!0,r=!1){let i=!1;return(...s)=>{i||(n&&t(...s),i=!0,setTimeout(()=>{i=!1,r&&t(...s)},e))}}var Pn="evt",qe="signalsChange",Cn=qe.length,un={type:1,name:"on",keyReq:1,valReq:1,argNames:[Pn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,key:e,mods:n,rawKey:r,signals:i,value:s,effect:l,genRX:u})=>{let g=u(),S=t;n.has("window")&&(S=window);let y=m=>{m&&((n.has("prevent")||e==="submit")&&m.preventDefault(),n.has("stop")&&m.stopPropagation()),g(m)},w=n.get("delay");if(w){let m=ge(w);setTimeout(()=>{y()},m)}let v=n.get("debounce");if(v){let m=ge(v),o=se(v,"leading",!1),c=!se(v,"notrail",!1);y=an(y,m,o,c)}let x=n.get("throttle");if(x){let m=ge(x),o=!se(x,"noleading",!1),c=se(x,"trail",!1);y=ln(y,m,o,c)}if(n.has("viewtransition")&&X){let m=y;y=(...o)=>document.startViewTransition(()=>m(...o))}let b={capture:!0,passive:!1,once:!1};if(n.has("capture")||(b.capture=!1),n.has("passive")&&(b.passive=!0),n.has("once")&&(b.once=!0),e==="load")return setTimeout(()=>y(),0),()=>{};if(e==="interval"){let m=1e3,o=n.get("duration");o&&(m=ge(o),se(o,"leading",!1)&&(t.dataset[r.replace(".leading","")]=s,delete t.dataset[r],y()));let c=setInterval(y,m);return()=>{clearInterval(c)}}if(e==="raf"){let m,o=()=>{y(),m=requestAnimationFrame(o)};return m=requestAnimationFrame(o),()=>{m&&cancelAnimationFrame(m)}}if(e.startsWith(qe)){if(e===qe){y();let c=a=>y(a);return document.addEventListener(ae,c),()=>{document.removeEventListener(ae,c)}}let m=V(j(e.slice(Cn)),n),o=new Map;return i.walk((c,a)=>{c.startsWith(m)&&o.set(a,a.value)}),l(()=>{for(let[c,a]of o)a!==c.value&&(y(),o.set(c,c.value))})}if(n.has("outside")){S=document;let m=y;y=c=>{let a=c?.target;t.contains(a)||m(c)}}let A=V(e,n);return S.addEventListener(A,y,b),()=>{S.removeEventListener(A,y)}}};var cn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let s=e?V(e,n):z(i);r.setValue(s,t)}};var fn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||N("TextInvalidElement",t),n(()=>{let s=i(t);e.textContent=`${s}`})}};var{round:Ln,max:In,min:Vn}=Math,dn={type:3,name:"fit",fn:(t,e,n,r,i,s,l=!1,u=!1)=>{let g=(e-n)/(r-n)*(s-i)+i;return u&&(g=Ln(g)),l&&(g=In(i,Vn(s,g))),g}};var pn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var mn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};Oe.load(nn,sn,on,un,cn,Zt,fn,At,yt,St,Tt,bt,vt,Rt,wt,Mt,Nt,Et,Pt,Ct,Dt,Ot,Ft,Xt,tn,dn,pn,mn);var Zs=Oe;export{Zs as Datastar};
//# sourceMappingURL=datastar.js.map
