// Datastar v1.0.0-beta.3
var it=/ðŸ–•JS_DSðŸš€/.source,ye=it.slice(0,5),je=it.slice(4),$="datastar";var st="Datastar-Request",Pe=300,ot=1e3,at="type module",xe=!1,lt=!1,ut=!0,Y={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},ct=Y.Morph,U={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var _=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(_||{});var be=`${$}-signals`;var Dn="computed",ft={type:1,name:Dn,keyReq:1,valReq:1,onLoad:({key:t,signals:e,genRX:n})=>{let r=n();e.setComputed(t,r)}};var ne=t=>t.trim()==="true",Ke=t=>t[0].toLowerCase()+t.slice(1),te=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),Me=t=>te(t).replace(/-./g,e=>e[1].toUpperCase()),Ne=t=>new Function(`return Object.assign({}, ${t})`)(),re=t=>t.startsWith("$")?t.slice(1):t;var dt={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,value:n,genRX:r,signals:i,mods:l}=t,u=l.has("ifmissing");if(e!==""&&!u){let c=n===""?n:r()();i.setValue(e,c)}else{let c=Ne(t.value);t.value=JSON.stringify(c);let g=r()();i.merge(g,u)}}};var pt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var Se=class{#e=0;#n;constructor(e=$){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e;return this}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function mt(t){if(t.id)return t.id;let e=new Se,n=t;for(;n.parentNode;){if(n.id){e.with(n.id);break}if(n===n.ownerDocument.documentElement)e.with(n.tagName);else for(let r=1,i=t;i.previousElementSibling;i=i.previousElementSibling,r++)e.with(r);n=n.parentNode}return e.value}function gt(t,e){let n=new MutationObserver(r=>{for(let i of r)for(let l of i.removedNodes)if(l===t){n.disconnect(),e();return}});n.observe(t.parentNode,{childList:!0})}function ht(t,e){return(...n)=>{setTimeout(()=>{t(...n)},e)}}function Ce(t,e,n=!1,r=!0){let i=-1,l=()=>i&&clearTimeout(i);return(...u)=>{l(),n&&!i&&t(...u),i=setTimeout(()=>{r&&t(...u),l()},e)}}function vt(t,e,n=!0,r=!1){let i=!1;return(...l)=>{i||(n&&t(...l),i=!0,setTimeout(()=>{i=!1,r&&t(...l)},e))}}var Vn="https://data-star.dev/errors";function Je(t,e,n={}){let r=new Error;e=e[0].toUpperCase()+e.slice(1),r.name=`${$} ${t} error`;let i=te(e).replaceAll("-","_"),l=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),u=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${Vn}/${t}/${i}?${l}
Context: ${u}`,r}function z(t,e,n={}){return Je("internal",e,Object.assign({from:t},n))}function j(t,e,n={}){let r={plugin:{name:e.plugin.name,type:_[e.plugin.type]}};return Je("init",t,Object.assign(r,n))}function P(t,e,n={}){let r={plugin:{name:e.plugin.name,type:_[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Je("runtime",t,Object.assign(r,n))}var oe="preact-signals",On=Symbol.for("preact-signals"),X=1,ce=2,Te=4,de=8,Ie=16,fe=32;function Ye(){Le++}function Xe(){if(Le>1){Le--;return}let t,e=!1;for(;Ee!==void 0;){let n=Ee;for(Ee=void 0,ze++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~ce,!(n._flags&de)&&bt(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(ze=0,Le--,e)throw z(oe,"BatchError, error",{error:t})}var M;var Ee,Le=0,ze=0,ke=0;function yt(t){if(M===void 0)return;let e=t._node;if(e===void 0||e._target!==M)return e={_version:0,_source:t,_prevSource:M._sources,_nextSource:void 0,_target:M,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},M._sources!==void 0&&(M._sources._nextSource=e),M._sources=e,t._node=e,M._flags&fe&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=M._sources,e._nextSource=void 0,M._sources._nextSource=e,M._sources=e),e}function C(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}C.prototype.brand=On;C.prototype._refresh=()=>!0;C.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};C.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};C.prototype.subscribe=function(t){return De(()=>{let e=this.value,n=M;M=void 0;try{t(e)}finally{M=n}})};C.prototype.valueOf=function(){return this.value};C.prototype.toString=function(){return`${this.value}`};C.prototype.toJSON=function(){return this.value};C.prototype.peek=function(){let t=M;M=void 0;try{return this.value}finally{M=t}};Object.defineProperty(C.prototype,"value",{get(){let t=yt(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(ze>100)throw z(oe,"SignalCycleDetected");this._value=t,this._version++,ke++,Ye();try{for(let e=this._targets;e!==void 0;e=e._nextTarget)e._target._notify()}finally{Xe()}}}});function bt(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function St(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function Et(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function ae(t){C.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=ke-1,this._flags=Te}ae.prototype=new C;ae.prototype._refresh=function(){if(this._flags&=~ce,this._flags&X)return!1;if((this._flags&(Te|fe))===fe||(this._flags&=~Te,this._globalVersion===ke))return!0;if(this._globalVersion=ke,this._flags|=X,this._version>0&&!bt(this))return this._flags&=~X,!0;let t=M;try{St(this),M=this;let e=this._fn();(this._flags&Ie||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~Ie,this._version++)}catch(e){this._value=e,this._flags|=Ie,this._version++}return M=t,Et(this),this._flags&=~X,!0};ae.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=Te|fe;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}C.prototype._subscribe.call(this,t)};ae.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(C.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~fe;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};ae.prototype._notify=function(){if(!(this._flags&ce)){this._flags|=Te|ce;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(ae.prototype,"value",{get(){if(this._flags&X)throw z(oe,"SignalCycleDetected");let t=yt(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&Ie)throw z(oe,"GetComputedError",{value:this._value});return this._value}});function Tt(t){return new ae(t)}function At(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){Ye();let n=M;M=void 0;try{e()}catch(r){throw t._flags&=~X,t._flags|=de,Qe(t),z(oe,"CleanupEffectError",{error:r})}finally{M=n,Xe()}}}function Qe(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,At(t)}function Fn(t){if(M!==this)throw z(oe,"EndEffectError");Et(this),M=t,this._flags&=~X,this._flags&de&&Qe(this),Xe()}function Ae(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=fe}Ae.prototype._callback=function(){let t=this._start();try{if(this._flags&de||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};Ae.prototype._start=function(){if(this._flags&X)throw z(oe,"SignalCycleDetected");this._flags|=X,this._flags&=~de,At(this),St(this),Ye();let t=M;return M=this,Fn.bind(this,t)};Ae.prototype._notify=function(){this._flags&ce||(this._flags|=ce,this._nextBatchedEffect=Ee,Ee=this)};Ae.prototype._dispose=function(){this._flags|=de,this._flags&X||Qe(this)};function De(t){let e=new Ae(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var _t="namespacedSignals",Ve=t=>{document.dispatchEvent(new CustomEvent(be,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function wt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof C?n[r]=i.value:n[r]=wt(i)}return n}function Rt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw z(_t,"InvalidSignalKey",{key:i});let l=e[i];if(l instanceof Object&&!Array.isArray(l)){t[i]||(t[i]={});let u=Rt(t[i],l,n);r.added.push(...u.added.map(c=>`${i}.${c}`)),r.removed.push(...u.removed.map(c=>`${i}.${c}`)),r.updated.push(...u.updated.map(c=>`${i}.${c}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let c=t[i];if(c instanceof C){let d=c.value;c.value=l,d!==l&&r.updated.push(i);continue}}t[i]=new C(l),r.added.push(i)}}return r}function Pt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof C?e(n,r):Pt(r,(i,l)=>{e(`${n}.${i}`,l)})}}function Hn(t,...e){let n={};for(let r of e){let i=r.split("."),l=t,u=n;for(let d=0;d<i.length-1;d++){let g=i[d];if(!l[g])return{};u[g]||(u[g]={}),l=l[g],u=u[g]}let c=i[i.length-1];u[c]=l[c]}return n}var Oe=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let u=0;u<n.length-1;u++){let c=n[u];if(!r[c])return null;r=r[c]}let i=n[n.length-1],l=r[i];if(!l)throw z(_t,"SignalNotFound",{path:e});return l}setSignal(e,n){let r=e.split("."),i=this.#e;for(let u=0;u<r.length-1;u++){let c=r[u];i[c]||(i[c]={}),i=i[c]}let l=r[r.length-1];i[l]=n}setComputed(e,n){let r=Tt(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let r=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&Ve({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let d=0;d<r.length-1;d++){let g=r[d];i[g]||(i[g]={}),i=i[g]}let l=r[r.length-1],u=i[l];if(u instanceof C)return u;let c=new C(n);return i[l]=c,Ve({added:[e]}),c}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),l=this.#e;for(let c=0;c<i.length-1;c++){let d=i[c];if(!l[d])return;l=l[d]}let u=i[i.length-1];delete l[u],n.push(r)}Ve({removed:n})}merge(e,n=!1){let r=Rt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&Ve(r)}subset(...e){return Hn(this.values(),...e)}walk(e){Pt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return wt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var xt=(t,e)=>`${t}${ye}${e}`,Fe=class{constructor(){this.aliasPrefix="";this.#e=new Oe;this.#n=[];this.#r={};this.#a=[];this.#t=new Map;this.#l=Ce(()=>{this.#s(document.body)},1);let e="data-";new MutationObserver(r=>{for(let{target:i,type:l,attributeName:u,oldValue:c,addedNodes:d,removedNodes:g}of r)switch(l){case"childList":{for(let h of g){let b=h,S=this.#t.get(b);if(S){for(let[E,v]of S)v();this.#t.delete(b)}}for(let h of d){let b=h;this.#s(b)}}break;case"attributes":{{let h=e+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!u?.startsWith(h))break;let b=i,S=Me(u.slice(e.length));if(c!==null&&b.dataset[S]!==c){let E=this.#t.get(b);if(E){let v=xt(S,c),y=E.get(v);y&&(y(),E.delete(v))}}S in b.dataset&&this.#i(b,S)}break}}}).observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0})}#e;#n;#r;#a;#t;get signals(){return this.#e}load(...e){for(let n of e){let r=this,i={get signals(){return r.#e},effect:u=>De(u),actions:this.#r,plugin:n,applyAttributePlugin:r.#i.bind(r)},l;switch(n.type){case 2:{let u=n;this.#a.push(u),l=u.onGlobalInit;break}case 3:{this.#r[n.name]=n;break}case 1:{let u=n;this.#n.push(u),l=u.onGlobalInit;break}default:throw j("InvalidPluginType",i)}l&&l(i)}this.#n.sort((n,r)=>{let i=r.name.length-n.name.length;return i!==0?i:n.name.localeCompare(r.name)}),this.#l()}#l;#s(e){this.#o(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#i(e,n){let r=Ke(n.slice(this.aliasPrefix.length)),i=this.#n.find(w=>r.startsWith(w.name));if(!i)return;e.id.length||(e.id=mt(e));let[l,...u]=r.slice(i.name.length).split(/\_\_+/),c=l.length>0;c&&(l=l.startsWith("-")?l.slice(1):Ke(l));let d=e.dataset[Me(n)]||"",g=this,h={get signals(){return g.#e},applyAttributePlugin:g.#i.bind(g),effect:w=>De(w),actions:this.#r,genRX:()=>this.#u(h,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:l,value:d,mods:new Map},b=i.keyReq||0;if(c){if(b===2)throw P(`${i.name}KeyNotAllowed`,h)}else if(b===1)throw P(`${i.name}KeyRequired`,h);let S=i.valReq||0,E=d.length>0;if(E){if(S===2)throw P(`${i.name}ValueNotAllowed`,h)}else if(S===1)throw P(`${i.name}ValueRequired`,h);if(b===3||S===3){if(c&&E)throw P(`${i.name}KeyAndValueProvided`,h);if(!c&&!E)throw P(`${i.name}KeyOrValueRequired`,h)}for(let w of u){let[I,...L]=w.split(".");h.mods.set(Me(I),new Set(L.map(H=>H.toLowerCase())))}let v=i.onLoad(h);if(v){let w=this.#t.get(e);w||(w=new Map,this.#t.set(e,w)),w.set(xt(n,d),v)}let y=i.removeOnLoad;y&&y(r)===!0&&delete e.dataset[n]}#u(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,l=e.value.trim().match(i);if(l){let v=l.length-1,y=l[v].trim();y.startsWith("return")||(l[v]=`return (${y});`),r=l.join(`;
`)}let u=new Map,c=new RegExp(`(?:${ye})(.*?)(?:${je})`,"gm");for(let v of r.matchAll(c)){let y=v[1],w=new Se("dsEscaped").with(y).value;u.set(w,y),r=r.replace(ye+y+je,w)}let d=/@(\w*)\(/gm,g=r.matchAll(d),h=new Set;for(let v of g)h.add(v[1]);let b=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(b,"ctx.actions.$1.fn(ctx,");let S=e.signals.paths();if(S.length){let v=new RegExp(`\\$(${S.join("|")})(\\W|$)`,"gm");r=r.replaceAll(v,"ctx.signals.signal('$1').value$2")}for(let[v,y]of u)r=r.replace(v,y);let E=`return (()=> {
${r}
})()`;e.fnContent=E;try{let v=new Function("ctx",...n,E);return(...y)=>{try{return v(e,...y)}catch(w){throw P("ExecuteExpression",e,{error:w.message})}}}catch(v){throw P("GenerateExpression",e,{error:v.message})}}#o(e,n){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;let r=e.dataset;if("starIgnore"in r)return null;"starIgnore__self"in r||n(e);let i=e.firstElementChild;for(;i;)this.#o(i,n),i=i.nextElementSibling}};var Mt=new Fe;Mt.load(pt,dt,ft);var Ze=Mt;async function Wn(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function qn(t){let e,n,r,i=!1;return function(u){e===void 0?(e=u,n=0,r=-1):e=Un(e,u);let c=e.length,d=0;for(;n<c;){i&&(e[n]===10&&(d=++n),i=!1);let g=-1;for(;n<c&&g===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-d);break;case 13:i=!0;case 10:g=n;break}if(g===-1)break;t(e.subarray(d,g),r),d=n,r=-1}d===c?e=void 0:d!==0&&(e=e.subarray(d),n-=d)}}function $n(t,e,n){let r=Nt(),i=new TextDecoder;return function(u,c){if(u.length===0)n?.(r),r=Nt();else if(c>0){let d=i.decode(u.subarray(0,c)),g=c+(u[c+1]===32?2:1),h=i.decode(u.subarray(g));switch(d){case"data":r.data=r.data?`${r.data}
${h}`:h;break;case"event":r.event=h;break;case"id":t(r.id=h);break;case"retry":{let b=Number.parseInt(h,10);Number.isNaN(b)||e(r.retry=b);break}}}}}function Un(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Nt(){return{data:"",event:"",id:"",retry:void 0}}var Gn="text/event-stream",Ct="last-event-id";function It(t,e,{signal:n,headers:r,onopen:i,onmessage:l,onclose:u,onerror:c,openWhenHidden:d,fetch:g,retryInterval:h=1e3,retryScaler:b=2,retryMaxWaitMs:S=3e4,retryMaxCount:E=10,...v}){return new Promise((y,w)=>{let I=0,L={...r};L.accept||(L.accept=Gn);let H;function N(){H.abort(),document.hidden||V()}d||document.addEventListener("visibilitychange",N);let x=0;function R(){document.removeEventListener("visibilitychange",N),window.clearTimeout(x),H.abort()}n?.addEventListener("abort",()=>{R(),y()});let D=g??window.fetch,T=i??function(){};async function V(){H=new AbortController;try{let O=await D(e,{...v,headers:L,signal:H.signal});await T(O),await Wn(O.body,qn($n(F=>{F?L[Ct]=F:delete L[Ct]},F=>{h=F},l))),u?.(),R(),y()}catch(O){if(!H.signal.aborted)try{let F=c?.(O)??h;window.clearTimeout(x),x=window.setTimeout(V,F),h*=b,h=Math.min(h,S),I++,I>=E?(R(),w(P("SseMaxRetries",t,{retryMaxCount:E}))):console.error(`Datastar failed to reach ${v.method}: ${e.toString()} retry in ${F}ms`)}catch(F){R(),w(F)}}}V()})}var pe=`${$}-sse`,et=`${$}-settling`,le=`${$}-swapping`,He="started",We="finished",Lt="error";function Q(t,e){document.addEventListener(pe,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function qe(t,e){document.dispatchEvent(new CustomEvent(pe,{detail:{type:t,argsRaw:e}}))}var kt=t=>`${t}`.includes("text/event-stream"),Z=async(t,e,n,r)=>{let{el:{id:i},el:l,signals:u}=t,{headers:c,contentType:d,includeLocal:g,selector:h,openWhenHidden:b,retryInterval:S,retryScaler:E,retryMaxWaitMs:v,retryMaxCount:y,abort:w}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:ot,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),I=e.toLowerCase(),L=()=>{};try{if(qe(He,{elId:i}),!n?.length)throw P("SseNoUrlProvided",t,{action:I});let H={};H[st]=!0,d==="json"&&(H["Content-Type"]="application/json");let N=Object.assign({},H,c),x={method:e,headers:N,openWhenHidden:b,retryInterval:S,retryScaler:E,retryMaxWaitMs:v,retryMaxCount:y,signal:w,onopen:async T=>{if(T.status>=400){let V=T.status.toString();qe(Lt,{status:V})}},onmessage:T=>{if(!T.event.startsWith($))return;let V=T.event,O={},F=T.data.split(`
`);for(let K of F){let ie=K.indexOf(" "),Re=K.slice(0,ie),ue=O[Re];ue||(ue=[],O[Re]=ue);let ee=K.slice(ie+1).trim();ue.push(ee)}let q={};for(let[K,ie]of Object.entries(O))q[K]=ie.join(`
`);qe(V,q)},onerror:T=>{if(kt(T))throw P("InvalidContentType",t,{url:n});T&&console.error(T.message)}},R=new URL(n,window.location.origin),D=new URLSearchParams(R.search);if(d==="json"){let T=u.JSON(!1,!g);e==="GET"?D.set($,T):x.body=T}else if(d==="form"){let T=h?document.querySelector(h):l.closest("form");if(T===null)throw h?P("SseFormNotFound",t,{action:I,selector:h}):P("SseClosestFormNotFound",t,{action:I});if(l!==T){let O=F=>F.preventDefault();T.addEventListener("submit",O),L=()=>T.removeEventListener("submit",O)}if(!T.checkValidity()){T.reportValidity(),L();return}let V=new FormData(T);if(e==="GET"){let O=new URLSearchParams(V);for(let[F,q]of O)D.set(F,q)}else x.body=V}else throw P("SseInvalidContentType",t,{action:I,contentType:d});R.search=D.toString();try{await It(t,R.toString(),x)}catch(T){if(!kt(T))throw P("SseFetchFailed",t,{method:e,url:n,error:T})}}finally{qe(We,{elId:i}),L()}};var Dt={type:3,name:"delete",fn:async(t,e,n)=>Z(t,"DELETE",e,{...n})};var Vt={type:3,name:"get",fn:async(t,e,n)=>Z(t,"GET",e,{...n})};var Ot={type:3,name:"patch",fn:async(t,e,n)=>Z(t,"PATCH",e,{...n})};var Ft={type:3,name:"post",fn:async(t,e,n)=>Z(t,"POST",e,{...n})};var Ht={type:3,name:"put",fn:async(t,e,n)=>Z(t,"PUT",e,{...n})};var Wt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({value:t,signals:e,el:n,key:r})=>{let i=r||re(t),l=e.upsertIfMissing(i,!1),u=c=>{let{type:d,argsRaw:{elId:g}}=c.detail;if(g===n.id)switch(d){case He:l.value=!0;break;case We:l.value=!1;break}};return document.addEventListener(pe,u),()=>{document.removeEventListener(pe,u)}}};var qt={type:2,name:U.ExecuteScript,onGlobalInit:async t=>{Q(U.ExecuteScript,({autoRemove:e=`${ut}`,attributes:n=at,script:r})=>{let i=ne(e);if(!r?.length)throw j("NoScriptProvided",t);let l=document.createElement("script");for(let u of n.split(`
`)){let c=u.indexOf(" "),d=c?u.slice(0,c):u,g=c?u.slice(c):"";l.setAttribute(d.trim(),g.trim())}l.text=r,document.head.appendChild(l),i&&l.remove()})}};var _e=document,me=!!_e.startViewTransition;var $t=function(){"use strict";let t=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E,beforeNodePantried:E},head:{style:"merge",shouldPreserve:function(s){return s.getAttribute("im-preserve")==="true"},shouldReAppend:function(s){return s.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function n(s,o,a={}){s instanceof Document&&(s=s.documentElement),typeof o=="string"&&(o=D(o));let f=T(o),p=y(s,f,a);return r(s,f,p)}function r(s,o,a){if(a.head.block){let f=s.querySelector("head"),p=o.querySelector("head");if(f&&p){let m=b(p,f,a);Promise.all(m).then(function(){r(s,o,Object.assign(a,{head:{block:!1,ignore:!0}}))});return}}if(a.morphStyle==="innerHTML")return u(o,s,a),a.config.twoPass&&ie(s,a),Array.from(s.children);if(a.morphStyle==="outerHTML"||a.morphStyle==null){let f=O(o,s,a),p=f?.previousSibling??null,m=f?.nextSibling??null,A=l(s,f,a);if(f){if(A){let W=V(p,A,m);return a.config.twoPass&&ie(A.parentNode,a),W}}else return[]}else throw"Do not understand how to morph style "+a.morphStyle}function i(s,o){return!!o.ignoreActiveValue&&s===document.activeElement&&s!==document.body}function l(s,o,a){return a.ignoreActive&&s===document.activeElement?null:o==null?a.callbacks.beforeNodeRemoved(s)===!1?s:(s.parentNode?.removeChild(s),a.callbacks.afterNodeRemoved(s),null):L(s,o)?(a.callbacks.beforeNodeMorphed(s,o)===!1||(s instanceof HTMLHeadElement&&a.head.ignore||(s instanceof HTMLHeadElement&&a.head.style!=="morph"?b(o,s,a):(d(o,s,a),i(s,a)||u(o,s,a))),a.callbacks.afterNodeMorphed(s,o)),s):a.callbacks.beforeNodeRemoved(s)===!1||a.callbacks.beforeNodeAdded(o)===!1?s:(s.parentNode?.replaceChild(o,s),a.callbacks.afterNodeAdded(o),a.callbacks.afterNodeRemoved(s),o)}function u(s,o,a){s instanceof HTMLTemplateElement&&o instanceof HTMLTemplateElement&&(s=s.content,o=o.content);let f=s.firstChild,p=o.firstChild,m;for(;f;){if(m=f,f=m.nextSibling,p==null){if(a.config.twoPass&&a.persistentIds.has(m.id))o.appendChild(m);else{if(a.callbacks.beforeNodeAdded(m)===!1)continue;o.appendChild(m),a.callbacks.afterNodeAdded(m)}ee(a,m);continue}if(I(m,p,a)){l(p,m,a),p=p.nextSibling,ee(a,m);continue}let A=N(s,o,m,p,a);if(A){p=H(p,A,a),l(A,m,a),ee(a,m);continue}let W=x(s,o,m,p,a);if(W){p=H(p,W,a),l(W,m,a),ee(a,m);continue}if(a.config.twoPass&&a.persistentIds.has(m.id))o.insertBefore(m,p);else{if(a.callbacks.beforeNodeAdded(m)===!1)continue;o.insertBefore(m,p),a.callbacks.afterNodeAdded(m)}ee(a,m)}for(;p!==null;){let A=p;p=p.nextSibling,q(A,a)}}function c(s,o,a,f){return s==="value"&&f.ignoreActiveValue&&o===document.activeElement?!0:f.callbacks.beforeAttributeUpdated(s,o,a)===!1}function d(s,o,a){let f=s.nodeType;if(f===1){let p=s,m=o,A=p.attributes,W=m.attributes;for(let B of A)c(B.name,m,"update",a)||m.getAttribute(B.name)!==B.value&&m.setAttribute(B.name,B.value);for(let B=W.length-1;0<=B;B--){let se=W[B];if(se&&!p.hasAttribute(se.name)){if(c(se.name,m,"remove",a))continue;m.removeAttribute(se.name)}}}(f===8||f===3)&&o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue),i(o,a)||h(s,o,a)}function g(s,o,a,f){if(!(s instanceof Element&&o instanceof Element))return;let p=s[a],m=o[a];if(p!==m){let A=c(a,o,"update",f);A||(o[a]=s[a]),p?A||o.setAttribute(a,p):c(a,o,"remove",f)||o.removeAttribute(a)}}function h(s,o,a){if(s instanceof HTMLInputElement&&o instanceof HTMLInputElement&&s.type!=="file"){let f=s.value,p=o.value;g(s,o,"checked",a),g(s,o,"disabled",a),s.hasAttribute("value")?f!==p&&(c("value",o,"update",a)||(o.setAttribute("value",f),o.value=f)):c("value",o,"remove",a)||(o.value="",o.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&o instanceof HTMLOptionElement)g(s,o,"selected",a);else if(s instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement){let f=s.value,p=o.value;if(c("value",o,"update",a))return;f!==p&&(o.value=f),o.firstChild&&o.firstChild.nodeValue!==f&&(o.firstChild.nodeValue=f)}}function b(s,o,a){let f=[],p=[],m=[],A=[],W=a.head.style,B=new Map;for(let k of s.children)B.set(k.outerHTML,k);for(let k of o.children){let J=B.has(k.outerHTML),ve=a.head.shouldReAppend(k),Be=a.head.shouldPreserve(k);J||Be?ve?p.push(k):(B.delete(k.outerHTML),m.push(k)):W==="append"?ve&&(p.push(k),A.push(k)):a.head.shouldRemove(k)!==!1&&p.push(k)}A.push(...B.values()),S("to append: ",A);let se=[];for(let k of A){S("adding: ",k);let J=document.createRange().createContextualFragment(k.outerHTML).firstChild;if(S(J),a.callbacks.beforeNodeAdded(J)!==!1){if("href"in J&&J.href||"src"in J&&J.src){let ve,Be=new Promise(function(kn){ve=kn});J.addEventListener("load",function(){ve()}),se.push(Be)}o.appendChild(J),a.callbacks.afterNodeAdded(J),f.push(J)}}for(let k of p)a.callbacks.beforeNodeRemoved(k)!==!1&&(o.removeChild(k),a.callbacks.afterNodeRemoved(k));return a.head.afterHeadMorphed(o,{added:f,kept:m,removed:p}),se}function S(...s){}function E(){}function v(s){let o=Object.assign({},e);return Object.assign(o,s),o.callbacks=Object.assign({},e.callbacks,s.callbacks),o.head=Object.assign({},e.head,s.head),o}function y(s,o,a){let f=v(a);return{target:s,newContent:o,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:In(s,o),deadIds:new Set,persistentIds:f.twoPass?Ln(s,o):new Set,pantry:f.twoPass?w():document.createElement("div"),callbacks:f.callbacks,head:f.head}}function w(){let s=document.createElement("div");return s.hidden=!0,document.body.insertAdjacentElement("afterend",s),s}function I(s,o,a){return s==null||o==null?!1:s instanceof Element&&o instanceof Element&&s.tagName===o.tagName?s.id!==""&&s.id===o.id?!0:he(a,s,o)>0:!1}function L(s,o){return s==null||o==null||s.id&&s.id!==o.id?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName}function H(s,o,a){let f=s;for(;f!==o;){let p=f;f=p.nextSibling,q(p,a)}return ee(a,o),o.nextSibling}function N(s,o,a,f,p){let m=he(p,a,o),A=null;if(m>0){A=f;let W=0;for(;A!=null;){if(I(a,A,p))return A;if(W+=he(p,A,s),W>m)return null;A=A.nextSibling}}return A}function x(s,o,a,f,p){let m=f,A=a.nextSibling,W=0;for(;m!=null;){if(he(p,m,s)>0)return null;if(L(m,a))return m;if(L(m,A)&&(W++,A=A.nextSibling,W>=2))return null;m=m.nextSibling}return m}let R=new WeakSet;function D(s){let o=new DOMParser,a=s.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(a.match(/<\/html>/)||a.match(/<\/head>/)||a.match(/<\/body>/)){let f=o.parseFromString(s,"text/html");if(a.match(/<\/html>/))return R.add(f),f;{let p=f.firstChild;return p?(R.add(p),p):null}}else{let p=o.parseFromString("<body><template>"+s+"</template></body>","text/html").body.querySelector("template").content;return R.add(p),p}}function T(s){if(s==null)return document.createElement("div");if(R.has(s))return s;if(s instanceof Node){let o=document.createElement("div");return o.append(s),o}else{let o=document.createElement("div");for(let a of[...s])o.append(a);return o}}function V(s,o,a){let f=[],p=[];for(;s!=null;)f.push(s),s=s.previousSibling;let m=f.pop();for(;m!==void 0;)p.push(m),o.parentElement?.insertBefore(m,o),m=f.pop();for(p.push(o);a!=null;)f.push(a),p.push(a),a=a.nextSibling;for(;f.length>0;){let A=f.pop();o.parentElement?.insertBefore(A,o.nextSibling)}return p}function O(s,o,a){let f;f=s.firstChild;let p=f,m=0;for(;f;){let A=F(f,o,a);A>m&&(p=f,m=A),f=f.nextSibling}return p}function F(s,o,a){return L(o,s)?.5+he(a,s,o):0}function q(s,o){if(ee(o,s),o.config.twoPass&&Cn(o,s)&&s instanceof Element)K(s,o);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function K(s,o){if(o.callbacks.beforeNodePantried(s)!==!1)if(Array.from(s.childNodes).forEach(a=>{K(a,o)}),o.persistentIds.has(s.id))o.pantry.moveBefore?o.pantry.moveBefore(s,null):o.pantry.insertBefore(s,null);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function ie(s,o){s instanceof Element&&(Array.from(o.pantry.children).reverse().forEach(a=>{let f=s.querySelector(`#${a.id}`);if(f){if(f.parentElement?.moveBefore)for(f.parentElement.moveBefore(a,f);f.hasChildNodes();)a.moveBefore(f.firstChild,null);else for(f.before(a);f.firstChild;)a.insertBefore(f.firstChild,null);o.callbacks.beforeNodeMorphed(a,f)!==!1&&(d(f,a,o),o.callbacks.afterNodeMorphed(a,f)),f.remove()}}),o.pantry.remove())}function Re(s,o){return!s.deadIds.has(o)}function ue(s,o,a){return(s.idMap.get(a)||t).has(o)}function ee(s,o){let a=s.idMap.get(o)||t;for(let f of a)s.deadIds.add(f)}function Cn(s,o){for(let a of s.idMap.get(o)||t)if(s.persistentIds.has(a))return!0;return!1}function he(s,o,a){let f=s.idMap.get(o)||t,p=0;for(let m of f)Re(s,m)&&ue(s,m,a)&&++p;return p}function Ge(s){let o=Array.from(s.querySelectorAll("[id]"));return s.id&&o.push(s),o}function rt(s,o){let a=s.parentElement;for(let f of Ge(s)){let p=f;for(;p!==a&&p!=null;){let m=o.get(p);m==null&&(m=new Set,o.set(p,m)),m.add(f.id),p=p.parentElement}}}function In(s,o){let a=new Map;return rt(s,a),rt(o,a),a}function Ln(s,o){let a=m=>m.tagName+"#"+m.id,f=new Set(Ge(s).map(a)),p=new Set;for(let m of Ge(o))f.has(a(m))&&p.add(m.id);return p}return{morph:n,defaults:e}}();var Gt={type:2,name:U.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");Q(U.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=ct,settleDuration:l=`${Pe}`,useViewTransition:u=`${xe}`})=>{let c=Number.parseInt(l),d=ne(u);e.innerHTML=n.trim();let g=[...e.content.children];for(let h of g){if(!(h instanceof Element))throw j("NoFragmentsFound",t);let b=r||`#${h.getAttribute("id")}`,S=[...document.querySelectorAll(b)||[]];if(!S.length)throw j("NoTargetsFound",t,{selectorOrID:b});me&&d?_e.startViewTransition(()=>Ut(t,i,c,h,S)):Ut(t,i,c,h,S)}})}};function Ut(t,e,n,r,i){for(let l of i){l.classList.add(le);let u=l.outerHTML,c=l;switch(e){case Y.Morph:{let h=new Map,b=$t.morph(c,r,{callbacks:{beforeAttributeUpdated:(S,E,v)=>{if(v==="update"&&S.startsWith("data-")){let y=h.get(E);y||(y=[],h.set(E,y)),y.push(S.slice(5))}return!0}}});if(!b?.length)throw j("MorphFailed",t);c=b[0];for(let[S,E]of h.entries())for(let v of E)t.applyAttributePlugin(S,v);break}case Y.Inner:c.innerHTML=r.outerHTML;break;case Y.Outer:c.replaceWith(r);break;case Y.Prepend:c.prepend(r);break;case Y.Append:c.append(r);break;case Y.Before:c.before(r);break;case Y.After:c.after(r);break;case Y.UpsertAttributes:for(let h of r.getAttributeNames()){let b=r.getAttribute(h);c.setAttribute(h,b)}break;default:throw j("InvalidMergeMode",t,{mergeMode:e})}let d=c.classList;d.add(le),setTimeout(()=>{l.classList.remove(le),d.remove(le)},n);let g=c.outerHTML;u!==g&&(d.add(et),setTimeout(()=>{d.remove(et)},n))}}var Bt={type:2,name:U.MergeSignals,onGlobalInit:async t=>{Q(U.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${lt}`})=>{let{signals:r}=t,i=ne(n);r.merge(Ne(e),i)})}};var jt={type:2,name:U.RemoveFragments,onGlobalInit:async t=>{Q(U.RemoveFragments,({selector:e,settleDuration:n=`${Pe}`,useViewTransition:r=`${xe}`})=>{if(!e.length)throw j("NoSelectorProvided",t);let i=Number.parseInt(n),l=ne(r),u=document.querySelectorAll(e),c=()=>{for(let d of u)d.classList.add(le);setTimeout(()=>{for(let d of u)d.remove()},i)};me&&l?_e.startViewTransition(()=>c()):c()})}};var Kt={type:2,name:U.RemoveSignals,onGlobalInit:async t=>{Q(U.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw j("NoPathsProvided",t);t.signals.remove(...n)})}};var Jt={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw P("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var zt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw P("CustomValidityInvalidElement",t);let i=n();return r(()=>{let l=i();if(typeof l!="string")throw P("CustomValidityInvalidExpression",t,{result:l});e.setCustomValidity(l)})}};var Yt="once",Xt="half",Qt="full",Zt={type:1,name:"intersects",keyReq:2,mods:new Set([Yt,Xt,Qt]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(Qt)?i.threshold=1:n.has(Xt)&&(i.threshold=.5);let l=r(),u=new IntersectionObserver(c=>{for(let d of c)d.isIntersecting&&(l(),n.has(Yt)&&(u.disconnect(),delete t.dataset[e]))},i);return u.observe(t),()=>u.disconnect()}};var en="session",tn={type:1,name:"persist",mods:new Set([en]),onLoad:({key:t,value:e,signals:n,effect:r,mods:i})=>{t===""&&(t=$);let l=i.has(en)?sessionStorage:localStorage,u=e.split(/\s+/).filter(g=>g!=="");u=u.map(g=>re(g));let c=()=>{let g=l.getItem(t)||"{}",h=JSON.parse(g);n.merge(h)},d=()=>{let g;u.length?g=n.subset(...u):g=n.values(),l.setItem(t,JSON.stringify(g))};return c(),r(()=>{d()})}};var nn={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,l=new URL(r,i).toString();window.history.replaceState({},"",l)})}};var $e="smooth",tt="instant",nt="auto",rn="hstart",sn="hcenter",on="hend",an="hnearest",ln="vstart",un="vcenter",cn="vend",fn="vnearest",Bn="focus",Ue="center",dn="start",pn="end",mn="nearest",gn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([$e,tt,nt,rn,sn,on,an,ln,un,cn,fn,Bn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:$e,block:Ue,inline:Ue};if(n.has($e)&&(i.behavior=$e),n.has(tt)&&(i.behavior=tt),n.has(nt)&&(i.behavior=nt),n.has(rn)&&(i.inline=dn),n.has(sn)&&(i.inline=Ue),n.has(on)&&(i.inline=pn),n.has(an)&&(i.inline=mn),n.has(ln)&&(i.block=dn),n.has(un)&&(i.block=Ue),n.has(cn)&&(i.block=pn),n.has(fn)&&(i.block=mn),!(e instanceof HTMLElement||e instanceof SVGElement))throw P("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var hn="none",vn="display",yn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===hn&&t.removeProperty(vn):t.setProperty(vn,hn)})}};var bn="view-transition",Sn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===bn&&(t=!0);if(!t){let e=document.createElement("meta");e.name=bn,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!me){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let l=e.style;l.viewTransitionName=i})}};var En={type:1,name:"attr",valReq:1,onLoad:({el:t,genRX:e,key:n,effect:r})=>{let i=e();return n===""?r(async()=>{let l=i();for(let[u,c]of Object.entries(l))t.setAttribute(u,c)}):(n=te(n),r(async()=>{let l=!1;try{l=i()}catch{}let u;typeof l=="string"?u=l:u=JSON.stringify(l),!u||u==="false"||u==="null"||u==="undefined"?t.removeAttribute(n):t.setAttribute(n,u)}))}};var jn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,Tn=["change","input","keydown"],An={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,value:n,key:r,signals:i,effect:l}=t,u=r||re(n),c=()=>{},d=()=>{},g=e.tagName.toLowerCase(),h="",b=g.includes("input"),S=e.getAttribute("type"),E=g.includes("checkbox")||b&&S==="checkbox";E&&(h=!1),b&&S==="number"&&(h=0);let y=g.includes("select"),w=g.includes("radio")||b&&S==="radio",I=b&&S==="file";w&&(e.getAttribute("name")?.length||e.setAttribute("name",u)),i.upsertIfMissing(u,h),c=()=>{let N="value"in e,x=i.value(u),R=`${x}`;if(E||w){let D=e;E?D.checked=!!x||x==="true":w&&(D.checked=R===D.value)}else if(!I)if(y){let D=e;if(D.multiple)for(let T of D.options){if(T?.disabled)return;Array.isArray(x)||typeof x=="string"?T.selected=x.includes(T.value):typeof x=="number"?T.selected=x===Number(T.value):T.selected=x}else D.value=R}else N?e.value=R:e.setAttribute("value",R)},d=async()=>{if(I){let R=[...e?.files||[]],D=[],T=[],V=[];await Promise.all(R.map(O=>new Promise(F=>{let q=new FileReader;q.onload=()=>{if(typeof q.result!="string")throw P("InvalidFileResultType",t,{resultType:typeof q.result});let K=q.result.match(jn);if(!K?.groups)throw P("InvalidDataUri",t,{result:q.result});D.push(K.groups.contents),T.push(K.groups.mime),V.push(O.name)},q.onloadend=()=>F(void 0),q.readAsDataURL(O)}))),i.setValue(u,D),i.setValue(`${u}Mimes`,T),i.setValue(`${u}Names`,V);return}let N=i.value(u),x=e||e;if(typeof N=="number"){let R=Number(x.value||x.getAttribute("value"));i.setValue(u,R)}else if(typeof N=="string"){let R=x.value||x.getAttribute("value")||"";i.setValue(u,R)}else if(typeof N=="boolean")if(E){let R=x.checked||x.getAttribute("checked")==="true";i.setValue(u,R)}else{let R=!!(x.value||x.getAttribute("value"));i.setValue(u,R)}else if(!(typeof N>"u"))if(Array.isArray(N))if(y){let T=[...e.selectedOptions].filter(V=>V.selected).map(V=>V.value);i.setValue(u,T)}else{let R=JSON.stringify(x.value.split(","));i.setValue(u,R)}else throw P("BindUnsupportedSignalType",t,{signalType:typeof N})};for(let N of Tn)e.addEventListener(N,d);let L=l(()=>c()),H=N=>{N.persisted&&d()};return window.addEventListener("pageshow",H),()=>{L();for(let N of Tn)e.removeEventListener(N,d);window.removeEventListener("pageshow",H)}}};var _n={type:1,name:"class",valReq:1,onLoad:({key:t,el:e,genRX:n,effect:r})=>{let i=e.classList,l=n();return r(()=>{if(t===""){let u=l();for(let[c,d]of Object.entries(u)){let g=c.split(/\s+/);d?i.add(...g):i.remove(...g)}}else{let u=l(),c=te(t);u?i.add(c):i.remove(c)}})}};function we(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function ge(t,e,n=!1){return t?t.has(e.toLowerCase()):n}var Kn=new Map,Jn="evt",wn={type:1,name:"on",keyReq:1,valReq:1,argNames:[Jn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,rawKey:e,key:n,value:r,genRX:i,mods:l})=>{let u=i(),c=t;l.has("window")&&(c=window);let d=v=>{v&&((l.has("prevent")||n==="submit")&&v.preventDefault(),l.has("stop")&&v.stopPropagation()),u(v)},g=l.get("delay");if(g){let v=we(g);d=ht(d,v)}let h=l.get("debounce");if(h){let v=we(h),y=ge(h,"leading",!1),w=!ge(h,"notrail",!1);d=Ce(d,v,y,w)}let b=l.get("throttle");if(b){let v=we(b),y=!ge(b,"noleading",!1),w=ge(b,"trail",!1);d=vt(d,v,y,w)}let S={capture:!0,passive:!1,once:!1};l.has("capture")||(S.capture=!1),l.has("passive")&&(S.passive=!0),l.has("once")&&(S.once=!0);let E=te(n).toLowerCase();switch(E){case"load":return d(),()=>{};case"interval":{let v=1e3,y=l.get("duration");y&&(v=we(y),ge(y,"leading",!1)&&(t.dataset[e.replace(".leading","")]=r,delete t.dataset[e],d()));let w=setInterval(d,v);return()=>{clearInterval(w)}}case"raf":{let v,y=()=>{d(),v=requestAnimationFrame(y)};return v=requestAnimationFrame(y),()=>{v&&cancelAnimationFrame(v)}}case"signals-change":{gt(t,()=>{Kn.delete(t.id)}),d();let v=y=>{d(y)};return document.addEventListener(be,v),()=>{document.removeEventListener(be,v)}}default:{if(l.has("outside")){c=document;let y=d;d=I=>{let L=I?.target;t.contains(L)||y(I)}}return c.addEventListener(E,d,S),()=>{c.removeEventListener(E,d)}}}}};var Rn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,value:n,signals:r})=>{let i=e||re(n);return r.setValue(i,t),()=>r.setValue(i,null)}};var Pn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t,i=n();return e instanceof HTMLElement||P("TextInvalidElement",t),r(()=>{let l=i(t);e.textContent=`${l}`})}};var{round:zn,max:Yn,min:Xn}=Math,xn={type:3,name:"fit",fn:(t,e,n,r,i,l,u=!1,c=!1)=>{let d=(e-n)/(r-n)*(l-i)+i;return c&&(d=zn(d)),u&&(d=Yn(i,Xn(l,d))),d}};var Mn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var Nn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};Ze.load(En,An,_n,wn,Rn,yn,Pn,Wt,Vt,Ft,Ht,Ot,Dt,Gt,Bt,jt,Kt,qt,Jt,zt,Zt,tn,nn,gn,Sn,xn,Mn,Nn);var vo=Ze;export{vo as Datastar};
//# sourceMappingURL=datastar.js.map
