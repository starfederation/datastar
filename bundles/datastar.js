// Datastar v1.0.0-beta.3
var rt=/ðŸ–•JS_DSðŸš€/.source,ye=rt.slice(0,5),je=rt.slice(4),$="datastar";var it="Datastar-Request",Me=300,st=1e3,ot="type module",Ne=!1,at=!1,lt=!0,Y={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},ut=Y.Morph,U={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var _=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(_||{});var be=`${$}-signals`;var Vn="computed",ct={type:1,name:Vn,keyReq:1,valReq:1,onLoad:({key:t,signals:e,genRX:n})=>{let r=n();e.setComputed(t,r)}};var ne=t=>t.trim()==="true",ft=t=>t[0].toLowerCase()+t.slice(1),te=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),Se=t=>te(t).replace(/-./g,e=>e[1].toUpperCase()),Ce=t=>new Function(`return Object.assign({}, ${t})`)(),re=t=>t.startsWith("$")?t.slice(1):t;var dt={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,value:n,genRX:r,signals:i,mods:l}=t,u=l.has("ifmissing");if(e!==""&&!u){let c=n===""?n:r()();i.setValue(e,c)}else{let c=Ce(t.value);t.value=JSON.stringify(c);let g=r()();i.merge(g,u)}}};var pt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var Ee=class{#e=0;#n;constructor(e=$){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e;return this}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function mt(t){if(t.id)return t.id;let e=new Ee,n=t;for(;n.parentNode;){if(n.id){e.with(n.id);break}if(n===n.ownerDocument.documentElement)e.with(n.tagName);else for(let r=1,i=t;i.previousElementSibling;i=i.previousElementSibling,r++)e.with(r);n=n.parentNode}return e.value}function gt(t,e){let n=new MutationObserver(r=>{for(let i of r)for(let l of i.removedNodes)if(l===t){n.disconnect(),e();return}});n.observe(t.parentNode,{childList:!0})}function ht(t,e){return(...n)=>{setTimeout(()=>{t(...n)},e)}}function Ie(t,e,n=!1,r=!0){let i=-1,l=()=>i&&clearTimeout(i);return(...u)=>{l(),n&&!i&&t(...u),i=setTimeout(()=>{r&&t(...u),l()},e)}}function vt(t,e,n=!0,r=!1){let i=!1;return(...l)=>{i||(n&&t(...l),i=!0,setTimeout(()=>{i=!1,r&&t(...l)},e))}}var On="https://data-star.dev/errors";function Ke(t,e,n={}){let r=new Error;e=e[0].toUpperCase()+e.slice(1),r.name=`${$} ${t} error`;let i=te(e).replaceAll("-","_"),l=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),u=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${On}/${t}/${i}?${l}
Context: ${u}`,r}function z(t,e,n={}){return Ke("internal",e,Object.assign({from:t},n))}function j(t,e,n={}){let r={plugin:{name:e.plugin.name,type:_[e.plugin.type]}};return Ke("init",t,Object.assign(r,n))}function x(t,e,n={}){let r={plugin:{name:e.plugin.name,type:_[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Ke("runtime",t,Object.assign(r,n))}var oe="preact-signals",Fn=Symbol.for("preact-signals"),X=1,ce=2,Ae=4,de=8,Le=16,fe=32;function ze(){ke++}function Ye(){if(ke>1){ke--;return}let t,e=!1;for(;Te!==void 0;){let n=Te;for(Te=void 0,Je++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~ce,!(n._flags&de)&&bt(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(Je=0,ke--,e)throw z(oe,"BatchError, error",{error:t})}var N;var Te,ke=0,Je=0,De=0;function yt(t){if(N===void 0)return;let e=t._node;if(e===void 0||e._target!==N)return e={_version:0,_source:t,_prevSource:N._sources,_nextSource:void 0,_target:N,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},N._sources!==void 0&&(N._sources._nextSource=e),N._sources=e,t._node=e,N._flags&fe&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=N._sources,e._nextSource=void 0,N._sources._nextSource=e,N._sources=e),e}function L(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}L.prototype.brand=Fn;L.prototype._refresh=()=>!0;L.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};L.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};L.prototype.subscribe=function(t){return Ve(()=>{let e=this.value,n=N;N=void 0;try{t(e)}finally{N=n}})};L.prototype.valueOf=function(){return this.value};L.prototype.toString=function(){return`${this.value}`};L.prototype.toJSON=function(){return this.value};L.prototype.peek=function(){let t=N;N=void 0;try{return this.value}finally{N=t}};Object.defineProperty(L.prototype,"value",{get(){let t=yt(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(Je>100)throw z(oe,"SignalCycleDetected");this._value=t,this._version++,De++,ze();try{for(let e=this._targets;e!==void 0;e=e._nextTarget)e._target._notify()}finally{Ye()}}}});function bt(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function St(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function Et(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function ae(t){L.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=De-1,this._flags=Ae}ae.prototype=new L;ae.prototype._refresh=function(){if(this._flags&=~ce,this._flags&X)return!1;if((this._flags&(Ae|fe))===fe||(this._flags&=~Ae,this._globalVersion===De))return!0;if(this._globalVersion=De,this._flags|=X,this._version>0&&!bt(this))return this._flags&=~X,!0;let t=N;try{St(this),N=this;let e=this._fn();(this._flags&Le||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~Le,this._version++)}catch(e){this._value=e,this._flags|=Le,this._version++}return N=t,Et(this),this._flags&=~X,!0};ae.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=Ae|fe;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}L.prototype._subscribe.call(this,t)};ae.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(L.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~fe;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};ae.prototype._notify=function(){if(!(this._flags&ce)){this._flags|=Ae|ce;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(ae.prototype,"value",{get(){if(this._flags&X)throw z(oe,"SignalCycleDetected");let t=yt(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&Le)throw z(oe,"GetComputedError",{value:this._value});return this._value}});function Tt(t){return new ae(t)}function At(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){ze();let n=N;N=void 0;try{e()}catch(r){throw t._flags&=~X,t._flags|=de,Xe(t),z(oe,"CleanupEffectError",{error:r})}finally{N=n,Ye()}}}function Xe(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,At(t)}function Hn(t){if(N!==this)throw z(oe,"EndEffectError");Et(this),N=t,this._flags&=~X,this._flags&de&&Xe(this),Ye()}function _e(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=fe}_e.prototype._callback=function(){let t=this._start();try{if(this._flags&de||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};_e.prototype._start=function(){if(this._flags&X)throw z(oe,"SignalCycleDetected");this._flags|=X,this._flags&=~de,At(this),St(this),ze();let t=N;return N=this,Hn.bind(this,t)};_e.prototype._notify=function(){this._flags&ce||(this._flags|=ce,this._nextBatchedEffect=Te,Te=this)};_e.prototype._dispose=function(){this._flags|=de,this._flags&X||Xe(this)};function Ve(t){let e=new _e(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var _t="namespacedSignals",Oe=t=>{document.dispatchEvent(new CustomEvent(be,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function Rt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof L?n[r]=i.value:n[r]=Rt(i)}return n}function wt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw z(_t,"InvalidSignalKey",{key:i});let l=e[i];if(l instanceof Object&&!Array.isArray(l)){t[i]||(t[i]={});let u=wt(t[i],l,n);r.added.push(...u.added.map(c=>`${i}.${c}`)),r.removed.push(...u.removed.map(c=>`${i}.${c}`)),r.updated.push(...u.updated.map(c=>`${i}.${c}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let c=t[i];if(c instanceof L){let d=c.value;c.value=l,d!==l&&r.updated.push(i);continue}}t[i]=new L(l),r.added.push(i)}}return r}function xt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof L?e(n,r):xt(r,(i,l)=>{e(`${n}.${i}`,l)})}}function Wn(t,...e){let n={};for(let r of e){let i=r.split("."),l=t,u=n;for(let d=0;d<i.length-1;d++){let g=i[d];if(!l[g])return{};u[g]||(u[g]={}),l=l[g],u=u[g]}let c=i[i.length-1];u[c]=l[c]}return n}var Fe=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let u=0;u<n.length-1;u++){let c=n[u];if(!r[c])return null;r=r[c]}let i=n[n.length-1],l=r[i];if(!l)throw z(_t,"SignalNotFound",{path:e});return l}setSignal(e,n){let r=e.split("."),i=this.#e;for(let u=0;u<r.length-1;u++){let c=r[u];i[c]||(i[c]={}),i=i[c]}let l=r[r.length-1];i[l]=n}setComputed(e,n){let r=Tt(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let r=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&Oe({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let d=0;d<r.length-1;d++){let g=r[d];i[g]||(i[g]={}),i=i[g]}let l=r[r.length-1],u=i[l];if(u instanceof L)return u;let c=new L(n);return i[l]=c,Oe({added:[e]}),c}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),l=this.#e;for(let c=0;c<i.length-1;c++){let d=i[c];if(!l[d])return;l=l[d]}let u=i[i.length-1];delete l[u],n.push(r)}Oe({removed:n})}merge(e,n=!1){let r=wt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&Oe(r)}subset(...e){return Wn(this.values(),...e)}walk(e){xt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return Rt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var Pt=(t,e)=>`${t}${ye}${e}`,He=class{constructor(){this.aliasPrefix="";this.#e=new Fe;this.#n=[];this.#r={};this.#a=[];this.#t=new Map;this.#l=Ie(()=>{this.#s(document.body)},1);let e="data-";new MutationObserver(r=>{for(let{target:i,type:l,attributeName:u,oldValue:c,addedNodes:d,removedNodes:g}of r)switch(l){case"childList":{for(let v of g){let y=v,S=this.#t.get(y);if(S){for(let[E,h]of S)h();this.#t.delete(y)}}for(let v of d){let y=v;this.#s(y)}}break;case"attributes":{{let v=e+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!u?.startsWith(v))break;let y=i,S=Se(u.slice(e.length));if(c!==null&&y.dataset[S]!==c){let E=this.#t.get(y);if(E){let h=Pt(S,c),b=E.get(h);b&&(b(),E.delete(h))}}S in y.dataset&&this.#i(y,S)}break}}}).observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0})}#e;#n;#r;#a;#t;get signals(){return this.#e}load(...e){for(let n of e){let r=this,i={get signals(){return r.#e},effect:u=>Ve(u),actions:this.#r,plugin:n,applyAttributePlugin:r.#i.bind(r)},l;switch(n.type){case 2:{let u=n;this.#a.push(u),l=u.onGlobalInit;break}case 3:{this.#r[n.name]=n;break}case 1:{let u=n;this.#n.push(u),l=u.onGlobalInit;break}default:throw j("InvalidPluginType",i)}l&&l(i)}this.#n.sort((n,r)=>{let i=r.name.length-n.name.length;return i!==0?i:n.name.localeCompare(r.name)}),this.#l()}#l;#s(e){this.#o(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#i(e,n){let r=n.slice(this.aliasPrefix.length),i=this.#n.find(R=>r.startsWith(R.name));if(!i)return;let l=this.#t.get(e);if(l)for(let[R,I]of l)R.startsWith(n)&&(I(),l.delete(R));e.id.length||(e.id=mt(e));let[u,...c]=r.slice(i.name.length).split(/\_\_+/),d=u.length>0;d&&(u=u.startsWith("-")?u.slice(1):ft(u));let g=e.dataset[n]||"",v=this,y={get signals(){return v.#e},applyAttributePlugin:v.#i.bind(v),effect:R=>Ve(R),actions:this.#r,genRX:()=>this.#u(y,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:u,value:g,mods:new Map},S=i.keyReq||0;if(d){if(S===2)throw x(`${i.name}KeyNotAllowed`,y)}else if(S===1)throw x(`${i.name}KeyRequired`,y);let E=i.valReq||0,h=g.length>0;if(h){if(E===2)throw x(`${i.name}ValueNotAllowed`,y)}else if(E===1)throw x(`${i.name}ValueRequired`,y);if(S===3||E===3){if(d&&h)throw x(`${i.name}KeyAndValueProvided`,y);if(!d&&!h)throw x(`${i.name}KeyOrValueRequired`,y)}for(let R of c){let[I,...H]=R.split(".");y.mods.set(Se(I),new Set(H.map(C=>C.toLowerCase())))}let b=i.onLoad(y);if(b){let R=this.#t.get(e);R||(R=new Map,this.#t.set(e,R)),R.set(Pt(n,g),b)}let M=i.removeOnLoad;M&&M(r)===!0&&delete e.dataset[n]}#u(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,l=e.value.trim().match(i);if(l){let h=l.length-1,b=l[h].trim();b.startsWith("return")||(l[h]=`return (${b});`),r=l.join(`;
`)}let u=new Map,c=new RegExp(`(?:${ye})(.*?)(?:${je})`,"gm");for(let h of r.matchAll(c)){let b=h[1],M=new Ee("dsEscaped").with(b).value;u.set(M,b),r=r.replace(ye+b+je,M)}let d=/@(\w*)\(/gm,g=r.matchAll(d),v=new Set;for(let h of g)v.add(h[1]);let y=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(y,"ctx.actions.$1.fn(ctx,");let S=e.signals.paths();if(S.length){let h=new RegExp(`\\$(${S.join("|")})(\\W|$)`,"gm");r=r.replaceAll(h,"ctx.signals.signal('$1').value$2")}for(let[h,b]of u)r=r.replace(h,b);let E=`return (()=> {
${r}
})()`;e.fnContent=E;try{let h=new Function("ctx",...n,E);return(...b)=>{try{return h(e,...b)}catch(M){throw x("ExecuteExpression",e,{error:M.message})}}}catch(h){throw x("GenerateExpression",e,{error:h.message})}}#o(e,n){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;let r=e.dataset;if("starIgnore"in r)return null;"starIgnore__self"in r||n(e);let i=e.firstElementChild;for(;i;)this.#o(i,n),i=i.nextElementSibling}};var Mt=new He;Mt.load(pt,dt,ct);var Qe=Mt;async function qn(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function $n(t){let e,n,r,i=!1;return function(u){e===void 0?(e=u,n=0,r=-1):e=Gn(e,u);let c=e.length,d=0;for(;n<c;){i&&(e[n]===10&&(d=++n),i=!1);let g=-1;for(;n<c&&g===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-d);break;case 13:i=!0;case 10:g=n;break}if(g===-1)break;t(e.subarray(d,g),r),d=n,r=-1}d===c?e=void 0:d!==0&&(e=e.subarray(d),n-=d)}}function Un(t,e,n){let r=Nt(),i=new TextDecoder;return function(u,c){if(u.length===0)n?.(r),r=Nt();else if(c>0){let d=i.decode(u.subarray(0,c)),g=c+(u[c+1]===32?2:1),v=i.decode(u.subarray(g));switch(d){case"data":r.data=r.data?`${r.data}
${v}`:v;break;case"event":r.event=v;break;case"id":t(r.id=v);break;case"retry":{let y=Number.parseInt(v,10);Number.isNaN(y)||e(r.retry=y);break}}}}}function Gn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Nt(){return{data:"",event:"",id:"",retry:void 0}}var Bn="text/event-stream",Ct="last-event-id";function It(t,e,{signal:n,headers:r,onopen:i,onmessage:l,onclose:u,onerror:c,openWhenHidden:d,fetch:g,retryInterval:v=1e3,retryScaler:y=2,retryMaxWaitMs:S=3e4,retryMaxCount:E=10,...h}){return new Promise((b,M)=>{let R=0,I={...r};I.accept||(I.accept=Bn);let H;function C(){H.abort(),document.hidden||V()}d||document.addEventListener("visibilitychange",C);let P=0;function w(){document.removeEventListener("visibilitychange",C),window.clearTimeout(P),H.abort()}n?.addEventListener("abort",()=>{w(),b()});let D=g??window.fetch,T=i??function(){};async function V(){H=new AbortController;try{let O=await D(e,{...h,headers:I,signal:H.signal});await T(O),await qn(O.body,$n(Un(F=>{F?I[Ct]=F:delete I[Ct]},F=>{v=F},l))),u?.(),w(),b()}catch(O){if(!H.signal.aborted)try{let F=c?.(O)??v;window.clearTimeout(P),P=window.setTimeout(V,F),v*=y,v=Math.min(v,S),R++,R>=E?(w(),M(x("SseMaxRetries",t,{retryMaxCount:E}))):console.error(`Datastar failed to reach ${h.method}: ${e.toString()} retry in ${F}ms`)}catch(F){w(),M(F)}}}V()})}var pe=`${$}-sse`,Ze=`${$}-settling`,le=`${$}-swapping`,We="started",qe="finished",Lt="error",kt="retrying";function Q(t,e){document.addEventListener(pe,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function Re(t,e){document.dispatchEvent(new CustomEvent(pe,{detail:{type:t,argsRaw:e}}))}var Dt=t=>`${t}`.includes("text/event-stream"),Z=async(t,e,n,r)=>{let{el:{id:i},el:l,signals:u}=t,{headers:c,contentType:d,includeLocal:g,selector:v,openWhenHidden:y,retryInterval:S,retryScaler:E,retryMaxWaitMs:h,retryMaxCount:b,abort:M}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:st,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),R=e.toLowerCase(),I=()=>{};try{if(Re(We,{elId:i}),!n?.length)throw x("SseNoUrlProvided",t,{action:R});let H={};H[it]=!0,d==="json"&&(H["Content-Type"]="application/json");let C=Object.assign({},H,c),P={method:e,headers:C,openWhenHidden:y,retryInterval:S,retryScaler:E,retryMaxWaitMs:h,retryMaxCount:b,signal:M,onopen:async T=>{if(T.status>=400){let V=T.status.toString();Re(Lt,{status:V})}},onmessage:T=>{if(!T.event.startsWith($))return;let V=T.event,O={},F=T.data.split(`
`);for(let K of F){let ie=K.indexOf(" "),Pe=K.slice(0,ie),ue=O[Pe];ue||(ue=[],O[Pe]=ue);let ee=K.slice(ie+1).trim();ue.push(ee)}let q={};for(let[K,ie]of Object.entries(O))q[K]=ie.join(`
`);Re(V,q)},onerror:T=>{if(Dt(T))throw x("InvalidContentType",t,{url:n});T&&(console.error(T.message),Re(kt,{message:T.message}))}},w=new URL(n,window.location.origin),D=new URLSearchParams(w.search);if(d==="json"){let T=u.JSON(!1,!g);e==="GET"?D.set($,T):P.body=T}else if(d==="form"){let T=v?document.querySelector(v):l.closest("form");if(T===null)throw v?x("SseFormNotFound",t,{action:R,selector:v}):x("SseClosestFormNotFound",t,{action:R});if(l!==T){let O=F=>F.preventDefault();T.addEventListener("submit",O),I=()=>T.removeEventListener("submit",O)}if(!T.checkValidity()){T.reportValidity(),I();return}let V=new FormData(T);if(e==="GET"){let O=new URLSearchParams(V);for(let[F,q]of O)D.set(F,q)}else P.body=V}else throw x("SseInvalidContentType",t,{action:R,contentType:d});w.search=D.toString();try{await It(t,w.toString(),P)}catch(T){if(!Dt(T))throw x("SseFetchFailed",t,{method:e,url:n,error:T})}}finally{Re(qe,{elId:i}),I()}};var Vt={type:3,name:"delete",fn:async(t,e,n)=>Z(t,"DELETE",e,{...n})};var Ot={type:3,name:"get",fn:async(t,e,n)=>Z(t,"GET",e,{...n})};var Ft={type:3,name:"patch",fn:async(t,e,n)=>Z(t,"PATCH",e,{...n})};var Ht={type:3,name:"post",fn:async(t,e,n)=>Z(t,"POST",e,{...n})};var Wt={type:3,name:"put",fn:async(t,e,n)=>Z(t,"PUT",e,{...n})};var qt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({value:t,signals:e,el:n,key:r})=>{let i=r||re(t),l=e.upsertIfMissing(i,!1),u=c=>{let{type:d,argsRaw:{elId:g}}=c.detail;if(g===n.id)switch(d){case We:l.value=!0;break;case qe:l.value=!1;break}};return document.addEventListener(pe,u),()=>{document.removeEventListener(pe,u)}}};var $t={type:2,name:U.ExecuteScript,onGlobalInit:async t=>{Q(U.ExecuteScript,({autoRemove:e=`${lt}`,attributes:n=ot,script:r})=>{let i=ne(e);if(!r?.length)throw j("NoScriptProvided",t);let l=document.createElement("script");for(let u of n.split(`
`)){let c=u.indexOf(" "),d=c?u.slice(0,c):u,g=c?u.slice(c):"";l.setAttribute(d.trim(),g.trim())}l.text=r,document.head.appendChild(l),i&&l.remove()})}};var we=document,me=!!we.startViewTransition;var Ut=function(){"use strict";let t=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E,beforeNodePantried:E},head:{style:"merge",shouldPreserve:function(s){return s.getAttribute("im-preserve")==="true"},shouldReAppend:function(s){return s.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function n(s,o,a={}){s instanceof Document&&(s=s.documentElement),typeof o=="string"&&(o=D(o));let f=T(o),p=b(s,f,a);return r(s,f,p)}function r(s,o,a){if(a.head.block){let f=s.querySelector("head"),p=o.querySelector("head");if(f&&p){let m=y(p,f,a);Promise.all(m).then(function(){r(s,o,Object.assign(a,{head:{block:!1,ignore:!0}}))});return}}if(a.morphStyle==="innerHTML")return u(o,s,a),a.config.twoPass&&ie(s,a),Array.from(s.children);if(a.morphStyle==="outerHTML"||a.morphStyle==null){let f=O(o,s,a),p=f?.previousSibling??null,m=f?.nextSibling??null,A=l(s,f,a);if(f){if(A){let W=V(p,A,m);return a.config.twoPass&&ie(A.parentNode,a),W}}else return[]}else throw"Do not understand how to morph style "+a.morphStyle}function i(s,o){return!!o.ignoreActiveValue&&s===document.activeElement&&s!==document.body}function l(s,o,a){return a.ignoreActive&&s===document.activeElement?null:o==null?a.callbacks.beforeNodeRemoved(s)===!1?s:(s.parentNode?.removeChild(s),a.callbacks.afterNodeRemoved(s),null):I(s,o)?(a.callbacks.beforeNodeMorphed(s,o)===!1||(s instanceof HTMLHeadElement&&a.head.ignore||(s instanceof HTMLHeadElement&&a.head.style!=="morph"?y(o,s,a):(d(o,s,a),i(s,a)||u(o,s,a))),a.callbacks.afterNodeMorphed(s,o)),s):a.callbacks.beforeNodeRemoved(s)===!1||a.callbacks.beforeNodeAdded(o)===!1?s:(s.parentNode?.replaceChild(o,s),a.callbacks.afterNodeAdded(o),a.callbacks.afterNodeRemoved(s),o)}function u(s,o,a){s instanceof HTMLTemplateElement&&o instanceof HTMLTemplateElement&&(s=s.content,o=o.content);let f=s.firstChild,p=o.firstChild,m;for(;f;){if(m=f,f=m.nextSibling,p==null){if(a.config.twoPass&&a.persistentIds.has(m.id))o.appendChild(m);else{if(a.callbacks.beforeNodeAdded(m)===!1)continue;o.appendChild(m),a.callbacks.afterNodeAdded(m)}ee(a,m);continue}if(R(m,p,a)){l(p,m,a),p=p.nextSibling,ee(a,m);continue}let A=C(s,o,m,p,a);if(A){p=H(p,A,a),l(A,m,a),ee(a,m);continue}let W=P(s,o,m,p,a);if(W){p=H(p,W,a),l(W,m,a),ee(a,m);continue}if(a.config.twoPass&&a.persistentIds.has(m.id))o.insertBefore(m,p);else{if(a.callbacks.beforeNodeAdded(m)===!1)continue;o.insertBefore(m,p),a.callbacks.afterNodeAdded(m)}ee(a,m)}for(;p!==null;){let A=p;p=p.nextSibling,q(A,a)}}function c(s,o,a,f){return s==="value"&&f.ignoreActiveValue&&o===document.activeElement?!0:f.callbacks.beforeAttributeUpdated(s,o,a)===!1}function d(s,o,a){let f=s.nodeType;if(f===1){let p=s,m=o,A=p.attributes,W=m.attributes;for(let B of A)c(B.name,m,"update",a)||m.getAttribute(B.name)!==B.value&&m.setAttribute(B.name,B.value);for(let B=W.length-1;0<=B;B--){let se=W[B];if(se&&!p.hasAttribute(se.name)){if(c(se.name,m,"remove",a))continue;m.removeAttribute(se.name)}}}(f===8||f===3)&&o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue),i(o,a)||v(s,o,a)}function g(s,o,a,f){if(!(s instanceof Element&&o instanceof Element))return;let p=s[a],m=o[a];if(p!==m){let A=c(a,o,"update",f);A||(o[a]=s[a]),p?A||o.setAttribute(a,p):c(a,o,"remove",f)||o.removeAttribute(a)}}function v(s,o,a){if(s instanceof HTMLInputElement&&o instanceof HTMLInputElement&&s.type!=="file"){let f=s.value,p=o.value;g(s,o,"checked",a),g(s,o,"disabled",a),s.hasAttribute("value")?f!==p&&(c("value",o,"update",a)||(o.setAttribute("value",f),o.value=f)):c("value",o,"remove",a)||(o.value="",o.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&o instanceof HTMLOptionElement)g(s,o,"selected",a);else if(s instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement){let f=s.value,p=o.value;if(c("value",o,"update",a))return;f!==p&&(o.value=f),o.firstChild&&o.firstChild.nodeValue!==f&&(o.firstChild.nodeValue=f)}}function y(s,o,a){let f=[],p=[],m=[],A=[],W=a.head.style,B=new Map;for(let k of s.children)B.set(k.outerHTML,k);for(let k of o.children){let J=B.has(k.outerHTML),ve=a.head.shouldReAppend(k),Be=a.head.shouldPreserve(k);J||Be?ve?p.push(k):(B.delete(k.outerHTML),m.push(k)):W==="append"?ve&&(p.push(k),A.push(k)):a.head.shouldRemove(k)!==!1&&p.push(k)}A.push(...B.values()),S("to append: ",A);let se=[];for(let k of A){S("adding: ",k);let J=document.createRange().createContextualFragment(k.outerHTML).firstChild;if(S(J),a.callbacks.beforeNodeAdded(J)!==!1){if("href"in J&&J.href||"src"in J&&J.src){let ve,Be=new Promise(function(Dn){ve=Dn});J.addEventListener("load",function(){ve()}),se.push(Be)}o.appendChild(J),a.callbacks.afterNodeAdded(J),f.push(J)}}for(let k of p)a.callbacks.beforeNodeRemoved(k)!==!1&&(o.removeChild(k),a.callbacks.afterNodeRemoved(k));return a.head.afterHeadMorphed(o,{added:f,kept:m,removed:p}),se}function S(...s){}function E(){}function h(s){let o=Object.assign({},e);return Object.assign(o,s),o.callbacks=Object.assign({},e.callbacks,s.callbacks),o.head=Object.assign({},e.head,s.head),o}function b(s,o,a){let f=h(a);return{target:s,newContent:o,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:Ln(s,o),deadIds:new Set,persistentIds:f.twoPass?kn(s,o):new Set,pantry:f.twoPass?M():document.createElement("div"),callbacks:f.callbacks,head:f.head}}function M(){let s=document.createElement("div");return s.hidden=!0,document.body.insertAdjacentElement("afterend",s),s}function R(s,o,a){return s==null||o==null?!1:s instanceof Element&&o instanceof Element&&s.tagName===o.tagName?s.id!==""&&s.id===o.id?!0:he(a,s,o)>0:!1}function I(s,o){return s==null||o==null||s.id&&s.id!==o.id?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName}function H(s,o,a){let f=s;for(;f!==o;){let p=f;f=p.nextSibling,q(p,a)}return ee(a,o),o.nextSibling}function C(s,o,a,f,p){let m=he(p,a,o),A=null;if(m>0){A=f;let W=0;for(;A!=null;){if(R(a,A,p))return A;if(W+=he(p,A,s),W>m)return null;A=A.nextSibling}}return A}function P(s,o,a,f,p){let m=f,A=a.nextSibling,W=0;for(;m!=null;){if(he(p,m,s)>0)return null;if(I(m,a))return m;if(I(m,A)&&(W++,A=A.nextSibling,W>=2))return null;m=m.nextSibling}return m}let w=new WeakSet;function D(s){let o=new DOMParser,a=s.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(a.match(/<\/html>/)||a.match(/<\/head>/)||a.match(/<\/body>/)){let f=o.parseFromString(s,"text/html");if(a.match(/<\/html>/))return w.add(f),f;{let p=f.firstChild;return p?(w.add(p),p):null}}else{let p=o.parseFromString("<body><template>"+s+"</template></body>","text/html").body.querySelector("template").content;return w.add(p),p}}function T(s){if(s==null)return document.createElement("div");if(w.has(s))return s;if(s instanceof Node){let o=document.createElement("div");return o.append(s),o}else{let o=document.createElement("div");for(let a of[...s])o.append(a);return o}}function V(s,o,a){let f=[],p=[];for(;s!=null;)f.push(s),s=s.previousSibling;let m=f.pop();for(;m!==void 0;)p.push(m),o.parentElement?.insertBefore(m,o),m=f.pop();for(p.push(o);a!=null;)f.push(a),p.push(a),a=a.nextSibling;for(;f.length>0;){let A=f.pop();o.parentElement?.insertBefore(A,o.nextSibling)}return p}function O(s,o,a){let f;f=s.firstChild;let p=f,m=0;for(;f;){let A=F(f,o,a);A>m&&(p=f,m=A),f=f.nextSibling}return p}function F(s,o,a){return I(o,s)?.5+he(a,s,o):0}function q(s,o){if(ee(o,s),o.config.twoPass&&In(o,s)&&s instanceof Element)K(s,o);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function K(s,o){if(o.callbacks.beforeNodePantried(s)!==!1)if(Array.from(s.childNodes).forEach(a=>{K(a,o)}),o.persistentIds.has(s.id))o.pantry.moveBefore?o.pantry.moveBefore(s,null):o.pantry.insertBefore(s,null);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function ie(s,o){s instanceof Element&&(Array.from(o.pantry.children).reverse().forEach(a=>{let f=s.querySelector(`#${a.id}`);if(f){if(f.parentElement?.moveBefore)for(f.parentElement.moveBefore(a,f);f.hasChildNodes();)a.moveBefore(f.firstChild,null);else for(f.before(a);f.firstChild;)a.insertBefore(f.firstChild,null);o.callbacks.beforeNodeMorphed(a,f)!==!1&&(d(f,a,o),o.callbacks.afterNodeMorphed(a,f)),f.remove()}}),o.pantry.remove())}function Pe(s,o){return!s.deadIds.has(o)}function ue(s,o,a){return(s.idMap.get(a)||t).has(o)}function ee(s,o){let a=s.idMap.get(o)||t;for(let f of a)s.deadIds.add(f)}function In(s,o){for(let a of s.idMap.get(o)||t)if(s.persistentIds.has(a))return!0;return!1}function he(s,o,a){let f=s.idMap.get(o)||t,p=0;for(let m of f)Pe(s,m)&&ue(s,m,a)&&++p;return p}function Ge(s){let o=Array.from(s.querySelectorAll("[id]"));return s.id&&o.push(s),o}function nt(s,o){let a=s.parentElement;for(let f of Ge(s)){let p=f;for(;p!==a&&p!=null;){let m=o.get(p);m==null&&(m=new Set,o.set(p,m)),m.add(f.id),p=p.parentElement}}}function Ln(s,o){let a=new Map;return nt(s,a),nt(o,a),a}function kn(s,o){let a=m=>m.tagName+"#"+m.id,f=new Set(Ge(s).map(a)),p=new Set;for(let m of Ge(o))f.has(a(m))&&p.add(m.id);return p}return{morph:n,defaults:e}}();var Bt={type:2,name:U.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");Q(U.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=ut,settleDuration:l=`${Me}`,useViewTransition:u=`${Ne}`})=>{let c=Number.parseInt(l),d=ne(u);e.innerHTML=n.trim();let g=[...e.content.children];for(let v of g){if(!(v instanceof Element))throw j("NoFragmentsFound",t);let y=r||`#${v.getAttribute("id")}`,S=[...document.querySelectorAll(y)||[]];if(!S.length)throw j("NoTargetsFound",t,{selectorOrID:y});me&&d?we.startViewTransition(()=>Gt(t,i,c,v,S)):Gt(t,i,c,v,S)}})}};function Gt(t,e,n,r,i){for(let l of i){l.classList.add(le);let u=l.outerHTML,c=l;switch(e){case Y.Morph:{let v=new Map,y=Ut.morph(c,r,{callbacks:{beforeAttributeUpdated:(S,E,h)=>{if(h==="update"&&S.startsWith("data-")){let b=v.get(E);b||(b=[],v.set(E,b));let M=S.slice(5);b.push(Se(M))}return!0}}});if(!y?.length)throw j("MorphFailed",t);c=y[0];for(let[S,E]of v.entries())for(let h of E)t.applyAttributePlugin(S,h);break}case Y.Inner:c.innerHTML=r.outerHTML;break;case Y.Outer:c.replaceWith(r);break;case Y.Prepend:c.prepend(r);break;case Y.Append:c.append(r);break;case Y.Before:c.before(r);break;case Y.After:c.after(r);break;case Y.UpsertAttributes:for(let v of r.getAttributeNames()){let y=r.getAttribute(v);c.setAttribute(v,y)}break;default:throw j("InvalidMergeMode",t,{mergeMode:e})}let d=c.classList;d.add(le),setTimeout(()=>{l.classList.remove(le),d.remove(le)},n);let g=c.outerHTML;u!==g&&(d.add(Ze),setTimeout(()=>{d.remove(Ze)},n))}}var jt={type:2,name:U.MergeSignals,onGlobalInit:async t=>{Q(U.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${at}`})=>{let{signals:r}=t,i=ne(n);r.merge(Ce(e),i)})}};var Kt={type:2,name:U.RemoveFragments,onGlobalInit:async t=>{Q(U.RemoveFragments,({selector:e,settleDuration:n=`${Me}`,useViewTransition:r=`${Ne}`})=>{if(!e.length)throw j("NoSelectorProvided",t);let i=Number.parseInt(n),l=ne(r),u=document.querySelectorAll(e),c=()=>{for(let d of u)d.classList.add(le);setTimeout(()=>{for(let d of u)d.remove()},i)};me&&l?we.startViewTransition(()=>c()):c()})}};var Jt={type:2,name:U.RemoveSignals,onGlobalInit:async t=>{Q(U.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw j("NoPathsProvided",t);t.signals.remove(...n)})}};var zt={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw x("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Yt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw x("CustomValidityInvalidElement",t);let i=n();return r(()=>{let l=i();if(typeof l!="string")throw x("CustomValidityInvalidExpression",t,{result:l});e.setCustomValidity(l)})}};var Xt="once",Qt="half",Zt="full",en={type:1,name:"intersects",keyReq:2,mods:new Set([Xt,Qt,Zt]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(Zt)?i.threshold=1:n.has(Qt)&&(i.threshold=.5);let l=r(),u=new IntersectionObserver(c=>{for(let d of c)d.isIntersecting&&(l(),n.has(Xt)&&(u.disconnect(),delete t.dataset[e]))},i);return u.observe(t),()=>u.disconnect()}};var tn="session",nn={type:1,name:"persist",mods:new Set([tn]),onLoad:({key:t,value:e,signals:n,effect:r,mods:i})=>{t===""&&(t=$);let l=i.has(tn)?sessionStorage:localStorage,u=e.split(/\s+/).filter(g=>g!=="");u=u.map(g=>re(g));let c=()=>{let g=l.getItem(t)||"{}",v=JSON.parse(g);n.merge(v)},d=()=>{let g;u.length?g=n.subset(...u):g=n.values(),l.setItem(t,JSON.stringify(g))};return c(),r(()=>{d()})}};var rn={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,l=new URL(r,i).toString();window.history.replaceState({},"",l)})}};var $e="smooth",et="instant",tt="auto",sn="hstart",on="hcenter",an="hend",ln="hnearest",un="vstart",cn="vcenter",fn="vend",dn="vnearest",jn="focus",Ue="center",pn="start",mn="end",gn="nearest",hn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([$e,et,tt,sn,on,an,ln,un,cn,fn,dn,jn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:$e,block:Ue,inline:Ue};if(n.has($e)&&(i.behavior=$e),n.has(et)&&(i.behavior=et),n.has(tt)&&(i.behavior=tt),n.has(sn)&&(i.inline=pn),n.has(on)&&(i.inline=Ue),n.has(an)&&(i.inline=mn),n.has(ln)&&(i.inline=gn),n.has(un)&&(i.block=pn),n.has(cn)&&(i.block=Ue),n.has(fn)&&(i.block=mn),n.has(dn)&&(i.block=gn),!(e instanceof HTMLElement||e instanceof SVGElement))throw x("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var vn="none",yn="display",bn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===vn&&t.removeProperty(yn):t.setProperty(yn,vn)})}};var Sn="view-transition",En={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===Sn&&(t=!0);if(!t){let e=document.createElement("meta");e.name=Sn,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!me){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let l=e.style;l.viewTransitionName=i})}};var Tn={type:1,name:"attr",valReq:1,onLoad:({el:t,genRX:e,key:n,effect:r})=>{let i=e();return n===""?r(async()=>{let l=i();for(let[u,c]of Object.entries(l))t.setAttribute(u,c)}):(n=te(n),r(async()=>{let l=!1;try{l=i()}catch{}let u;typeof l=="string"?u=l:u=JSON.stringify(l),!u||u==="false"||u==="null"||u==="undefined"?t.removeAttribute(n):t.setAttribute(n,u)}))}};var Kn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,An=["change","input","keydown"],_n={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,value:n,key:r,signals:i,effect:l}=t,u=r||re(n),c=()=>{},d=()=>{},g=e.tagName.toLowerCase(),v="",y=g.includes("input"),S=e.getAttribute("type"),E=g.includes("checkbox")||y&&S==="checkbox";E&&(v=!1),y&&S==="number"&&(v=0);let b=g.includes("select"),M=g.includes("radio")||y&&S==="radio",R=y&&S==="file";M&&(e.getAttribute("name")?.length||e.setAttribute("name",u)),i.upsertIfMissing(u,v),c=()=>{let C="value"in e,P=i.value(u),w=`${P}`;if(E||M){let D=e;E?D.checked=!!P||P==="true":M&&(D.checked=w===D.value)}else if(!R)if(b){let D=e;if(D.multiple)for(let T of D.options){if(T?.disabled)return;Array.isArray(P)||typeof P=="string"?T.selected=P.includes(T.value):typeof P=="number"?T.selected=P===Number(T.value):T.selected=P}else D.value=w}else C?e.value=w:e.setAttribute("value",w)},d=async()=>{if(R){let w=[...e?.files||[]],D=[],T=[],V=[];await Promise.all(w.map(O=>new Promise(F=>{let q=new FileReader;q.onload=()=>{if(typeof q.result!="string")throw x("InvalidFileResultType",t,{resultType:typeof q.result});let K=q.result.match(Kn);if(!K?.groups)throw x("InvalidDataUri",t,{result:q.result});D.push(K.groups.contents),T.push(K.groups.mime),V.push(O.name)},q.onloadend=()=>F(void 0),q.readAsDataURL(O)}))),i.setValue(u,D),i.setValue(`${u}Mimes`,T),i.setValue(`${u}Names`,V);return}let C=i.value(u),P=e||e;if(typeof C=="number"){let w=Number(P.value||P.getAttribute("value"));i.setValue(u,w)}else if(typeof C=="string"){let w=P.value||P.getAttribute("value")||"";i.setValue(u,w)}else if(typeof C=="boolean")if(E){let w=P.checked||P.getAttribute("checked")==="true";i.setValue(u,w)}else{let w=!!(P.value||P.getAttribute("value"));i.setValue(u,w)}else if(!(typeof C>"u"))if(Array.isArray(C))if(b){let T=[...e.selectedOptions].filter(V=>V.selected).map(V=>V.value);i.setValue(u,T)}else{let w=JSON.stringify(P.value.split(","));i.setValue(u,w)}else throw x("BindUnsupportedSignalType",t,{signalType:typeof C})};for(let C of An)e.addEventListener(C,d);let I=l(()=>c()),H=C=>{C.persisted&&d()};return window.addEventListener("pageshow",H),()=>{I();for(let C of An)e.removeEventListener(C,d);window.removeEventListener("pageshow",H)}}};var Rn={type:1,name:"class",valReq:1,onLoad:({key:t,el:e,genRX:n,effect:r})=>{let i=e.classList,l=n();return r(()=>{if(t===""){let u=l();for(let[c,d]of Object.entries(u)){let g=c.split(/\s+/);d?i.add(...g):i.remove(...g)}}else{let u=l(),c=te(t);u?i.add(c):i.remove(c)}})}};function xe(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function ge(t,e,n=!1){return t?t.has(e.toLowerCase()):n}var Jn=new Map,zn="evt",wn={type:1,name:"on",keyReq:1,valReq:1,argNames:[zn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,rawKey:e,key:n,value:r,genRX:i,mods:l})=>{let u=i(),c=t;l.has("window")&&(c=window);let d=h=>{h&&((l.has("prevent")||n==="submit")&&h.preventDefault(),l.has("stop")&&h.stopPropagation()),u(h)},g=l.get("delay");if(g){let h=xe(g);d=ht(d,h)}let v=l.get("debounce");if(v){let h=xe(v),b=ge(v,"leading",!1),M=!ge(v,"notrail",!1);d=Ie(d,h,b,M)}let y=l.get("throttle");if(y){let h=xe(y),b=!ge(y,"noleading",!1),M=ge(y,"trail",!1);d=vt(d,h,b,M)}let S={capture:!0,passive:!1,once:!1};l.has("capture")||(S.capture=!1),l.has("passive")&&(S.passive=!0),l.has("once")&&(S.once=!0);let E=te(n).toLowerCase();switch(E){case"load":return d(),()=>{};case"interval":{let h=1e3,b=l.get("duration");b&&(h=xe(b),ge(b,"leading",!1)&&(t.dataset[e.replace(".leading","")]=r,delete t.dataset[e],d()));let M=setInterval(d,h);return()=>{clearInterval(M)}}case"raf":{let h,b=()=>{d(),h=requestAnimationFrame(b)};return h=requestAnimationFrame(b),()=>{h&&cancelAnimationFrame(h)}}case"signals-change":{gt(t,()=>{Jn.delete(t.id)}),d();let h=b=>{d(b)};return document.addEventListener(be,h),()=>{document.removeEventListener(be,h)}}default:{if(l.has("outside")){c=document;let b=d;d=R=>{let I=R?.target;t.contains(I)||b(R)}}return c.addEventListener(E,d,S),()=>{c.removeEventListener(E,d)}}}}};var xn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,value:n,signals:r})=>{let i=e||re(n);return r.setValue(i,t),()=>r.setValue(i,null)}};var Pn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t,i=n();return e instanceof HTMLElement||x("TextInvalidElement",t),r(()=>{let l=i(t);e.textContent=`${l}`})}};var{round:Yn,max:Xn,min:Qn}=Math,Mn={type:3,name:"fit",fn:(t,e,n,r,i,l,u=!1,c=!1)=>{let d=(e-n)/(r-n)*(l-i)+i;return c&&(d=Yn(d)),u&&(d=Xn(i,Qn(l,d))),d}};var Nn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var Cn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};Qe.load(Tn,_n,Rn,wn,xn,bn,Pn,qt,Ot,Ht,Wt,Ft,Vt,Bt,jt,Kt,Jt,$t,zt,Yt,en,nn,rn,hn,En,Mn,Nn,Cn);var yo=Qe;export{yo as Datastar};
//# sourceMappingURL=datastar.js.map
