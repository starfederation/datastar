// Datastar v1.0.0-beta.7
var Ue=/ðŸ–•JS_DSðŸš€/.source,oe=Ue.slice(0,5),Le=Ue.slice(4),k="datastar";var Be="Datastar-Request",ve=300,je=1e3,Ke="type module",ye=!1,Je=!1,ze=!0,q={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},Ye=q.Morph,O={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var M=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(M||{});var ae=`${k}-signals`;var J=t=>t.trim()==="true",le=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),j=t=>le(t).replace(/-./g,e=>e[1].toUpperCase()),Ie=t=>le(t).replace(/-/g,"_"),vn=t=>j(t).replace(/^./,e=>e[0].toUpperCase()),be=t=>new Function(`return Object.assign({}, ${t})`)(),z=t=>t.startsWith("$")?t.slice(1):t,yn={kebab:le,snake:Ie,pascal:vn};function V(t,e){for(let n of e.get("case")||[]){let r=yn[n];r&&(t=r(t))}return t}var bn="computed",Xe={type:1,name:bn,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=V(t,e);let i=r();n.setComputed(t,i)}};var Qe={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:o}=t,a=n.has("ifmissing");if(e!==""){let l=V(e,n),p=i===""?i:o()();a?r.upsertIfMissing(l,p):r.setValue(l,p)}else{let l=be(t.value);t.value=JSON.stringify(l);let T=o()();r.merge(T,a)}}};var Ze={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var ue=class{#e=0;#n;constructor(e=k){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function Se(t){if(t.id)return t.id;let e=new ue,n=t;for(;n;){if(e.with(n.tagName||""),n.id){e.with(n.id);break}let r=n?.parentNode;r&&e.with([...r.children].indexOf(n)),n=r}return e.value}function ce(t,e){if(!t||!(t instanceof HTMLElement||t instanceof SVGElement))return null;let n=t.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||e(t);let r=t.firstElementChild;for(;r;)ce(r,e),r=r.nextElementSibling}function Te(t,e){return(...n)=>{setTimeout(()=>{t(...n)},e)}}function et(t,e,n=!1,r=!0){let i=-1,o=()=>i&&clearTimeout(i);return(...a)=>{o(),n&&!i&&t(...a),i=setTimeout(()=>{r&&t(...a),o()},e)}}function tt(t,e,n=!0,r=!1){let i=!1;return(...o)=>{i||(n&&t(...o),i=!0,setTimeout(()=>{i=!1,r&&t(...o)},e))}}var Sn="https://data-star.dev/errors";function Ve(t,e,n={}){let r=new Error;r.name=`${k} ${t} error`;let i=Ie(e),o=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),a=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${Sn}/${t}/${i}?${o}
Context: ${a}`,r}function $(t,e,n={}){return Ve("internal",e,Object.assign({from:t},n))}function H(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]}};return Ve("init",t,Object.assign(r,n))}function N(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Ve("runtime",t,Object.assign(r,n))}var Z="preact-signals",Tn=Symbol.for("preact-signals"),G=1,ee=2,de=4,ne=8,Ae=16,te=32;function ke(){Ee++}function Oe(){if(Ee>1){Ee--;return}let t,e=!1;for(;fe!==void 0;){let n=fe;for(fe=void 0,De++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~ee,!(n._flags&ne)&&rt(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(De=0,Ee--,e)throw t}var C;var fe,Ee=0,De=0,_e=0;function nt(t){if(C===void 0)return;let e=t._node;if(e===void 0||e._target!==C)return e={_version:0,_source:t,_prevSource:C._sources,_nextSource:void 0,_target:C,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},C._sources!==void 0&&(C._sources._nextSource=e),C._sources=e,t._node=e,C._flags&te&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=C._sources,e._nextSource=void 0,C._sources._nextSource=e,C._sources=e),e}function L(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}L.prototype.brand=Tn;L.prototype._refresh=()=>!0;L.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};L.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};L.prototype.subscribe=function(t){return xe(()=>{let e=this.value,n=C;C=void 0;try{t(e)}finally{C=n}})};L.prototype.valueOf=function(){return this.value};L.prototype.toString=function(){return`${this.value}`};L.prototype.toJSON=function(){return this.value};L.prototype.peek=function(){let t=C;C=void 0;try{return this.value}finally{C=t}};Object.defineProperty(L.prototype,"value",{get(){let t=nt(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(De>100)throw $(Z,"SignalCycleDetected");let e=this._value,n=t;this._value=t,this._version++,_e++,ke();try{for(let r=this._targets;r!==void 0;r=r._nextTarget)r._target._notify()}finally{Oe()}this?._onChange({old:e,revised:n})}}});function rt(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function it(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function st(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function X(t){L.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=_e-1,this._flags=de}X.prototype=new L;X.prototype._refresh=function(){if(this._flags&=~ee,this._flags&G)return!1;if((this._flags&(de|te))===te||(this._flags&=~de,this._globalVersion===_e))return!0;if(this._globalVersion=_e,this._flags|=G,this._version>0&&!rt(this))return this._flags&=~G,!0;let t=C;try{it(this),C=this;let e=this._fn();(this._flags&Ae||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~Ae,this._version++)}catch(e){this._value=e,this._flags|=Ae,this._version++}return C=t,st(this),this._flags&=~G,!0};X.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=de|te;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}L.prototype._subscribe.call(this,t)};X.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(L.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~te;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};X.prototype._notify=function(){if(!(this._flags&ee)){this._flags|=de|ee;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(X.prototype,"value",{get(){if(this._flags&G)throw $(Z,"SignalCycleDetected");let t=nt(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&Ae)throw $(Z,"GetComputedError",{value:this._value});return this._value}});function ot(t){return new X(t)}function at(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){ke();let n=C;C=void 0;try{e()}catch(r){throw t._flags&=~G,t._flags|=ne,Fe(t),$(Z,"CleanupEffectError",{error:r})}finally{C=n,Oe()}}}function Fe(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,at(t)}function An(t){if(C!==this)throw $(Z,"EndEffectError");st(this),C=t,this._flags&=~G,this._flags&ne&&Fe(this),Oe()}function pe(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=te}pe.prototype._callback=function(){let t=this._start();try{if(this._flags&ne||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};pe.prototype._start=function(){if(this._flags&G)throw $(Z,"SignalCycleDetected");this._flags|=G,this._flags&=~ne,at(this),it(this),ke();let t=C;return C=this,An.bind(this,t)};pe.prototype._notify=function(){this._flags&ee||(this._flags|=ee,this._nextBatchedEffect=fe,fe=this)};pe.prototype._dispose=function(){this._flags|=ne,this._flags&G||Fe(this)};function xe(t){let e=new pe(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var lt="namespacedSignals",re=t=>{document.dispatchEvent(new CustomEvent(ae,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function ut(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof L?n[r]=i.value:n[r]=ut(i)}return n}function ct(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw $(lt,"InvalidSignalKey",{key:i});let o=e[i];if(o instanceof Object&&!Array.isArray(o)){t[i]||(t[i]={});let a=ct(t[i],o,n);r.added.push(...a.added.map(l=>`${i}.${l}`)),r.removed.push(...a.removed.map(l=>`${i}.${l}`)),r.updated.push(...a.updated.map(l=>`${i}.${l}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let p=t[i];if(p instanceof L){let T=p.value;p.value=o,T!==o&&r.updated.push(i);continue}}let l=new L(o);l._onChange=()=>{re({updated:[i]})},t[i]=l,r.added.push(i)}}return r}function ft(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof L?e(n,r):ft(r,(i,o)=>{e(`${n}.${i}`,o)})}}function En(t,...e){let n={};for(let r of e){let i=r.split("."),o=t,a=n;for(let p=0;p<i.length-1;p++){let T=i[p];if(!o[T])return{};a[T]||(a[T]={}),o=o[T],a=a[T]}let l=i[i.length-1];a[l]=o[l]}return n}var Re=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let a=0;a<n.length-1;a++){let l=n[a];if(!r[l])return null;r=r[l]}let i=n[n.length-1],o=r[i];if(!o)throw $(lt,"SignalNotFound",{path:e});return o}setSignal(e,n){let r=e.split("."),i=this.#e;for(let a=0;a<r.length-1;a++){let l=r[a];i[l]||(i[l]={}),i=i[l]}let o=r[r.length-1];i[o]=n}setComputed(e,n){let r=ot(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let i=this.upsertIfMissing(e,n).signal,o=i.value;i.value=n,o!==n&&re({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let p=0;p<r.length-1;p++){let T=r[p];i[T]||(i[T]={}),i=i[T]}let o=r[r.length-1],a=i[o];if(a instanceof L)return{signal:a,inserted:!1};let l=new L(n);return l._onChange=()=>{re({updated:[e]})},i[o]=l,re({added:[e]}),{signal:l,inserted:!0}}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),o=this.#e;for(let l=0;l<i.length-1;l++){let p=i[l];if(!o[p])return;o=o[p]}let a=i[i.length-1];delete o[a],n.push(r)}re({removed:n})}merge(e,n=!1){let r=ct(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&re(r)}subset(...e){return En(this.values(),...e)}walk(e){ft(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return ut(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var dt=(t,e)=>`${t}${oe}${e}`,we=class{constructor(){this.aliasPrefix="";this.#e=new Re;this.#n=[];this.#r={};this.#a=[];this.#s=null;this.#t=new Map;this.#l=Te(()=>{this.#o(document.body),this.#u()},1)}#e;#n;#r;#a;#s;#t;get signals(){return this.#e}load(...e){let n=this;for(let r of e){let i={get signals(){return n.#e},effect:a=>xe(a),actions:this.#r,plugin:r,applyAttributePlugin:n.#i.bind(n)},o;switch(r.type){case 2:{let a=r;this.#a.push(a),o=a.onGlobalInit;break}case 3:{this.#r[r.name]=r;break}case 1:{let a=r;this.#n.push(a),o=a.onGlobalInit;break}default:throw H("InvalidPluginType",i)}o&&o(i)}this.#n.sort((r,i)=>{let o=i.name.length-r.name.length;return o!==0?o:r.name.localeCompare(i.name)}),this.#l()}#l;#o(e){ce(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#u(){this.#s||(this.#s=new MutationObserver(e=>{for(let{target:n,type:r,attributeName:i,oldValue:o,addedNodes:a,removedNodes:l}of e)switch(r){case"childList":{for(let p of l){let T=p,y=this.#t.get(T);if(y){for(let[w,b]of y)b();this.#t.delete(T)}}for(let p of a){let T=p;this.#o(T)}}break;case"attributes":{{let p="data-",T=p+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!i?.startsWith(T))break;let y=n,w=j(i.slice(p.length));if(o!==null&&y.dataset[w]!==o){let b=this.#t.get(y);if(b){let x=dt(w,o),S=b.get(x);S&&(S(),b.delete(x))}}w in y.dataset&&this.#i(y,w)}break}}}),this.#s.observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}))}#i(e,n){let r=n.slice(this.aliasPrefix.length),i=this.#n.find(m=>r.startsWith(m.name));if(!i)return;let o=this.#t.get(e);if(o)for(let[m,s]of o)m.startsWith(n)&&(s(),o.delete(m));e.id.length||(e.id=Se(e));let[a,...l]=r.slice(i.name.length).split(/\_\_+/),p=a.length>0;p&&(a=j(a));let T=e.dataset[n]||"",y=T.length>0,w=this,b={get signals(){return w.#e},applyAttributePlugin:w.#i.bind(w),effect:m=>xe(m),actions:this.#r,genRX:()=>this.#c(b,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:a,value:T,mods:new Map},x=i.keyReq||0;if(p){if(x===2)throw N(`${i.name}KeyNotAllowed`,b)}else if(x===1)throw N(`${i.name}KeyRequired`,b);let S=i.valReq||0;if(y){if(S===2)throw N(`${i.name}ValueNotAllowed`,b)}else if(S===1)throw N(`${i.name}ValueRequired`,b);if(x===3||S===3){if(p&&y)throw N(`${i.name}KeyAndValueProvided`,b);if(!p&&!y)throw N(`${i.name}KeyOrValueRequired`,b)}for(let m of l){let[s,...d]=m.split(".");b.mods.set(j(s),new Set(d.map(u=>u.toLowerCase())))}let A=i.onLoad(b);if(A){let m=this.#t.get(e);m||(m=new Map,this.#t.set(e,m)),m.set(dt(n,T),A)}let v=i.removeOnLoad;v&&v(r)===!0&&delete e.dataset[n]}#c(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,o=e.value.trim().match(i);if(o){let S=o.length-1,A=o[S].trim();A.startsWith("return")||(o[S]=`return (${A});`),r=o.join(`;
`)}let a=new Map,l=new RegExp(`(?:${oe})(.*?)(?:${Le})`,"gm");for(let S of r.matchAll(l)){let A=S[1],v=new ue("dsEscaped").with(A).value;a.set(v,A),r=r.replace(oe+A+Le,v)}let p=/@(\w*)\(/gm,T=r.matchAll(p),y=new Set;for(let S of T)y.add(S[1]);let w=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(w,"ctx.actions.$1.fn(ctx,");let b=e.signals.paths();if(b.length){let S=new RegExp(`\\$(${b.join("|")})(\\W|$)`,"gm");r=r.replaceAll(S,"ctx.signals.signal('$1').value$2")}for(let[S,A]of a)r=r.replace(S,A);let x=`return (()=> {
${r}
})()`;e.fnContent=x;try{let S=new Function("ctx",...n,x);return(...A)=>{try{return S(e,...A)}catch(v){throw N("ExecuteExpression",e,{error:v.message})}}}catch(S){throw N("GenerateExpression",e,{error:S.message})}}};var pt=new we;pt.load(Ze,Qe,Xe);var He=pt;async function _n(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function xn(t){let e,n,r,i=!1;return function(a){e===void 0?(e=a,n=0,r=-1):e=wn(e,a);let l=e.length,p=0;for(;n<l;){i&&(e[n]===10&&(p=++n),i=!1);let T=-1;for(;n<l&&T===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-p);break;case 13:i=!0;case 10:T=n;break}if(T===-1)break;t(e.subarray(p,T),r),p=n,r=-1}p===l?e=void 0:p!==0&&(e=e.subarray(p),n-=p)}}function Rn(t,e,n){let r=mt(),i=new TextDecoder;return function(a,l){if(a.length===0)n?.(r),r=mt();else if(l>0){let p=i.decode(a.subarray(0,l)),T=l+(a[l+1]===32?2:1),y=i.decode(a.subarray(T));switch(p){case"data":r.data=r.data?`${r.data}
${y}`:y;break;case"event":r.event=y;break;case"id":t(r.id=y);break;case"retry":{let w=Number.parseInt(y,10);Number.isNaN(w)||e(r.retry=w);break}}}}}function wn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function mt(){return{data:"",event:"",id:"",retry:void 0}}var Mn="text/event-stream",gt="last-event-id";function ht(t,e,{signal:n,headers:r,onopen:i,onmessage:o,onclose:a,onerror:l,openWhenHidden:p,fetch:T,retryInterval:y=1e3,retryScaler:w=2,retryMaxWaitMs:b=3e4,retryMaxCount:x=10,...S}){return new Promise((A,v)=>{let m=0,s={...r};s.accept||(s.accept=Mn);let d;function u(){d.abort(),document.hidden||_()}p||document.addEventListener("visibilitychange",u);let c=0;function h(){document.removeEventListener("visibilitychange",u),window.clearTimeout(c),d.abort()}n?.addEventListener("abort",()=>{h(),A()});let f=T??window.fetch,g=i??function(){};async function _(){d=new AbortController;try{let E=await f(e,{...S,headers:s,signal:d.signal});await g(E),await _n(E.body,xn(Rn(R=>{R?s[gt]=R:delete s[gt]},R=>{y=R},o))),a?.(),h(),A()}catch(E){if(!d.signal.aborted)try{let R=l?.(E)??y;window.clearTimeout(c),c=window.setTimeout(_,R),y*=w,y=Math.min(y,b),m++,m>=x?(h(),v(N("SseMaxRetries",t,{retryMaxCount:x}))):console.error(`Datastar failed to reach ${S.method}: ${e.toString()} retry in ${R}ms`)}catch(R){h(),v(R)}}}_()})}var ie=`${k}-sse`,We=`${k}-settling`,Q=`${k}-swapping`,Me="started",Ne="finished",vt="error",yt="retrying";function U(t,e){document.addEventListener(ie,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function me(t,e){document.dispatchEvent(new CustomEvent(ie,{detail:{type:t,argsRaw:e}}))}var bt=t=>`${t}`.includes("text/event-stream"),B=async(t,e,n,r)=>{let{el:{id:i},el:o,signals:a}=t,{headers:l,contentType:p,includeLocal:T,selector:y,openWhenHidden:w,retryInterval:b,retryScaler:x,retryMaxWaitMs:S,retryMaxCount:A,abort:v}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:je,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),m=e.toLowerCase(),s=()=>{};try{if(me(Me,{elId:i}),!n?.length)throw N("SseNoUrlProvided",t,{action:m});let d={};d[Be]=!0,p==="json"&&(d["Content-Type"]="application/json");let u=Object.assign({},d,l),c={method:e,headers:u,openWhenHidden:w,retryInterval:b,retryScaler:x,retryMaxWaitMs:S,retryMaxCount:A,signal:v,onopen:async g=>{if(g.status>=400){let _=g.status.toString();me(vt,{status:_})}},onmessage:g=>{if(!g.event.startsWith(k))return;let _=g.event,E={},R=g.data.split(`
`);for(let D of R){let I=D.indexOf(" "),W=D.slice(0,I),K=E[W];K||(K=[],E[W]=K);let hn=D.slice(I+1);K.push(hn)}let P={};for(let[D,I]of Object.entries(E))P[D]=I.join(`
`);me(_,P)},onerror:g=>{if(bt(g))throw N("InvalidContentType",t,{url:n});g&&(console.error(g.message),me(yt,{message:g.message}))}},h=new URL(n,window.location.origin),f=new URLSearchParams(h.search);if(p==="json"){let g=a.JSON(!1,!T);e==="GET"?f.set(k,g):c.body=g}else if(p==="form"){let g=y?document.querySelector(y):o.closest("form");if(g===null)throw y?N("SseFormNotFound",t,{action:m,selector:y}):N("SseClosestFormNotFound",t,{action:m});if(o!==g){let E=R=>R.preventDefault();g.addEventListener("submit",E),s=()=>g.removeEventListener("submit",E)}if(!g.checkValidity()){g.reportValidity(),s();return}let _=new FormData(g);if(e==="GET"){let E=new URLSearchParams(_);for(let[R,P]of E)f.set(R,P)}else c.body=_}else throw N("SseInvalidContentType",t,{action:m,contentType:p});h.search=f.toString();try{await ht(t,h.toString(),c)}catch(g){if(!bt(g))throw N("SseFetchFailed",t,{method:e,url:n,error:g})}}finally{me(Ne,{elId:i}),s()}};var St={type:3,name:"delete",fn:async(t,e,n)=>B(t,"DELETE",e,{...n})};var Tt={type:3,name:"get",fn:async(t,e,n)=>B(t,"GET",e,{...n})};var At={type:3,name:"patch",fn:async(t,e,n)=>B(t,"PATCH",e,{...n})};var Et={type:3,name:"post",fn:async(t,e,n)=>B(t,"POST",e,{...n})};var _t={type:3,name:"put",fn:async(t,e,n)=>B(t,"PUT",e,{...n})};var xt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let o=e?V(e,n):z(i),a=r.upsertIfMissing(o,!1),l=p=>{let{type:T,argsRaw:{elId:y}}=p.detail;if(y===t.id)switch(T){case Me:a.value=!0;break;case Ne:a.value=!1;break}};return document.addEventListener(ie,l),()=>{document.removeEventListener(ie,l)}}};var Rt={type:2,name:O.ExecuteScript,onGlobalInit:async t=>{U(O.ExecuteScript,({autoRemove:e=`${ze}`,attributes:n=Ke,script:r})=>{let i=J(e);if(!r?.length)throw H("NoScriptProvided",t);let o=document.createElement("script");for(let a of n.split(`
`)){let l=a.indexOf(" "),p=l?a.slice(0,l):a,T=l?a.slice(l):"";o.setAttribute(p.trim(),T.trim())}o.text=r,document.head.appendChild(o),i&&o.remove()})}};var ge=document,Y=!!ge.startViewTransition;var wt=function(){"use strict";let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:b=>b.getAttribute("im-preserve")==="true",shouldReAppend:b=>b.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function n(b,x,S={}){b=y(b);let A=w(x),v=T(b,A,S),m=i(v,()=>l(v,b,A,s=>s.morphStyle==="innerHTML"?(o(s,b,A),Array.from(b.childNodes)):r(s,b,A)));return v.pantry.remove(),m}function r(b,x,S){let A=w(x),v=Array.from(A.childNodes),m=v.indexOf(x),s=v.length-(m+1);return o(b,A,S,x,x.nextSibling),v=Array.from(A.childNodes),v.slice(m,v.length-s)}function i(b,x){if(!b.config.restoreFocus)return x();let S=document.activeElement;if(!(S instanceof HTMLInputElement||S instanceof HTMLTextAreaElement))return x();let{id:A,selectionStart:v,selectionEnd:m}=S,s=x();return A&&A!==document.activeElement?.id&&(S=b.target.querySelector(`#${A}`),S?.focus()),S&&v&&m&&S.setSelectionRange(v,m),s}let o=function(){function b(u,c,h,f=null,g=null){c instanceof HTMLTemplateElement&&h instanceof HTMLTemplateElement&&(c=c.content,h=h.content),f||=c.firstChild;for(let _ of h.childNodes){if(f&&f!=g){let R=S(u,_,f,g);if(R){R!==f&&v(u,f,R),a(R,_,u),f=R.nextSibling;continue}}if(_ instanceof Element&&u.persistentIds.has(_.id)){let R=m(c,_.id,f,u);a(R,_,u),f=R.nextSibling;continue}let E=x(c,_,f,u);E&&(f=E.nextSibling)}for(;f&&f!=g;){let _=f;f=f.nextSibling,A(u,_)}}function x(u,c,h,f){if(f.callbacks.beforeNodeAdded(c)===!1)return null;if(f.idMap.has(c)&&c instanceof Element){let g=document.createElement(c.tagName);return u.insertBefore(g,h),a(g,c,f),f.callbacks.afterNodeAdded(g),g}else{let g=document.importNode(c,!0);return u.insertBefore(g,h),f.callbacks.afterNodeAdded(g),g}}let S=function(){function u(f,g,_,E){let R=null,P=g.nextSibling,D=0,I=_;for(;I&&I!=E;){if(h(I,g)){if(c(f,I,g))return I;R===null&&(f.idMap.has(I)||(R=I))}R===null&&P&&h(I,P)&&(D++,P=P.nextSibling,D>=2&&(R=void 0)),I=I.nextSibling}return R||null}function c(f,g,_){let E=f.idMap.get(g),R=f.idMap.get(_);if(!R||!E)return!1;for(let P of E)if(R.has(P))return!0;return!1}function h(f,g){let _=f,E=g;return _.nodeType===E.nodeType&&_.tagName===E.tagName&&(!_.id||_.id===E.id)}return u}();function A(u,c){if(u.idMap.has(c)&&c instanceof Element)d(u.pantry,c,null);else{if(u.callbacks.beforeNodeRemoved(c)===!1)return;c.parentNode?.removeChild(c),u.callbacks.afterNodeRemoved(c)}}function v(u,c,h){let f=c;for(;f&&f!==h;){let g=f;f=f.nextSibling,A(u,g)}return f}function m(u,c,h,f){let g=f.target.querySelector(`#${c}`)||f.pantry.querySelector(`#${c}`);return s(g,f),d(u,g,h),g}function s(u,c){let h=u.id;for(;u=u.parentNode;){let f=c.idMap.get(u);f&&(f.delete(h),f.size||c.idMap.delete(u))}}function d(u,c,h){if(u.moveBefore)try{u.moveBefore(c,h)}catch{u.insertBefore(c,h)}else u.insertBefore(c,h)}return b}(),a=function(){function b(s,d,u){return u.ignoreActive&&s===document.activeElement?null:(u.callbacks.beforeNodeMorphed(s,d)===!1||(s instanceof HTMLHeadElement&&u.head.ignore||(s instanceof HTMLHeadElement&&u.head.style!=="morph"?p(s,d,u):(x(s,d,u),m(s,u)||o(u,s,d))),u.callbacks.afterNodeMorphed(s,d)),s)}function x(s,d,u){let c=d.nodeType;if(c===1){let h=s,f=d,g=h.attributes,_=f.attributes;for(let E of _)v(E.name,h,"update",u)||h.getAttribute(E.name)!==E.value&&h.setAttribute(E.name,E.value);for(let E=g.length-1;0<=E;E--){let R=g[E];if(R&&!f.hasAttribute(R.name)){if(v(R.name,h,"remove",u))continue;h.removeAttribute(R.name)}}m(h,u)||S(h,f,u)}(c===8||c===3)&&s.nodeValue!==d.nodeValue&&(s.nodeValue=d.nodeValue)}function S(s,d,u){if(s instanceof HTMLInputElement&&d instanceof HTMLInputElement&&d.type!=="file"){let c=d.value,h=s.value;A(s,d,"checked",u),A(s,d,"disabled",u),d.hasAttribute("value")?h!==c&&(v("value",s,"update",u)||(s.setAttribute("value",c),s.value=c)):v("value",s,"remove",u)||(s.value="",s.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&d instanceof HTMLOptionElement)A(s,d,"selected",u);else if(s instanceof HTMLTextAreaElement&&d instanceof HTMLTextAreaElement){let c=d.value,h=s.value;if(v("value",s,"update",u))return;c!==h&&(s.value=c),s.firstChild&&s.firstChild.nodeValue!==c&&(s.firstChild.nodeValue=c)}}function A(s,d,u,c){let h=d[u],f=s[u];if(h!==f){let g=v(u,s,"update",c);g||(s[u]=d[u]),h?g||s.setAttribute(u,""):v(u,s,"remove",c)||s.removeAttribute(u)}}function v(s,d,u,c){return s==="value"&&c.ignoreActiveValue&&d===document.activeElement?!0:c.callbacks.beforeAttributeUpdated(s,d,u)===!1}function m(s,d){return!!d.ignoreActiveValue&&s===document.activeElement&&s!==document.body}return b}();function l(b,x,S,A){if(b.head.block){let v=x.querySelector("head"),m=S.querySelector("head");if(v&&m){let s=p(v,m,b);return Promise.all(s).then(()=>{let d=Object.assign(b,{head:{block:!1,ignore:!0}});return A(d)})}}return A(b)}function p(b,x,S){let A=[],v=[],m=[],s=[],d=new Map;for(let c of x.children)d.set(c.outerHTML,c);for(let c of b.children){let h=d.has(c.outerHTML),f=S.head.shouldReAppend(c),g=S.head.shouldPreserve(c);h||g?f?v.push(c):(d.delete(c.outerHTML),m.push(c)):S.head.style==="append"?f&&(v.push(c),s.push(c)):S.head.shouldRemove(c)!==!1&&v.push(c)}s.push(...d.values());let u=[];for(let c of s){let h=document.createRange().createContextualFragment(c.outerHTML).firstChild;if(S.callbacks.beforeNodeAdded(h)!==!1){if("href"in h&&h.href||"src"in h&&h.src){let f,g=new Promise(function(_){f=_});h.addEventListener("load",function(){f()}),u.push(g)}b.appendChild(h),S.callbacks.afterNodeAdded(h),A.push(h)}}for(let c of v)S.callbacks.beforeNodeRemoved(c)!==!1&&(b.removeChild(c),S.callbacks.afterNodeRemoved(c));return S.head.afterHeadMorphed(b,{added:A,kept:m,removed:v}),u}let T=function(){function b(s,d,u){let c=x(u),{persistentIds:h,idMap:f}=m(s,d),g=c.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(g))throw`Do not understand how to morph style ${g}`;return{target:s,newContent:d,config:c,morphStyle:g,ignoreActive:c.ignoreActive,ignoreActiveValue:c.ignoreActiveValue,restoreFocus:c.restoreFocus,idMap:f,persistentIds:h,pantry:S(),callbacks:c.callbacks,head:c.head}}function x(s){let d=Object.assign({},e);return Object.assign(d,s),d.callbacks=Object.assign({},e.callbacks,s.callbacks),d.head=Object.assign({},e.head,s.head),d}function S(){let s=document.createElement("div");return s.hidden=!0,document.body.insertAdjacentElement("afterend",s),s}function A(s){let d=Array.from(s.querySelectorAll("[id]"));return s.id&&d.push(s),d}function v(s,d,u,c){for(let h of d)if(u.has(h.id)){let f=h;for(;f;){let g=c.get(f);if(g==null&&(g=new Set,c.set(f,g)),g.add(h.id),f===s)break;f=f.parentElement}}}function m(s,d){let u=new Map,c=new Set,h=A(s);for(let R of h){let P=R.id;u.has(P)?c.add(P):u.set(P,R.tagName)}let f=new Set,g=A(d);for(let R of g){let P=R.id,D=u.get(P);(f.has(P)||D&&D!==R.tagName)&&(c.add(P),f.delete(P)),D===R.tagName&&!c.has(P)&&f.add(P)}let _=new Map;v(s,h,f,_);let E=d;return d.__idiomorphDummyParent&&(E=d.childNodes[0]),v(E,g,f,_),{persistentIds:f,idMap:_}}return b}(),{normalizeElement:y,normalizeParent:w}=function(){let b=new WeakSet;function x(v){return v instanceof Document?v.documentElement:v}function S(v){if(v==null)return document.createElement("div");if(typeof v=="string")return S(A(v));if(b.has(v))return v;if(v instanceof Node){if(v.parentNode)return{childNodes:[v],querySelectorAll:m=>{let s=v.querySelectorAll(m);return v.matches(m)?[v,...s]:s},insertBefore:(m,s)=>v.parentNode.insertBefore(m,s),moveBefore:(m,s)=>v.parentNode.moveBefore(m,s),__idiomorphDummyParent:!0};{let m=document.createElement("div");return m.append(v),m}}else{let m=document.createElement("div");for(let s of[...v])m.append(s);return m}}function A(v){let m=new DOMParser,s=v.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(s.match(/<\/html>/)||s.match(/<\/head>/)||s.match(/<\/body>/)){let d=m.parseFromString(v,"text/html");if(s.match(/<\/html>/))return b.add(d),d;{let u=d.firstChild;return u&&b.add(u),u}}else{let u=m.parseFromString("<body><template>"+v+"</template></body>","text/html").body.querySelector("template").content;return b.add(u),u}}return{normalizeElement:x,normalizeParent:S}}();return{morph:n,defaults:e}}();var Nt={type:2,name:O.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");U(O.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=Ye,settleDuration:o=`${ve}`,useViewTransition:a=`${ye}`})=>{let l=Number.parseInt(o),p=J(a);e.innerHTML=n.trim();let T=[...e.content.children];for(let y of T){if(!(y instanceof Element))throw H("NoFragmentsFound",t);let w=r||`#${y.getAttribute("id")}`,b=[...document.querySelectorAll(w)||[]];if(!b.length)throw H("NoTargetsFound",t,{selectorOrID:w});p&&Y?ge.startViewTransition(()=>Mt(t,i,l,y,b)):Mt(t,i,l,y,b)}})}};function Mt(t,e,n,r,i){for(let o of i){o.classList.add(Q);let a=o.outerHTML,l=o;switch(e){case q.Morph:{let y=new Map,w=r.cloneNode(!0);ce(w,x=>{!x.id?.length&&Object.keys(x.dataset).length&&(x.id=Se(x))});let b=wt.morph(l,w,{restoreFocus:!0,callbacks:{beforeAttributeUpdated:(x,S,A)=>{if(A==="update"&&x.startsWith("data-")){let v=y.get(S);v||(v=[],y.set(S,v));let m=x.slice(5);v.push(j(m))}return!0}}});if(b?.length){l=b[0];for(let[x,S]of y.entries())for(let A of S)t.applyAttributePlugin(x,A)}break}case q.Inner:l.innerHTML=r.outerHTML;break;case q.Outer:l.replaceWith(r);break;case q.Prepend:l.prepend(r);break;case q.Append:l.append(r);break;case q.Before:l.before(r);break;case q.After:l.after(r);break;case q.UpsertAttributes:for(let y of r.getAttributeNames()){let w=r.getAttribute(y);l.setAttribute(y,w)}break;default:throw H("InvalidMergeMode",t,{mergeMode:e})}let p=l.classList;p?.add(Q),setTimeout(()=>{o.classList.remove(Q),p?.remove(Q)},n);let T=l.outerHTML;p&&a!==T&&(p.add(We),setTimeout(()=>{p.remove(We)},n))}}var Pt={type:2,name:O.MergeSignals,onGlobalInit:async t=>{U(O.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${Je}`})=>{let{signals:r}=t,i=J(n);r.merge(be(e),i)})}};var Ct={type:2,name:O.RemoveFragments,onGlobalInit:async t=>{U(O.RemoveFragments,({selector:e,settleDuration:n=`${ve}`,useViewTransition:r=`${ye}`})=>{if(!e.length)throw H("NoSelectorProvided",t);let i=Number.parseInt(n),o=J(r),a=document.querySelectorAll(e),l=()=>{for(let p of a)p.classList.add(Q);setTimeout(()=>{for(let p of a)p.remove()},i)};o&&Y?ge.startViewTransition(()=>l()):l()})}};var Lt={type:2,name:O.RemoveSignals,onGlobalInit:async t=>{U(O.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw H("NoPathsProvided",t);t.signals.remove(...n)})}};var It={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw N("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Vt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw N("CustomValidityInvalidElement",t);let i=n();return r(()=>{let o=i();if(typeof o!="string")throw N("CustomValidityInvalidExpression",t,{result:o});e.setCustomValidity(o)})}};var Dt="once",kt="half",Ot="full",Ft={type:1,name:"intersects",keyReq:2,mods:new Set([Dt,kt,Ot]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(Ot)?i.threshold=1:n.has(kt)&&(i.threshold=.5);let o=r(),a=new IntersectionObserver(l=>{for(let p of l)p.isIntersecting&&(o(),n.has(Dt)&&(a.disconnect(),delete t.dataset[e]))},i);return a.observe(t),()=>a.disconnect()}};var Ht="session",Wt={type:1,name:"persist",mods:new Set([Ht]),onLoad:({key:t,effect:e,mods:n,signals:r,value:i})=>{t=V(t,n),t===""&&(t=k);let o=n.has(Ht)?sessionStorage:localStorage,a=i.split(/\s+/).filter(T=>T!=="");a=a.map(T=>z(T));let l=()=>{let T=o.getItem(t)||"{}",y=JSON.parse(T);r.merge(y)},p=()=>{let T;a.length?T=r.subset(...a):T=r.values(),o.setItem(t,JSON.stringify(T))};return l(),e(()=>{p()})}};var qt={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,o=new URL(r,i).toString();window.history.replaceState({},"",o)})}};var Pe="smooth",qe="instant",$e="auto",$t="hstart",Gt="hcenter",Ut="hend",Bt="hnearest",jt="vstart",Kt="vcenter",Jt="vend",zt="vnearest",Nn="focus",Ce="center",Yt="start",Xt="end",Qt="nearest",Zt={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([Pe,qe,$e,$t,Gt,Ut,Bt,jt,Kt,Jt,zt,Nn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:Pe,block:Ce,inline:Ce};if(n.has(Pe)&&(i.behavior=Pe),n.has(qe)&&(i.behavior=qe),n.has($e)&&(i.behavior=$e),n.has($t)&&(i.inline=Yt),n.has(Gt)&&(i.inline=Ce),n.has(Ut)&&(i.inline=Xt),n.has(Bt)&&(i.inline=Qt),n.has(jt)&&(i.block=Yt),n.has(Kt)&&(i.block=Ce),n.has(Jt)&&(i.block=Xt),n.has(zt)&&(i.block=Qt),!(e instanceof HTMLElement||e instanceof SVGElement))throw N("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var en="none",tn="display",nn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===en&&t.removeProperty(tn):t.setProperty(tn,en)})}};var rn="view-transition",sn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===rn&&(t=!0);if(!t){let e=document.createElement("meta");e.name=rn,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!Y){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let o=e.style;o.viewTransitionName=i})}};var on={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let o=i();for(let[a,l]of Object.entries(o))t.setAttribute(a,l)}):(e=le(e),n(async()=>{let o=!1;try{o=i()}catch{}let a;typeof o=="string"?a=o:a=JSON.stringify(o),!a||a==="false"||a==="null"||a==="undefined"?t.removeAttribute(e):t.setAttribute(e,a)}))}};var Pn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,an=["change","input","keydown"],ln={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:o,effect:a}=t,l=n?V(n,r):z(o),p=e.tagName.toLowerCase(),T="",y=p.includes("input"),w=e.getAttribute("type"),b=p.includes("checkbox")||y&&w==="checkbox";b&&(T=!1),y&&w==="number"&&(T=0);let S=p.includes("select"),A=p.includes("radio")||y&&w==="radio",v=y&&w==="file";A&&(e.getAttribute("name")?.length||e.setAttribute("name",l));let m=()=>{let h="value"in e,f=i.value(l),g=`${f}`;if(b||A){let _=e;Array.isArray(f)?_.checked=f.includes(_.value):typeof f=="boolean"?_.checked=!!f:_.checked=g===_.value}else if(S){let _=e;if(_.multiple)for(let E of _.options){if(E?.disabled)return;Array.isArray(f)||typeof f=="string"?E.selected=f.includes(E.value):typeof f=="number"?E.selected=f===Number(E.value):E.selected=f}else _.value=g}else v||(h?e.value=g:e.setAttribute("value",g))},s=async()=>{if(v){let _=[...e?.files||[]],E=[],R=[],P=[];await Promise.all(_.map(D=>new Promise(I=>{let W=new FileReader;W.onload=()=>{if(typeof W.result!="string")throw N("InvalidFileResultType",t,{resultType:typeof W.result});let K=W.result.match(Pn);if(!K?.groups)throw N("InvalidDataUri",t,{result:W.result});E.push(K.groups.contents),R.push(K.groups.mime),P.push(D.name)},W.onloadend=()=>I(void 0),W.readAsDataURL(D)}))),i.setValue(l,E),i.setValue(`${l}Mimes`,R),i.setValue(`${l}Names`,P);return}let h=i.value(l),f=e||e,g=f.value||f.getAttribute("value")||"";if(b){let _=f.checked||f.getAttribute("checked")==="true";if(Array.isArray(h)){let E=new Set(h);_?E.add(f.value):E.delete(f.value),i.setValue(l,[...E])}else if(f.getAttribute("value")){let R=_?g:!1;i.setValue(l,R)}else i.setValue(l,_);return}if(typeof h=="number")i.setValue(l,Number(g));else if(typeof h=="string")i.setValue(l,g||"");else if(typeof h=="boolean")i.setValue(l,!!g);else if(Array.isArray(h))if(S){let R=[...e.selectedOptions].filter(P=>P.selected).map(P=>P.value);i.setValue(l,R)}else i.setValue(l,JSON.stringify(g.split(",")));else if(!(typeof h>"u"))throw N("BindUnsupportedSignalType",t,{signalType:typeof h})},{inserted:d}=i.upsertIfMissing(l,T);d&&s();for(let h of an)e.addEventListener(h,s);let u=a(()=>m()),c=h=>{h.persisted&&s()};return window.addEventListener("pageshow",c),()=>{u();for(let h of an)e.removeEventListener(h,s);window.removeEventListener("pageshow",c)}}};var un={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let o=t.classList,a=i();return r(()=>{if(e===""){let l=a();for(let[p,T]of Object.entries(l)){let y=p.split(/\s+/);T?o.add(...y):o.remove(...y)}}else e=V(e,n),a()?o.add(e):o.remove(e)})}};function he(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function se(t,e,n=!1){return t?t.has(e.toLowerCase()):n}var Cn="evt",Ge="signalsChange",Ln=Ge.length,cn={type:1,name:"on",keyReq:1,valReq:1,argNames:[Cn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,key:e,mods:n,rawKey:r,signals:i,value:o,effect:a,genRX:l})=>{let p=l(),T=t;n.has("window")&&(T=window);let y=m=>{m&&((n.has("prevent")||e==="submit")&&m.preventDefault(),n.has("stop")&&m.stopPropagation()),p(m)},w=n.get("delay");if(w){let m=he(w);y=Te(y,m)}let b=n.get("debounce");if(b){let m=he(b),s=se(b,"leading",!1),d=!se(b,"notrail",!1);y=et(y,m,s,d)}let x=n.get("throttle");if(x){let m=he(x),s=!se(x,"noleading",!1),d=se(x,"trail",!1);y=tt(y,m,s,d)}if(n.has("viewtransition")&&Y){let m=y;y=(...s)=>document.startViewTransition(()=>m(...s))}let S={capture:!0,passive:!1,once:!1};if(n.has("capture")||(S.capture=!1),n.has("passive")&&(S.passive=!0),n.has("once")&&(S.once=!0),e==="load")return setTimeout(()=>y(),0),()=>{};if(e==="interval"){let m=1e3,s=n.get("duration");s&&(m=he(s),se(s,"leading",!1)&&(t.dataset[r.replace(".leading","")]=o,delete t.dataset[r],y()));let d=setInterval(y,m);return()=>{clearInterval(d)}}if(e==="raf"){let m,s=()=>{y(),m=requestAnimationFrame(s)};return m=requestAnimationFrame(s),()=>{m&&cancelAnimationFrame(m)}}if(e.startsWith(Ge)){if(e===Ge){y();let d=u=>y(u);return document.addEventListener(ae,d),()=>{document.removeEventListener(ae,d)}}let m=V(j(e.slice(Ln)),n),s=new Map;return i.walk((d,u)=>{d.startsWith(m)&&s.set(u,u.value)}),a(()=>{for(let[d,u]of s)u!==d.value&&(y(),s.set(d,d.value))})}if(n.has("outside")){T=document;let m=y;y=d=>{let u=d?.target;t.contains(u)||m(d)}}let v=V(e,n);return T.addEventListener(v,y,S),()=>{T.removeEventListener(v,y)}}};var fn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let o=e?V(e,n):z(i);r.setValue(o,t)}};var dn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||N("TextInvalidElement",t),n(()=>{let o=i(t);e.textContent=`${o}`})}};var{round:In,max:Vn,min:Dn}=Math,pn={type:3,name:"fit",fn:(t,e,n,r,i,o,a=!1,l=!1)=>{let p=(e-n)/(r-n)*(o-i)+i;return l&&(p=In(p)),a&&(p=Vn(i,Dn(o,p))),p}};var mn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var gn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};He.load(on,ln,un,cn,fn,nn,dn,xt,Tt,Et,_t,At,St,Nt,Pt,Ct,Lt,Rt,It,Vt,Ft,Wt,qt,Zt,sn,pn,mn,gn);var no=He;export{no as Datastar};
//# sourceMappingURL=datastar.js.map
