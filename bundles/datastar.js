// Datastar v1.0.0-beta.8
var Ye=/ðŸ–•JS_DSðŸš€/.source,ve=Ye.slice(0,5),De=Ye.slice(4),D="datastar";var Xe="Datastar-Request",ye=300,Qe=1e3,Ze="type module",be=!1,et=!1,tt=!0,W={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},nt=W.Morph,k={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var M=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(M||{});var le=`${D}-signals`;var K=t=>t.trim()==="true",ue=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),Y=t=>ue(t).replace(/-./g,e=>e[1].toUpperCase()),ke=t=>ue(t).replace(/-/g,"_"),En=t=>Y(t).replace(/^./,e=>e[0].toUpperCase()),Se=t=>new Function(`return Object.assign({}, ${t})`)(),J=t=>t.startsWith("$")?t.slice(1):t,_n={kebab:ue,snake:ke,pascal:En};function V(t,e){for(let n of e.get("case")||[]){let r=_n[n];r&&(t=r(t))}return t}var Rn="computed",rt={type:1,name:Rn,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=V(t,e);let i=r();n.setComputed(t,i)}};var it={type:1,name:"signals",onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:a}=t,u=n.has("ifmissing");if(e!==""){let o=V(e,n),h=i===""?i:a()();u?r.upsertIfMissing(o,h):r.setValue(o,h)}else{let o=Se(t.value);t.value=JSON.stringify(o);let T=a()();r.merge(T,u)}}};var ot={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var ee=class{#e=0;#t;constructor(e=D){this.#t=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else typeof e=="boolean"?this.with(1<<(e?7:3)):this.#e=this.#e*33^e;return this}get value(){return this.#e}get string(){return this.#t+Math.abs(this.#e).toString(36)}};function Te(t){if(t.id)return t.id;let e=new ee,n=t;for(;n;){if(e.with(n.tagName||""),n.id){e.with(n.id);break}let r=n?.parentNode;r&&e.with([...r.children].indexOf(n)),n=r}return e.string}function Ae(t,e){return new ee().with(t).with(e).value}function ce(t,e){if(!t||!(t instanceof HTMLElement||t instanceof SVGElement))return null;let n=t.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||e(t);let r=t.firstElementChild;for(;r;)ce(r,e),r=r.nextElementSibling}var xn="https://data-star.dev/errors";function Oe(t,e,n={}){let r=new Error;r.name=`${D} ${t} error`;let i=ke(e),a=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),u=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${xn}/${t}/${i}?${a}
Context: ${u}`,r}function $(t,e,n={}){return Oe("internal",e,Object.assign({from:t},n))}function H(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]}};return Oe("init",t,Object.assign(r,n))}function N(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Oe("runtime",t,Object.assign(r,n))}var te="preact-signals",wn=Symbol.for("preact-signals"),G=1,ne=2,de=4,ie=8,Ee=16,re=32;function Fe(){_e++}function qe(){if(_e>1){_e--;return}let t,e=!1;for(;fe!==void 0;){let n=fe;for(fe=void 0,He++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~ne,!(n._flags&ie)&&at(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(He=0,_e--,e)throw t}var C;var fe,_e=0,He=0,Re=0;function st(t){if(C===void 0)return;let e=t._node;if(e===void 0||e._target!==C)return e={_version:0,_source:t,_prevSource:C._sources,_nextSource:void 0,_target:C,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},C._sources!==void 0&&(C._sources._nextSource=e),C._sources=e,t._node=e,C._flags&re&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=C._sources,e._nextSource=void 0,C._sources._nextSource=e,C._sources=e),e}function P(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}P.prototype.brand=wn;P.prototype._refresh=()=>!0;P.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};P.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};P.prototype.subscribe=function(t){return xe(()=>{let e=this.value,n=C;C=void 0;try{t(e)}finally{C=n}})};P.prototype.valueOf=function(){return this.value};P.prototype.toString=function(){return`${this.value}`};P.prototype.toJSON=function(){return this.value};P.prototype.peek=function(){let t=C;C=void 0;try{return this.value}finally{C=t}};Object.defineProperty(P.prototype,"value",{get(){let t=st(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(He>100)throw $(te,"SignalCycleDetected");let e=this._value,n=t;this._value=t,this._version++,Re++,Fe();try{for(let r=this._targets;r!==void 0;r=r._nextTarget)r._target._notify()}finally{qe()}this?._onChange({old:e,revised:n})}}});function at(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function lt(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function ut(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function X(t){P.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=Re-1,this._flags=de}X.prototype=new P;X.prototype._refresh=function(){if(this._flags&=~ne,this._flags&G)return!1;if((this._flags&(de|re))===re||(this._flags&=~de,this._globalVersion===Re))return!0;if(this._globalVersion=Re,this._flags|=G,this._version>0&&!at(this))return this._flags&=~G,!0;let t=C;try{lt(this),C=this;let e=this._fn();(this._flags&Ee||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~Ee,this._version++)}catch(e){this._value=e,this._flags|=Ee,this._version++}return C=t,ut(this),this._flags&=~G,!0};X.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=de|re;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}P.prototype._subscribe.call(this,t)};X.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(P.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~re;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};X.prototype._notify=function(){if(!(this._flags&ne)){this._flags|=de|ne;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(X.prototype,"value",{get(){if(this._flags&G)throw $(te,"SignalCycleDetected");let t=st(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&Ee)throw $(te,"GetComputedError",{value:this._value});return this._value}});function ct(t){return new X(t)}function ft(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){Fe();let n=C;C=void 0;try{e()}catch(r){throw t._flags&=~G,t._flags|=ie,We(t),$(te,"CleanupEffectError",{error:r})}finally{C=n,qe()}}}function We(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,ft(t)}function Mn(t){if(C!==this)throw $(te,"EndEffectError");ut(this),C=t,this._flags&=~G,this._flags&ie&&We(this),qe()}function pe(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=re}pe.prototype._callback=function(){let t=this._start();try{if(this._flags&ie||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};pe.prototype._start=function(){if(this._flags&G)throw $(te,"SignalCycleDetected");this._flags|=G,this._flags&=~ie,ft(this),lt(this),Fe();let t=C;return C=this,Mn.bind(this,t)};pe.prototype._notify=function(){this._flags&ne||(this._flags|=ne,this._nextBatchedEffect=fe,fe=this)};pe.prototype._dispose=function(){this._flags|=ie,this._flags&G||We(this)};function xe(t){let e=new pe(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var dt="namespacedSignals",oe=t=>{document.dispatchEvent(new CustomEvent(le,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function pt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof P?n[r]=i.value:n[r]=pt(i)}return n}function mt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw $(dt,"InvalidSignalKey",{key:i});let a=e[i];if(a instanceof Object&&!Array.isArray(a)){t[i]||(t[i]={});let u=mt(t[i],a,n);r.added.push(...u.added.map(o=>`${i}.${o}`)),r.removed.push(...u.removed.map(o=>`${i}.${o}`)),r.updated.push(...u.updated.map(o=>`${i}.${o}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let h=t[i];if(h instanceof P){let T=h.value;h.value=a,T!==a&&r.updated.push(i);continue}}let o=new P(a);o._onChange=()=>{oe({updated:[i]})},t[i]=o,r.added.push(i)}}return r}function gt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof P?e(n,r):gt(r,(i,a)=>{e(`${n}.${i}`,a)})}}function Nn(t,...e){let n={};for(let r of e){let i=r.split("."),a=t,u=n;for(let h=0;h<i.length-1;h++){let T=i[h];if(!a[T])return{};u[T]||(u[T]={}),a=a[T],u=u[T]}let o=i[i.length-1];u[o]=a[o]}return n}var we=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let u=0;u<n.length-1;u++){let o=n[u];if(!r[o])return null;r=r[o]}let i=n[n.length-1],a=r[i];if(!a)throw $(dt,"SignalNotFound",{path:e});return a}setSignal(e,n){let r=e.split("."),i=this.#e;for(let u=0;u<r.length-1;u++){let o=r[u];i[o]||(i[o]={}),i=i[o]}let a=r[r.length-1];i[a]=n}setComputed(e,n){let r=ct(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let{signal:r}=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&oe({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let h=0;h<r.length-1;h++){let T=r[h];i[T]||(i[T]={}),i=i[T]}let a=r[r.length-1],u=i[a];if(u instanceof P)return{signal:u,inserted:!1};let o=new P(n);return o._onChange=()=>{oe({updated:[e]})},i[a]=o,oe({added:[e]}),{signal:o,inserted:!0}}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),a=this.#e;for(let o=0;o<i.length-1;o++){let h=i[o];if(!a[h])return;a=a[h]}let u=i[i.length-1];delete a[u],n.push(r)}oe({removed:n})}merge(e,n=!1){let r=mt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&oe(r)}subset(...e){return Nn(this.values(),...e)}walk(e){gt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return pt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var ht=new we,Ge=[],Me={},Cn=[],Q=new Map,$e=null,Ue="";function vt(t){Ue=t}function Ne(...t){for(let e of t){let n={plugin:e,signals:ht,effect:i=>xe(i),actions:Me,removals:Q,applyToElement:Ce},r;switch(e.type){case 2:{let i=e;Cn.push(i),r=i.onGlobalInit;break}case 3:{Me[e.name]=e;break}case 1:{let i=e;Ge.push(i),r=i.onGlobalInit;break}default:throw H("InvalidPluginType",n)}r&&r(n)}Ge.sort((e,n)=>{let r=n.name.length-e.name.length;return r!==0?r:e.name.localeCompare(n.name)})}function Be(){Ce(document.documentElement),Pn()}function Ce(t){ce(t,e=>{let n=new Array,r=Q.get(e.id)||new Map,i=new Map([...r]),a=new Map;for(let u of Object.keys(e.dataset)){if(!u.startsWith(Ue))break;let o=e.dataset[u]||"",h=Ae(u,o);a.set(u,h),r.has(h)?i.delete(h):n.push(u)}for(let[u,o]of i)o();for(let u of n){let o=a.get(u);In(e,u,o)}})}function Pn(){$e||($e=new MutationObserver(t=>{let e=new Set,n=new Set;for(let{target:r,type:i,addedNodes:a,removedNodes:u}of t)switch(i){case"childList":{for(let o of u)e.add(o);for(let o of a)n.add(o)}break;case"attributes":{n.add(r);break}}for(let r of e){let i=Q.get(r.id);if(i){for(let[a,u]of i)u(),i.delete(a);i.size===0&&Q.delete(r.id)}}for(let r of n)Ce(r)}),$e.observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}))}function In(t,e,n){let r=Y(e.slice(Ue.length)),i=Ge.find(E=>r.startsWith(E.name));if(!i)return;t.id.length||(t.id=Te(t));let[a,...u]=r.slice(i.name.length).split(/\_\_+/),o=a.length>0;o&&(a=Y(a));let h=t.dataset[e]||"",T=h.length>0,v={signals:ht,applyToElement:Ce,effect:E=>xe(E),actions:Me,removals:Q,genRX:()=>Ln(v,...i.argNames||[]),plugin:i,el:t,rawKey:r,key:a,value:h,mods:new Map},w=i.keyReq||0;if(o){if(w===2)throw N(`${i.name}KeyNotAllowed`,v)}else if(w===1)throw N(`${i.name}KeyRequired`,v);let b=i.valReq||0;if(T){if(b===2)throw N(`${i.name}ValueNotAllowed`,v)}else if(b===1)throw N(`${i.name}ValueRequired`,v);if(w===3||b===3){if(o&&T)throw N(`${i.name}KeyAndValueProvided`,v);if(!o&&!T)throw N(`${i.name}KeyOrValueRequired`,v)}for(let E of u){let[R,...g]=E.split(".");v.mods.set(Y(R),new Set(g.map(s=>s.toLowerCase())))}let A=i.onLoad(v)??(()=>{}),y=Q.get(t.id);y||(y=new Map,Q.set(t.id,y)),y.set(n,A)}function Ln(t,...e){let n="",r=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,i=t.value.trim().match(r);if(i){let A=i.length-1,y=i[A].trim();y.startsWith("return")||(i[A]=`return (${y});`),n=i.join(`;
`)}let a=new Map,u=new RegExp(`(?:${ve})(.*?)(?:${De})`,"gm");for(let A of n.matchAll(u)){let y=A[1],E=new ee("dsEscaped").with(y).string;a.set(E,y),n=n.replace(ve+y+De,E)}let o=/@(\w*)\(/gm,h=n.matchAll(o),T=new Set;for(let A of h)T.add(A[1]);let v=new RegExp(`@(${Object.keys(Me).join("|")})\\(`,"gm");n=n.replaceAll(v,"ctx.actions.$1.fn(ctx,");let w=t.signals.paths();if(w.length){let A=new RegExp(`\\$(${w.join("|")})(\\W|$)`,"gm");n=n.replaceAll(A,"ctx.signals.signal('$1').value$2")}for(let[A,y]of a)n=n.replace(A,y);let b=`return (()=> {
${n}
})()`;t.fnContent=b;try{let A=new Function("ctx",...e,b);return(...y)=>{try{return A(t,...y)}catch(E){throw N("ExecuteExpression",t,{error:E.message})}}}catch(A){throw N("GenerateExpression",t,{error:A.message})}}Ne(ot,it,rt);async function Vn(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function Dn(t){let e,n,r,i=!1;return function(u){e===void 0?(e=u,n=0,r=-1):e=On(e,u);let o=e.length,h=0;for(;n<o;){i&&(e[n]===10&&(h=++n),i=!1);let T=-1;for(;n<o&&T===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-h);break;case 13:i=!0;case 10:T=n;break}if(T===-1)break;t(e.subarray(h,T),r),h=n,r=-1}h===o?e=void 0:h!==0&&(e=e.subarray(h),n-=h)}}function kn(t,e,n){let r=yt(),i=new TextDecoder;return function(u,o){if(u.length===0)n?.(r),r=yt();else if(o>0){let h=i.decode(u.subarray(0,o)),T=o+(u[o+1]===32?2:1),v=i.decode(u.subarray(T));switch(h){case"data":r.data=r.data?`${r.data}
${v}`:v;break;case"event":r.event=v;break;case"id":t(r.id=v);break;case"retry":{let w=Number.parseInt(v,10);Number.isNaN(w)||e(r.retry=w);break}}}}}function On(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function yt(){return{data:"",event:"",id:"",retry:void 0}}var Hn="text/event-stream",bt="last-event-id";function St(t,e,{signal:n,headers:r,onopen:i,onmessage:a,onclose:u,onerror:o,openWhenHidden:h,fetch:T,retryInterval:v=1e3,retryScaler:w=2,retryMaxWaitMs:b=3e4,retryMaxCount:A=10,...y}){return new Promise((E,R)=>{let g=0,s={...r};s.accept||(s.accept=Hn);let c;function l(){c.abort(),document.hidden||S()}h||document.addEventListener("visibilitychange",l);let d=0;function m(){document.removeEventListener("visibilitychange",l),window.clearTimeout(d),c.abort()}n?.addEventListener("abort",()=>{m(),E()});let p=T??window.fetch,f=i??function(){};async function S(){c=new AbortController;try{let _=await p(e,{...y,headers:s,signal:c.signal});await f(_),await Vn(_.body,Dn(kn(x=>{x?s[bt]=x:delete s[bt]},x=>{v=x},a))),u?.(),m(),E()}catch(_){if(!c.signal.aborted)try{let x=o?.(_)??v;window.clearTimeout(d),d=window.setTimeout(S,x),v*=w,v=Math.min(v,b),g++,g>=A?(m(),R(N("SseMaxRetries",t,{retryMaxCount:A}))):console.error(`Datastar failed to reach ${y.method}: ${e.toString()} retry in ${x}ms`)}catch(x){m(),R(x)}}}S()})}var se=`${D}-sse`,je=`${D}-settling`,Z=`${D}-swapping`,Pe="started",Ie="finished",Tt="error",At="retrying";function U(t,e){document.addEventListener(se,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function me(t,e){document.dispatchEvent(new CustomEvent(se,{detail:{type:t,argsRaw:e}}))}var Et=t=>`${t}`.includes("text/event-stream"),B=async(t,e,n,r)=>{let{el:{id:i},el:a,signals:u}=t,{headers:o,contentType:h,includeLocal:T,selector:v,openWhenHidden:w,retryInterval:b,retryScaler:A,retryMaxWaitMs:y,retryMaxCount:E,abort:R}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:Qe,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),g=e.toLowerCase(),s=()=>{};try{if(me(Pe,{elId:i}),!n?.length)throw N("SseNoUrlProvided",t,{action:g});let c={};c[Xe]=!0,h==="json"&&(c["Content-Type"]="application/json");let l=Object.assign({},c,o),d={method:e,headers:l,openWhenHidden:w,retryInterval:b,retryScaler:A,retryMaxWaitMs:y,retryMaxCount:E,signal:R,onopen:async f=>{if(f.status>=400){let S=f.status.toString();me(Tt,{status:S})}},onmessage:f=>{if(!f.event.startsWith(D))return;let S=f.event,_={},x=f.data.split(`
`);for(let F of x){let L=F.indexOf(" "),q=F.slice(0,L),j=_[q];j||(j=[],_[q]=j);let An=F.slice(L+1);j.push(An)}let I={};for(let[F,L]of Object.entries(_))I[F]=L.join(`
`);me(S,I)},onerror:f=>{if(Et(f))throw N("InvalidContentType",t,{url:n});f&&(console.error(f.message),me(At,{message:f.message}))}},m=new URL(n,window.location.origin),p=new URLSearchParams(m.search);if(h==="json"){let f=u.JSON(!1,!T);e==="GET"?p.set(D,f):d.body=f}else if(h==="form"){let f=v?document.querySelector(v):a.closest("form");if(f===null)throw v?N("SseFormNotFound",t,{action:g,selector:v}):N("SseClosestFormNotFound",t,{action:g});if(a!==f){let _=x=>x.preventDefault();f.addEventListener("submit",_),s=()=>f.removeEventListener("submit",_)}if(!f.checkValidity()){f.reportValidity(),s();return}let S=new FormData(f);if(e==="GET"){let _=new URLSearchParams(S);for(let[x,I]of _)p.set(x,I)}else d.body=S}else throw N("SseInvalidContentType",t,{action:g,contentType:h});m.search=p.toString();try{await St(t,m.toString(),d)}catch(f){if(!Et(f))throw N("SseFetchFailed",t,{method:e,url:n,error:f})}}finally{me(Ie,{elId:i}),s()}};var _t={type:3,name:"delete",fn:async(t,e,n)=>B(t,"DELETE",e,{...n})};var Rt={type:3,name:"get",fn:async(t,e,n)=>B(t,"GET",e,{...n})};var xt={type:3,name:"patch",fn:async(t,e,n)=>B(t,"PATCH",e,{...n})};var wt={type:3,name:"post",fn:async(t,e,n)=>B(t,"POST",e,{...n})};var Mt={type:3,name:"put",fn:async(t,e,n)=>B(t,"PUT",e,{...n})};var Nt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let a=e?V(e,n):J(i),{signal:u}=r.upsertIfMissing(a,!1),o=h=>{let{type:T,argsRaw:{elId:v}}=h.detail;if(v===t.id)switch(T){case Pe:u.value=!0;break;case Ie:u.value=!1;break}};return document.addEventListener(se,o),()=>{document.removeEventListener(se,o)}}};var Ct={type:2,name:k.ExecuteScript,onGlobalInit:async t=>{U(k.ExecuteScript,({autoRemove:e=`${tt}`,attributes:n=Ze,script:r})=>{let i=K(e);if(!r?.length)throw H("NoScriptProvided",t);let a=document.createElement("script");for(let u of n.split(`
`)){let o=u.indexOf(" "),h=o?u.slice(0,o):u,T=o?u.slice(o):"";a.setAttribute(h.trim(),T.trim())}a.text=r,document.head.appendChild(a),i&&a.remove()})}};var ge=document,z=!!ge.startViewTransition;var Pt=function(){"use strict";let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:b=>b.getAttribute("im-preserve")==="true",shouldReAppend:b=>b.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function n(b,A,y={}){b=v(b);let E=w(A),R=T(b,E,y),g=i(R,()=>o(R,b,E,s=>s.morphStyle==="innerHTML"?(a(s,b,E),Array.from(b.childNodes)):r(s,b,E)));return R.pantry.remove(),g}function r(b,A,y){let E=w(A),R=Array.from(E.childNodes),g=R.indexOf(A),s=R.length-(g+1);return a(b,E,y,A,A.nextSibling),R=Array.from(E.childNodes),R.slice(g,R.length-s)}function i(b,A){if(!b.config.restoreFocus)return A();let y=document.activeElement;if(!(y instanceof HTMLInputElement||y instanceof HTMLTextAreaElement))return A();let{id:E,selectionStart:R,selectionEnd:g}=y,s=A();return E&&E!==document.activeElement?.id&&(y=b.target.querySelector(`#${E}`),y?.focus()),y&&!y.selectionEnd&&g&&y.setSelectionRange(R,g),s}let a=function(){function b(l,d,m,p=null,f=null){d instanceof HTMLTemplateElement&&m instanceof HTMLTemplateElement&&(d=d.content,m=m.content),p||=d.firstChild;for(let S of m.childNodes){if(p&&p!=f){let x=y(l,S,p,f);if(x){x!==p&&R(l,p,x),u(x,S,l),p=x.nextSibling;continue}}if(S instanceof Element&&l.persistentIds.has(S.id)){let x=g(d,S.id,p,l);u(x,S,l),p=x.nextSibling;continue}let _=A(d,S,p,l);_&&(p=_.nextSibling)}for(;p&&p!=f;){let S=p;p=p.nextSibling,E(l,S)}}function A(l,d,m,p){if(p.callbacks.beforeNodeAdded(d)===!1)return null;if(p.idMap.has(d)){let f=document.createElement(d.tagName);return l.insertBefore(f,m),u(f,d,p),p.callbacks.afterNodeAdded(f),f}else{let f=document.importNode(d,!0);return l.insertBefore(f,m),p.callbacks.afterNodeAdded(f),f}}let y=function(){function l(p,f,S,_){let x=null,I=f.nextSibling,F=0,L=S;for(;L&&L!=_;){if(m(L,f)){if(d(p,L,f))return L;x===null&&(p.idMap.has(L)||(x=L))}if(x===null&&I&&m(L,I)&&(F++,I=I.nextSibling,F>=2&&(x=void 0)),L.contains(document.activeElement))break;L=L.nextSibling}return x||null}function d(p,f,S){let _=p.idMap.get(f),x=p.idMap.get(S);if(!x||!_)return!1;for(let I of _)if(x.has(I))return!0;return!1}function m(p,f){let S=p,_=f;return S.nodeType===_.nodeType&&S.tagName===_.tagName&&(!S.id||S.id===_.id)}return l}();function E(l,d){if(l.idMap.has(d))c(l.pantry,d,null);else{if(l.callbacks.beforeNodeRemoved(d)===!1)return;d.parentNode?.removeChild(d),l.callbacks.afterNodeRemoved(d)}}function R(l,d,m){let p=d;for(;p&&p!==m;){let f=p;p=p.nextSibling,E(l,f)}return p}function g(l,d,m,p){let f=p.target.querySelector(`#${d}`)||p.pantry.querySelector(`#${d}`);return s(f,p),c(l,f,m),f}function s(l,d){let m=l.id;for(;l=l.parentNode;){let p=d.idMap.get(l);p&&(p.delete(m),p.size||d.idMap.delete(l))}}function c(l,d,m){if(l.moveBefore)try{l.moveBefore(d,m)}catch{l.insertBefore(d,m)}else l.insertBefore(d,m)}return b}(),u=function(){function b(s,c,l){return l.ignoreActive&&s===document.activeElement?null:(l.callbacks.beforeNodeMorphed(s,c)===!1||(s instanceof HTMLHeadElement&&l.head.ignore||(s instanceof HTMLHeadElement&&l.head.style!=="morph"?h(s,c,l):(A(s,c,l),g(s,l)||a(l,s,c))),l.callbacks.afterNodeMorphed(s,c)),s)}function A(s,c,l){let d=c.nodeType;if(d===1){let m=s,p=c,f=m.attributes,S=p.attributes;for(let _ of S)R(_.name,m,"update",l)||m.getAttribute(_.name)!==_.value&&m.setAttribute(_.name,_.value);for(let _=f.length-1;0<=_;_--){let x=f[_];if(x&&!p.hasAttribute(x.name)){if(R(x.name,m,"remove",l))continue;m.removeAttribute(x.name)}}g(m,l)||y(m,p,l)}(d===8||d===3)&&s.nodeValue!==c.nodeValue&&(s.nodeValue=c.nodeValue)}function y(s,c,l){if(s instanceof HTMLInputElement&&c instanceof HTMLInputElement&&c.type!=="file"){let d=c.value,m=s.value;E(s,c,"checked",l),E(s,c,"disabled",l),c.hasAttribute("value")?m!==d&&(R("value",s,"update",l)||(s.setAttribute("value",d),s.value=d)):R("value",s,"remove",l)||(s.value="",s.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&c instanceof HTMLOptionElement)E(s,c,"selected",l);else if(s instanceof HTMLTextAreaElement&&c instanceof HTMLTextAreaElement){let d=c.value,m=s.value;if(R("value",s,"update",l))return;d!==m&&(s.value=d),s.firstChild&&s.firstChild.nodeValue!==d&&(s.firstChild.nodeValue=d)}}function E(s,c,l,d){let m=c[l],p=s[l];if(m!==p){let f=R(l,s,"update",d);f||(s[l]=c[l]),m?f||s.setAttribute(l,""):R(l,s,"remove",d)||s.removeAttribute(l)}}function R(s,c,l,d){return s==="value"&&d.ignoreActiveValue&&c===document.activeElement?!0:d.callbacks.beforeAttributeUpdated(s,c,l)===!1}function g(s,c){return!!c.ignoreActiveValue&&s===document.activeElement&&s!==document.body}return b}();function o(b,A,y,E){if(b.head.block){let R=A.querySelector("head"),g=y.querySelector("head");if(R&&g){let s=h(R,g,b);return Promise.all(s).then(()=>{let c=Object.assign(b,{head:{block:!1,ignore:!0}});return E(c)})}}return E(b)}function h(b,A,y){let E=[],R=[],g=[],s=[],c=new Map;for(let d of A.children)c.set(d.outerHTML,d);for(let d of b.children){let m=c.has(d.outerHTML),p=y.head.shouldReAppend(d),f=y.head.shouldPreserve(d);m||f?p?R.push(d):(c.delete(d.outerHTML),g.push(d)):y.head.style==="append"?p&&(R.push(d),s.push(d)):y.head.shouldRemove(d)!==!1&&R.push(d)}s.push(...c.values());let l=[];for(let d of s){let m=document.createRange().createContextualFragment(d.outerHTML).firstChild;if(y.callbacks.beforeNodeAdded(m)!==!1){if("href"in m&&m.href||"src"in m&&m.src){let p,f=new Promise(function(S){p=S});m.addEventListener("load",function(){p()}),l.push(f)}b.appendChild(m),y.callbacks.afterNodeAdded(m),E.push(m)}}for(let d of R)y.callbacks.beforeNodeRemoved(d)!==!1&&(b.removeChild(d),y.callbacks.afterNodeRemoved(d));return y.head.afterHeadMorphed(b,{added:E,kept:g,removed:R}),l}let T=function(){function b(c,l,d){let{persistentIds:m,idMap:p}=g(c,l),f=A(d),S=f.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(S))throw`Do not understand how to morph style ${S}`;return{target:c,newContent:l,config:f,morphStyle:S,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,restoreFocus:f.restoreFocus,idMap:p,persistentIds:m,pantry:y(),callbacks:f.callbacks,head:f.head}}function A(c){let l=Object.assign({},e);return Object.assign(l,c),l.callbacks=Object.assign({},e.callbacks,c.callbacks),l.head=Object.assign({},e.head,c.head),l}function y(){let c=document.createElement("div");return c.hidden=!0,document.body.insertAdjacentElement("afterend",c),c}function E(c){let l=Array.from(c.querySelectorAll("[id]"));return c.id&&l.push(c),l}function R(c,l,d,m){for(let p of m)if(l.has(p.id)){let f=p;for(;f;){let S=c.get(f);if(S==null&&(S=new Set,c.set(f,S)),S.add(p.id),f===d)break;f=f.parentElement}}}function g(c,l){let d=E(c),m=E(l),p=s(d,m),f=new Map;R(f,p,c,d);let S=l.__idiomorphRoot||l;return R(f,p,S,m),{persistentIds:p,idMap:f}}function s(c,l){let d=new Set,m=new Map;for(let{id:f,tagName:S}of c)m.has(f)?d.add(f):m.set(f,S);let p=new Set;for(let{id:f,tagName:S}of l)p.has(f)?d.add(f):m.get(f)===S&&p.add(f);for(let f of d)p.delete(f);return p}return b}(),{normalizeElement:v,normalizeParent:w}=function(){let b=new WeakSet;function A(g){return g instanceof Document?g.documentElement:g}function y(g){if(g==null)return document.createElement("div");if(typeof g=="string")return y(R(g));if(b.has(g))return g;if(g instanceof Node){if(g.parentNode)return E(g);{let s=document.createElement("div");return s.append(g),s}}else{let s=document.createElement("div");for(let c of[...g])s.append(c);return s}}function E(g){return{childNodes:[g],querySelectorAll:s=>{let c=g.querySelectorAll(s);return g.matches(s)?[g,...c]:c},insertBefore:(s,c)=>g.parentNode.insertBefore(s,c),moveBefore:(s,c)=>g.parentNode.moveBefore(s,c),get __idiomorphRoot(){return g}}}function R(g){let s=new DOMParser,c=g.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(c.match(/<\/html>/)||c.match(/<\/head>/)||c.match(/<\/body>/)){let l=s.parseFromString(g,"text/html");if(c.match(/<\/html>/))return b.add(l),l;{let d=l.firstChild;return d&&b.add(d),d}}else{let d=s.parseFromString("<body><template>"+g+"</template></body>","text/html").body.querySelector("template").content;return b.add(d),d}}return{normalizeElement:A,normalizeParent:y}}();return{morph:n,defaults:e}}();var Lt={type:2,name:k.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");U(k.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=nt,settleDuration:a=`${ye}`,useViewTransition:u=`${be}`})=>{let o=Number.parseInt(a),h=K(u);e.innerHTML=n.trim();let T=[...e.content.children];for(let v of T){if(!(v instanceof Element))throw H("NoFragmentsFound",t);let w=r||`#${v.getAttribute("id")}`,b=[...document.querySelectorAll(w)||[]];if(!b.length)throw H("NoTargetsFound",t,{selectorOrID:w});h&&z?ge.startViewTransition(()=>It(t,i,o,v,b)):It(t,i,o,v,b)}})}};function It(t,e,n,r,i){for(let a of i){a.classList.add(Z);let u=a.outerHTML,o=a;switch(e){case W.Morph:{let v=r.cloneNode(!0);ce(v,w=>{!w.id?.length&&Object.keys(w.dataset).length&&(w.id=Te(w));let b=t.removals.get(w.id);if(b){let A=new Map;for(let[y,E]of b){let R=Ae(y,y);A.set(R,E),b.delete(y)}t.removals.set(w.id,A)}}),Pt.morph(o,v);break}case W.Inner:o.innerHTML=r.outerHTML;break;case W.Outer:o.replaceWith(r);break;case W.Prepend:o.prepend(r);break;case W.Append:o.append(r);break;case W.Before:o.before(r);break;case W.After:o.after(r);break;case W.UpsertAttributes:for(let v of r.getAttributeNames()){let w=r.getAttribute(v);o.setAttribute(v,w)}break;default:throw H("InvalidMergeMode",t,{mergeMode:e})}let h=o.classList;h?.add(Z),setTimeout(()=>{a.classList.remove(Z),h?.remove(Z)},n);let T=o.outerHTML;h&&u!==T&&(h.add(je),setTimeout(()=>{h.remove(je)},n))}}var Vt={type:2,name:k.MergeSignals,onGlobalInit:async t=>{U(k.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${et}`})=>{let{signals:r}=t,i=K(n);r.merge(Se(e),i)})}};var Dt={type:2,name:k.RemoveFragments,onGlobalInit:async t=>{U(k.RemoveFragments,({selector:e,settleDuration:n=`${ye}`,useViewTransition:r=`${be}`})=>{if(!e.length)throw H("NoSelectorProvided",t);let i=Number.parseInt(n),a=K(r),u=document.querySelectorAll(e),o=()=>{for(let h of u)h.classList.add(Z);setTimeout(()=>{for(let h of u)h.remove()},i)};a&&z?ge.startViewTransition(()=>o()):o()})}};var kt={type:2,name:k.RemoveSignals,onGlobalInit:async t=>{U(k.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw H("NoPathsProvided",t);t.signals.remove(...n)})}};var Ot={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw N("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Ht={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw N("CustomValidityInvalidElement",t);let i=n();return r(()=>{let a=i();if(typeof a!="string")throw N("CustomValidityInvalidExpression",t,{result:a});e.setCustomValidity(a)})}};var Ft="once",qt="half",Wt="full",$t={type:1,name:"intersects",keyReq:2,mods:new Set([Ft,qt,Wt]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(Wt)?i.threshold=1:n.has(qt)&&(i.threshold=.5);let a=r(),u=new IntersectionObserver(o=>{for(let h of o)h.isIntersecting&&(a(),n.has(Ft)&&(u.disconnect(),delete t.dataset[e]))},i);return u.observe(t),()=>u.disconnect()}};var Gt="session",Ut={type:1,name:"persist",mods:new Set([Gt]),onLoad:({key:t,effect:e,mods:n,signals:r,value:i})=>{t=V(t,n),t===""&&(t=D);let a=n.has(Gt)?sessionStorage:localStorage,u=i.split(/\s+/).filter(T=>T!=="");u=u.map(T=>J(T));let o=()=>{let T=a.getItem(t)||"{}",v=JSON.parse(T);r.merge(v)},h=()=>{let T;u.length?T=r.subset(...u):T=r.values(),a.setItem(t,JSON.stringify(T))};return o(),e(()=>{h()})}};var Bt={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,a=new URL(r,i).toString();window.history.replaceState({},"",a)})}};var Le="smooth",Ke="instant",Je="auto",jt="hstart",Kt="hcenter",Jt="hend",zt="hnearest",Yt="vstart",Xt="vcenter",Qt="vend",Zt="vnearest",Fn="focus",Ve="center",en="start",tn="end",nn="nearest",rn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([Le,Ke,Je,jt,Kt,Jt,zt,Yt,Xt,Qt,Zt,Fn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:Le,block:Ve,inline:Ve};if(n.has(Le)&&(i.behavior=Le),n.has(Ke)&&(i.behavior=Ke),n.has(Je)&&(i.behavior=Je),n.has(jt)&&(i.inline=en),n.has(Kt)&&(i.inline=Ve),n.has(Jt)&&(i.inline=tn),n.has(zt)&&(i.inline=nn),n.has(Yt)&&(i.block=en),n.has(Xt)&&(i.block=Ve),n.has(Qt)&&(i.block=tn),n.has(Zt)&&(i.block=nn),!(e instanceof HTMLElement||e instanceof SVGElement))throw N("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var on="none",sn="display",an={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===on&&t.removeProperty(sn):t.setProperty(sn,on)})}};var ln="view-transition",un={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===ln&&(t=!0);if(!t){let e=document.createElement("meta");e.name=ln,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!z){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let a=e.style;a.viewTransitionName=i})}};var cn={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let a=i();for(let[u,o]of Object.entries(a))o===!1?t.removeAttribute(u):t.setAttribute(u,o)}):(e=ue(e),n(async()=>{let a=!1;try{a=i()}catch{}let u;typeof a=="string"?u=a:u=JSON.stringify(a),!u||u==="false"||u==="null"||u==="undefined"?t.removeAttribute(e):t.setAttribute(e,u)}))}};var qn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,fn=["change","input","keydown"],dn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:a,effect:u}=t,o=n?V(n,r):J(a),h=e.tagName.toLowerCase(),T="",v=h.includes("input"),w=e.getAttribute("type"),b=h.includes("checkbox")||v&&w==="checkbox";b&&(T=!1),v&&w==="number"&&(T=0);let y=h.includes("select"),E=h.includes("radio")||v&&w==="radio",R=v&&w==="file";E&&(e.getAttribute("name")?.length||e.setAttribute("name",o));let g=()=>{let m="value"in e,p=i.value(o),f=`${p}`;if(b||E){let S=e;Array.isArray(p)?S.checked=p.includes(S.value):typeof p=="boolean"?S.checked=!!p:S.checked=f===S.value}else if(y){let S=e;if(S.multiple)for(let _ of S.options){if(_?.disabled)return;Array.isArray(p)||typeof p=="string"?_.selected=p.includes(_.value):typeof p=="number"?_.selected=p===Number(_.value):_.selected=p}else S.value=f}else R||(m?e.value=f:e.setAttribute("value",f))},s=async()=>{if(R){let S=[...e?.files||[]],_=[],x=[],I=[];await Promise.all(S.map(F=>new Promise(L=>{let q=new FileReader;q.onload=()=>{if(typeof q.result!="string")throw N("InvalidFileResultType",t,{resultType:typeof q.result});let j=q.result.match(qn);if(!j?.groups)throw N("InvalidDataUri",t,{result:q.result});_.push(j.groups.contents),x.push(j.groups.mime),I.push(F.name)},q.onloadend=()=>L(void 0),q.readAsDataURL(F)}))),i.setValue(o,_),i.setValue(`${o}Mimes`,x),i.setValue(`${o}Names`,I);return}let m=i.value(o),p=e||e,f=p.value||"";if(b){let S=p.checked||p.getAttribute("checked")==="true";if(Array.isArray(m)){let _=new Set(m);S?_.add(p.value):_.delete(p.value),i.setValue(o,[..._])}else if(p.getAttribute("value")){let x=S?f:!1;i.setValue(o,x)}else i.setValue(o,S);return}if(typeof m=="number")i.setValue(o,Number(f));else if(typeof m=="string")i.setValue(o,f||"");else if(typeof m=="boolean")i.setValue(o,!!f);else if(Array.isArray(m))if(y){let x=[...e.selectedOptions].filter(I=>I.selected).map(I=>I.value);i.setValue(o,x)}else i.setValue(o,JSON.stringify(f.split(",")));else if(!(typeof m>"u"))throw N("BindUnsupportedSignalType",t,{signalType:typeof m})},{inserted:c}=i.upsertIfMissing(o,T);c&&s();for(let m of fn)e.addEventListener(m,s);let l=m=>{m.persisted&&s()};window.addEventListener("pageshow",l);let d=u(()=>g());return()=>{d();for(let m of fn)e.removeEventListener(m,s);window.removeEventListener("pageshow",l)}}};var pn={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let a=t.classList,u=i();return r(()=>{if(e===""){let o=u();for(let[h,T]of Object.entries(o)){let v=h.split(/\s+/);T?a.add(...v):a.remove(...v)}}else e=V(e,n),u()?a.add(e):a.remove(e)})}};function he(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function ae(t,e,n=!1){return t?t.has(e.toLowerCase()):n}function mn(t,e,n=!1,r=!0){let i=-1,a=()=>i&&clearTimeout(i);return(...u)=>{a(),n&&!i&&t(...u),i=setTimeout(()=>{r&&t(...u),a()},e)}}function gn(t,e,n=!0,r=!1){let i=!1;return(...a)=>{i||(n&&t(...a),i=!0,setTimeout(()=>{i=!1,r&&t(...a)},e))}}var Wn="evt",ze="signalsChange",$n=ze.length,hn={type:1,name:"on",keyReq:1,valReq:1,argNames:[Wn],onLoad:({el:t,key:e,mods:n,rawKey:r,signals:i,value:a,effect:u,genRX:o})=>{let h=o(),T=t;n.has("window")&&(T=window);let v=g=>{g&&((n.has("prevent")||e==="submit")&&g.preventDefault(),n.has("stop")&&g.stopPropagation()),h(g)},w=n.get("delay");if(w){let g=he(w);setTimeout(()=>{v()},g)}let b=n.get("debounce");if(b){let g=he(b),s=ae(b,"leading",!1),c=!ae(b,"notrail",!1);v=mn(v,g,s,c)}let A=n.get("throttle");if(A){let g=he(A),s=!ae(A,"noleading",!1),c=ae(A,"trail",!1);v=gn(v,g,s,c)}if(n.has("viewtransition")&&z){let g=v;v=(...s)=>document.startViewTransition(()=>g(...s))}let y={capture:!0,passive:!1,once:!1};if(n.has("capture")||(y.capture=!1),n.has("passive")&&(y.passive=!0),n.has("once")&&(y.once=!0),e==="load")return setTimeout(()=>v(),0),()=>{};if(e==="interval"){let g=1e3,s=n.get("duration");s&&(g=he(s),ae(s,"leading",!1)&&(t.dataset[r.replace(".leading","")]=a,delete t.dataset[r],v()));let c=setInterval(v,g);return()=>{clearInterval(c)}}if(e==="raf"){let g,s=()=>{v(),g=requestAnimationFrame(s)};return g=requestAnimationFrame(s),()=>{g&&cancelAnimationFrame(g)}}if(e.startsWith(ze)){if(e===ze){let c=l=>v(l);return document.addEventListener(le,c),()=>{document.removeEventListener(le,c)}}let g=V(Y(e.slice($n)),n),s=new Map;return i.walk((c,l)=>{c.startsWith(g)&&s.set(l,l.value)}),u(()=>{for(let[c,l]of s)l!==c.value&&(v(),s.set(c,c.value))})}if(n.has("outside")){T=document;let g=v;v=c=>{let l=c?.target;t.contains(l)||g(c)}}let R=V(e,n);return T.addEventListener(R,v,y),()=>{T.removeEventListener(R,v)}}};var vn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let a=e?V(e,n):J(i);r.setValue(a,t)}};var yn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||N("TextInvalidElement",t),n(()=>{let a=i(t);e.textContent=`${a}`})}};var{round:Gn,max:Un,min:Bn}=Math,bn={type:3,name:"fit",fn:(t,e,n,r,i,a,u=!1,o=!1)=>{let h=(e-n)/(r-n)*(a-i)+i;return o&&(h=Gn(h)),u&&(h=Un(i,Bn(a,h))),h}};var Sn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var Tn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};Ne(cn,dn,pn,hn,vn,an,yn,Nt,Rt,wt,Mt,xt,_t,Lt,Vt,Dt,kt,Ct,Ot,Ht,$t,Ut,Bt,rn,un,bn,Sn,Tn);Be();export{Be as apply,Ne as load,vt as setAlias};
//# sourceMappingURL=datastar.js.map
