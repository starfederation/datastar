// Datastar v1.0.0-beta.3
var st=/ðŸ–•JS_DSðŸš€/.source,be=st.slice(0,5),Je=st.slice(4),$="datastar";var ot="Datastar-Request",Ne=300,at=1e3,lt="type module",Ce=!1,ut=!1,ct=!0,X={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},ft=X.Morph,U={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var _=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(_||{});var Se=`${$}-signals`;var re=t=>t.trim()==="true",Ee=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),oe=t=>Ee(t).replace(/-./g,e=>e[1].toUpperCase()),ze=t=>Ee(t).replace(/-/g,"_"),On=t=>oe(t).replace(/^./,e=>e[0].toUpperCase()),Ie=t=>new Function(`return Object.assign({}, ${t})`)(),ie=t=>t.startsWith("$")?t.slice(1):t,Fn={kebab:Ee,snake:ze,pascal:On};function q(t,e){for(let n of e.get("case")||[]){let r=Fn[n];r&&(t=r(t))}return t}var Hn="computed",dt={type:1,name:Hn,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=q(t,e);let i=r();n.setComputed(t,i)}};var pt={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:l}=t,c=n.has("ifmissing");if(e!==""&&!c){let u=q(e,n),d=i===""?i:l()();r.setValue(u,d)}else{let u=Ie(t.value);t.value=JSON.stringify(u);let g=l()();r.merge(g,c)}}};var mt={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var Te=class{#e=0;#n;constructor(e=$){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e;return this}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function gt(t){if(t.id)return t.id;let e=new Te,n=t;for(;n.parentNode;){if(n.id){e.with(n.id);break}if(n===n.ownerDocument.documentElement)e.with(n.tagName);else for(let r=1,i=t;i.previousElementSibling;i=i.previousElementSibling,r++)e.with(r);n=n.parentNode}return e.value}function ht(t,e){let n=new MutationObserver(r=>{for(let i of r)for(let l of i.removedNodes)if(l===t){n.disconnect(),e();return}});n.observe(t.parentNode,{childList:!0})}function vt(t,e){return(...n)=>{setTimeout(()=>{t(...n)},e)}}function Le(t,e,n=!1,r=!0){let i=-1,l=()=>i&&clearTimeout(i);return(...c)=>{l(),n&&!i&&t(...c),i=setTimeout(()=>{r&&t(...c),l()},e)}}function yt(t,e,n=!0,r=!1){let i=!1;return(...l)=>{i||(n&&t(...l),i=!0,setTimeout(()=>{i=!1,r&&t(...l)},e))}}var Wn="https://data-star.dev/errors";function Ye(t,e,n={}){let r=new Error;r.name=`${$} ${t} error`;let i=ze(e),l=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),c=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${Wn}/${t}/${i}?${l}
Context: ${c}`,r}function Y(t,e,n={}){return Ye("internal",e,Object.assign({from:t},n))}function j(t,e,n={}){let r={plugin:{name:e.plugin.name,type:_[e.plugin.type]}};return Ye("init",t,Object.assign(r,n))}function x(t,e,n={}){let r={plugin:{name:e.plugin.name,type:_[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Ye("runtime",t,Object.assign(r,n))}var ae="preact-signals",qn=Symbol.for("preact-signals"),Q=1,fe=2,_e=4,pe=8,De=16,de=32;function Qe(){ke++}function Ze(){if(ke>1){ke--;return}let t,e=!1;for(;Ae!==void 0;){let n=Ae;for(Ae=void 0,Xe++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~fe,!(n._flags&pe)&&St(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(Xe=0,ke--,e)throw Y(ae,"BatchError, error",{error:t})}var P;var Ae,ke=0,Xe=0,Ve=0;function bt(t){if(P===void 0)return;let e=t._node;if(e===void 0||e._target!==P)return e={_version:0,_source:t,_prevSource:P._sources,_nextSource:void 0,_target:P,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},P._sources!==void 0&&(P._sources._nextSource=e),P._sources=e,t._node=e,P._flags&de&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=P._sources,e._nextSource=void 0,P._sources._nextSource=e,P._sources=e),e}function k(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}k.prototype.brand=qn;k.prototype._refresh=()=>!0;k.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};k.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};k.prototype.subscribe=function(t){return Oe(()=>{let e=this.value,n=P;P=void 0;try{t(e)}finally{P=n}})};k.prototype.valueOf=function(){return this.value};k.prototype.toString=function(){return`${this.value}`};k.prototype.toJSON=function(){return this.value};k.prototype.peek=function(){let t=P;P=void 0;try{return this.value}finally{P=t}};Object.defineProperty(k.prototype,"value",{get(){let t=bt(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(Xe>100)throw Y(ae,"SignalCycleDetected");this._value=t,this._version++,Ve++,Qe();try{for(let e=this._targets;e!==void 0;e=e._nextTarget)e._target._notify()}finally{Ze()}}}});function St(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function Et(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function Tt(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function le(t){k.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=Ve-1,this._flags=_e}le.prototype=new k;le.prototype._refresh=function(){if(this._flags&=~fe,this._flags&Q)return!1;if((this._flags&(_e|de))===de||(this._flags&=~_e,this._globalVersion===Ve))return!0;if(this._globalVersion=Ve,this._flags|=Q,this._version>0&&!St(this))return this._flags&=~Q,!0;let t=P;try{Et(this),P=this;let e=this._fn();(this._flags&De||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~De,this._version++)}catch(e){this._value=e,this._flags|=De,this._version++}return P=t,Tt(this),this._flags&=~Q,!0};le.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=_e|de;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}k.prototype._subscribe.call(this,t)};le.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(k.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~de;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};le.prototype._notify=function(){if(!(this._flags&fe)){this._flags|=_e|fe;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(le.prototype,"value",{get(){if(this._flags&Q)throw Y(ae,"SignalCycleDetected");let t=bt(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&De)throw Y(ae,"GetComputedError",{value:this._value});return this._value}});function At(t){return new le(t)}function _t(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){Qe();let n=P;P=void 0;try{e()}catch(r){throw t._flags&=~Q,t._flags|=pe,et(t),Y(ae,"CleanupEffectError",{error:r})}finally{P=n,Ze()}}}function et(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,_t(t)}function $n(t){if(P!==this)throw Y(ae,"EndEffectError");Tt(this),P=t,this._flags&=~Q,this._flags&pe&&et(this),Ze()}function Re(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=de}Re.prototype._callback=function(){let t=this._start();try{if(this._flags&pe||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};Re.prototype._start=function(){if(this._flags&Q)throw Y(ae,"SignalCycleDetected");this._flags|=Q,this._flags&=~pe,_t(this),Et(this),Qe();let t=P;return P=this,$n.bind(this,t)};Re.prototype._notify=function(){this._flags&fe||(this._flags|=fe,this._nextBatchedEffect=Ae,Ae=this)};Re.prototype._dispose=function(){this._flags|=pe,this._flags&Q||et(this)};function Oe(t){let e=new Re(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var Rt="namespacedSignals",Fe=t=>{document.dispatchEvent(new CustomEvent(Se,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function wt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof k?n[r]=i.value:n[r]=wt(i)}return n}function xt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw Y(Rt,"InvalidSignalKey",{key:i});let l=e[i];if(l instanceof Object&&!Array.isArray(l)){t[i]||(t[i]={});let c=xt(t[i],l,n);r.added.push(...c.added.map(u=>`${i}.${u}`)),r.removed.push(...c.removed.map(u=>`${i}.${u}`)),r.updated.push(...c.updated.map(u=>`${i}.${u}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let u=t[i];if(u instanceof k){let d=u.value;u.value=l,d!==l&&r.updated.push(i);continue}}t[i]=new k(l),r.added.push(i)}}return r}function Pt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof k?e(n,r):Pt(r,(i,l)=>{e(`${n}.${i}`,l)})}}function Un(t,...e){let n={};for(let r of e){let i=r.split("."),l=t,c=n;for(let d=0;d<i.length-1;d++){let g=i[d];if(!l[g])return{};c[g]||(c[g]={}),l=l[g],c=c[g]}let u=i[i.length-1];c[u]=l[u]}return n}var He=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let c=0;c<n.length-1;c++){let u=n[c];if(!r[u])return null;r=r[u]}let i=n[n.length-1],l=r[i];if(!l)throw Y(Rt,"SignalNotFound",{path:e});return l}setSignal(e,n){let r=e.split("."),i=this.#e;for(let c=0;c<r.length-1;c++){let u=r[c];i[u]||(i[u]={}),i=i[u]}let l=r[r.length-1];i[l]=n}setComputed(e,n){let r=At(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let r=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&Fe({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let d=0;d<r.length-1;d++){let g=r[d];i[g]||(i[g]={}),i=i[g]}let l=r[r.length-1],c=i[l];if(c instanceof k)return c;let u=new k(n);return i[l]=u,Fe({added:[e]}),u}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),l=this.#e;for(let u=0;u<i.length-1;u++){let d=i[u];if(!l[d])return;l=l[d]}let c=i[i.length-1];delete l[c],n.push(r)}Fe({removed:n})}merge(e,n=!1){let r=xt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&Fe(r)}subset(...e){return Un(this.values(),...e)}walk(e){Pt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return wt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var Mt=(t,e)=>`${t}${be}${e}`,We=class{constructor(){this.aliasPrefix="";this.#e=new He;this.#n=[];this.#r={};this.#a=[];this.#t=new Map;this.#l=Le(()=>{this.#s(document.body)},1);let e="data-";new MutationObserver(r=>{for(let{target:i,type:l,attributeName:c,oldValue:u,addedNodes:d,removedNodes:g}of r)switch(l){case"childList":{for(let v of g){let S=v,y=this.#t.get(S);if(y){for(let[E,h]of y)h();this.#t.delete(S)}}for(let v of d){let S=v;this.#s(S)}}break;case"attributes":{{let v=e+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!c?.startsWith(v))break;let S=i,y=oe(c.slice(e.length));if(u!==null&&S.dataset[y]!==u){let E=this.#t.get(S);if(E){let h=Mt(y,u),b=E.get(h);b&&(b(),E.delete(h))}}y in S.dataset&&this.#i(S,y)}break}}}).observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0})}#e;#n;#r;#a;#t;get signals(){return this.#e}load(...e){for(let n of e){let r=this,i={get signals(){return r.#e},effect:c=>Oe(c),actions:this.#r,plugin:n,applyAttributePlugin:r.#i.bind(r)},l;switch(n.type){case 2:{let c=n;this.#a.push(c),l=c.onGlobalInit;break}case 3:{this.#r[n.name]=n;break}case 1:{let c=n;this.#n.push(c),l=c.onGlobalInit;break}default:throw j("InvalidPluginType",i)}l&&l(i)}this.#n.sort((n,r)=>{let i=r.name.length-n.name.length;return i!==0?i:n.name.localeCompare(r.name)}),this.#l()}#l;#s(e){this.#o(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#i(e,n){let r=n.slice(this.aliasPrefix.length),i=this.#n.find(w=>r.startsWith(w.name));if(!i)return;let l=this.#t.get(e);if(l)for(let[w,I]of l)w.startsWith(n)&&(I(),l.delete(w));e.id.length||(e.id=gt(e));let[c,...u]=r.slice(i.name.length).split(/\_\_+/),d=c.length>0;d&&(c=oe(c));let g=e.dataset[n]||"",v=g.length>0,S=this,y={get signals(){return S.#e},applyAttributePlugin:S.#i.bind(S),effect:w=>Oe(w),actions:this.#r,genRX:()=>this.#u(y,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:c,value:g,mods:new Map},E=i.keyReq||0;if(d){if(E===2)throw x(`${i.name}KeyNotAllowed`,y)}else if(E===1)throw x(`${i.name}KeyRequired`,y);let h=i.valReq||0;if(v){if(h===2)throw x(`${i.name}ValueNotAllowed`,y)}else if(h===1)throw x(`${i.name}ValueRequired`,y);if(E===3||h===3){if(d&&v)throw x(`${i.name}KeyAndValueProvided`,y);if(!d&&!v)throw x(`${i.name}KeyOrValueRequired`,y)}for(let w of u){let[I,...F]=w.split(".");y.mods.set(oe(I),new Set(F.map(J=>J.toLowerCase())))}let b=i.onLoad(y);if(b){let w=this.#t.get(e);w||(w=new Map,this.#t.set(e,w)),w.set(Mt(n,g),b)}let M=i.removeOnLoad;M&&M(r)===!0&&delete e.dataset[n]}#u(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,l=e.value.trim().match(i);if(l){let h=l.length-1,b=l[h].trim();b.startsWith("return")||(l[h]=`return (${b});`),r=l.join(`;
`)}let c=new Map,u=new RegExp(`(?:${be})(.*?)(?:${Je})`,"gm");for(let h of r.matchAll(u)){let b=h[1],M=new Te("dsEscaped").with(b).value;c.set(M,b),r=r.replace(be+b+Je,M)}let d=/@(\w*)\(/gm,g=r.matchAll(d),v=new Set;for(let h of g)v.add(h[1]);let S=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(S,"ctx.actions.$1.fn(ctx,");let y=e.signals.paths();if(y.length){let h=new RegExp(`\\$(${y.join("|")})(\\W|$)`,"gm");r=r.replaceAll(h,"ctx.signals.signal('$1').value$2")}for(let[h,b]of c)r=r.replace(h,b);let E=`return (()=> {
${r}
})()`;e.fnContent=E;try{let h=new Function("ctx",...n,E);return(...b)=>{try{return h(e,...b)}catch(M){throw x("ExecuteExpression",e,{error:M.message})}}}catch(h){throw x("GenerateExpression",e,{error:h.message})}}#o(e,n){if(!e||!(e instanceof HTMLElement||e instanceof SVGElement))return null;let r=e.dataset;if("starIgnore"in r)return null;"starIgnore__self"in r||n(e);let i=e.firstElementChild;for(;i;)this.#o(i,n),i=i.nextElementSibling}};var Nt=new We;Nt.load(mt,pt,dt);var qe=Nt;async function Gn(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function Bn(t){let e,n,r,i=!1;return function(c){e===void 0?(e=c,n=0,r=-1):e=Kn(e,c);let u=e.length,d=0;for(;n<u;){i&&(e[n]===10&&(d=++n),i=!1);let g=-1;for(;n<u&&g===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-d);break;case 13:i=!0;case 10:g=n;break}if(g===-1)break;t(e.subarray(d,g),r),d=n,r=-1}d===u?e=void 0:d!==0&&(e=e.subarray(d),n-=d)}}function jn(t,e,n){let r=Ct(),i=new TextDecoder;return function(c,u){if(c.length===0)n?.(r),r=Ct();else if(u>0){let d=i.decode(c.subarray(0,u)),g=u+(c[u+1]===32?2:1),v=i.decode(c.subarray(g));switch(d){case"data":r.data=r.data?`${r.data}
${v}`:v;break;case"event":r.event=v;break;case"id":t(r.id=v);break;case"retry":{let S=Number.parseInt(v,10);Number.isNaN(S)||e(r.retry=S);break}}}}}function Kn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Ct(){return{data:"",event:"",id:"",retry:void 0}}var Jn="text/event-stream",It="last-event-id";function Lt(t,e,{signal:n,headers:r,onopen:i,onmessage:l,onclose:c,onerror:u,openWhenHidden:d,fetch:g,retryInterval:v=1e3,retryScaler:S=2,retryMaxWaitMs:y=3e4,retryMaxCount:E=10,...h}){return new Promise((b,M)=>{let w=0,I={...r};I.accept||(I.accept=Jn);let F;function J(){F.abort(),document.hidden||L()}d||document.addEventListener("visibilitychange",J);let N=0;function R(){document.removeEventListener("visibilitychange",J),window.clearTimeout(N),F.abort()}n?.addEventListener("abort",()=>{R(),b()});let C=g??window.fetch,T=i??function(){};async function L(){F=new AbortController;try{let D=await C(e,{...h,headers:I,signal:F.signal});await T(D),await Gn(D.body,Bn(jn(V=>{V?I[It]=V:delete I[It]},V=>{v=V},l))),c?.(),R(),b()}catch(D){if(!F.signal.aborted)try{let V=u?.(D)??v;window.clearTimeout(N),N=window.setTimeout(L,V),v*=S,v=Math.min(v,y),w++,w>=E?(R(),M(x("SseMaxRetries",t,{retryMaxCount:E}))):console.error(`Datastar failed to reach ${h.method}: ${e.toString()} retry in ${V}ms`)}catch(V){R(),M(V)}}}L()})}var me=`${$}-sse`,tt=`${$}-settling`,ue=`${$}-swapping`,$e="started",Ue="finished",Dt="error",kt="retrying";function Z(t,e){document.addEventListener(me,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function we(t,e){document.dispatchEvent(new CustomEvent(me,{detail:{type:t,argsRaw:e}}))}var Vt=t=>`${t}`.includes("text/event-stream"),ee=async(t,e,n,r)=>{let{el:{id:i},el:l,signals:c}=t,{headers:u,contentType:d,includeLocal:g,selector:v,openWhenHidden:S,retryInterval:y,retryScaler:E,retryMaxWaitMs:h,retryMaxCount:b,abort:M}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:at,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),w=e.toLowerCase(),I=()=>{};try{if(we($e,{elId:i}),!n?.length)throw x("SseNoUrlProvided",t,{action:w});let F={};F[ot]=!0,d==="json"&&(F["Content-Type"]="application/json");let J=Object.assign({},F,u),N={method:e,headers:J,openWhenHidden:S,retryInterval:y,retryScaler:E,retryMaxWaitMs:h,retryMaxCount:b,signal:M,onopen:async T=>{if(T.status>=400){let L=T.status.toString();we(Dt,{status:L})}},onmessage:T=>{if(!T.event.startsWith($))return;let L=T.event,D={},V=T.data.split(`
`);for(let H of V){let z=H.indexOf(" "),Me=H.slice(0,z),ce=D[Me];ce||(ce=[],D[Me]=ce);let ne=H.slice(z+1).trim();ce.push(ne)}let te={};for(let[H,z]of Object.entries(D))te[H]=z.join(`
`);we(L,te)},onerror:T=>{if(Vt(T))throw x("InvalidContentType",t,{url:n});T&&(console.error(T.message),we(kt,{message:T.message}))}},R=new URL(n,window.location.origin),C=new URLSearchParams(R.search);if(d==="json"){let T=c.JSON(!1,!g);e==="GET"?C.set($,T):N.body=T}else if(d==="form"){let T=v?document.querySelector(v):l.closest("form");if(T===null)throw v?x("SseFormNotFound",t,{action:w,selector:v}):x("SseClosestFormNotFound",t,{action:w});if(l!==T){let D=V=>V.preventDefault();T.addEventListener("submit",D),I=()=>T.removeEventListener("submit",D)}if(!T.checkValidity()){T.reportValidity(),I();return}let L=new FormData(T);if(e==="GET"){let D=new URLSearchParams(L);for(let[V,te]of D)C.set(V,te)}else N.body=L}else throw x("SseInvalidContentType",t,{action:w,contentType:d});R.search=C.toString();try{await Lt(t,R.toString(),N)}catch(T){if(!Vt(T))throw x("SseFetchFailed",t,{method:e,url:n,error:T})}}finally{we(Ue,{elId:i}),I()}};var Ot={type:3,name:"delete",fn:async(t,e,n)=>ee(t,"DELETE",e,{...n})};var Ft={type:3,name:"get",fn:async(t,e,n)=>ee(t,"GET",e,{...n})};var Ht={type:3,name:"patch",fn:async(t,e,n)=>ee(t,"PATCH",e,{...n})};var Wt={type:3,name:"post",fn:async(t,e,n)=>ee(t,"POST",e,{...n})};var qt={type:3,name:"put",fn:async(t,e,n)=>ee(t,"PUT",e,{...n})};var $t={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let l=e?q(e,n):ie(i),c=r.upsertIfMissing(l,!1),u=d=>{let{type:g,argsRaw:{elId:v}}=d.detail;if(v===t.id)switch(g){case $e:c.value=!0;break;case Ue:c.value=!1;break}};return document.addEventListener(me,u),()=>{document.removeEventListener(me,u)}}};var Ut={type:2,name:U.ExecuteScript,onGlobalInit:async t=>{Z(U.ExecuteScript,({autoRemove:e=`${ct}`,attributes:n=lt,script:r})=>{let i=re(e);if(!r?.length)throw j("NoScriptProvided",t);let l=document.createElement("script");for(let c of n.split(`
`)){let u=c.indexOf(" "),d=u?c.slice(0,u):c,g=u?c.slice(u):"";l.setAttribute(d.trim(),g.trim())}l.text=r,document.head.appendChild(l),i&&l.remove()})}};var xe=document,ge=!!xe.startViewTransition;var Gt=function(){"use strict";let t=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E,beforeNodePantried:E},head:{style:"merge",shouldPreserve:function(s){return s.getAttribute("im-preserve")==="true"},shouldReAppend:function(s){return s.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function n(s,o,a={}){s instanceof Document&&(s=s.documentElement),typeof o=="string"&&(o=C(o));let f=T(o),p=b(s,f,a);return r(s,f,p)}function r(s,o,a){if(a.head.block){let f=s.querySelector("head"),p=o.querySelector("head");if(f&&p){let m=S(p,f,a);Promise.all(m).then(function(){r(s,o,Object.assign(a,{head:{block:!1,ignore:!0}}))});return}}if(a.morphStyle==="innerHTML")return c(o,s,a),a.config.twoPass&&z(s,a),Array.from(s.children);if(a.morphStyle==="outerHTML"||a.morphStyle==null){let f=D(o,s,a),p=f?.previousSibling??null,m=f?.nextSibling??null,A=l(s,f,a);if(f){if(A){let W=L(p,A,m);return a.config.twoPass&&z(A.parentNode,a),W}}else return[]}else throw"Do not understand how to morph style "+a.morphStyle}function i(s,o){return!!o.ignoreActiveValue&&s===document.activeElement&&s!==document.body}function l(s,o,a){return a.ignoreActive&&s===document.activeElement?null:o==null?a.callbacks.beforeNodeRemoved(s)===!1?s:(s.parentNode?.removeChild(s),a.callbacks.afterNodeRemoved(s),null):I(s,o)?(a.callbacks.beforeNodeMorphed(s,o)===!1||(s instanceof HTMLHeadElement&&a.head.ignore||(s instanceof HTMLHeadElement&&a.head.style!=="morph"?S(o,s,a):(d(o,s,a),i(s,a)||c(o,s,a))),a.callbacks.afterNodeMorphed(s,o)),s):a.callbacks.beforeNodeRemoved(s)===!1||a.callbacks.beforeNodeAdded(o)===!1?s:(s.parentNode?.replaceChild(o,s),a.callbacks.afterNodeAdded(o),a.callbacks.afterNodeRemoved(s),o)}function c(s,o,a){s instanceof HTMLTemplateElement&&o instanceof HTMLTemplateElement&&(s=s.content,o=o.content);let f=s.firstChild,p=o.firstChild,m;for(;f;){if(m=f,f=m.nextSibling,p==null){if(a.config.twoPass&&a.persistentIds.has(m.id))o.appendChild(m);else{if(a.callbacks.beforeNodeAdded(m)===!1)continue;o.appendChild(m),a.callbacks.afterNodeAdded(m)}ne(a,m);continue}if(w(m,p,a)){l(p,m,a),p=p.nextSibling,ne(a,m);continue}let A=J(s,o,m,p,a);if(A){p=F(p,A,a),l(A,m,a),ne(a,m);continue}let W=N(s,o,m,p,a);if(W){p=F(p,W,a),l(W,m,a),ne(a,m);continue}if(a.config.twoPass&&a.persistentIds.has(m.id))o.insertBefore(m,p);else{if(a.callbacks.beforeNodeAdded(m)===!1)continue;o.insertBefore(m,p),a.callbacks.afterNodeAdded(m)}ne(a,m)}for(;p!==null;){let A=p;p=p.nextSibling,te(A,a)}}function u(s,o,a,f){return s==="value"&&f.ignoreActiveValue&&o===document.activeElement?!0:f.callbacks.beforeAttributeUpdated(s,o,a)===!1}function d(s,o,a){let f=s.nodeType;if(f===1){let p=s,m=o,A=p.attributes,W=m.attributes;for(let B of A)u(B.name,m,"update",a)||m.getAttribute(B.name)!==B.value&&m.setAttribute(B.name,B.value);for(let B=W.length-1;0<=B;B--){let se=W[B];if(se&&!p.hasAttribute(se.name)){if(u(se.name,m,"remove",a))continue;m.removeAttribute(se.name)}}}(f===8||f===3)&&o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue),i(o,a)||v(s,o,a)}function g(s,o,a,f){if(!(s instanceof Element&&o instanceof Element))return;let p=s[a],m=o[a];if(p!==m){let A=u(a,o,"update",f);A||(o[a]=s[a]),p?A||o.setAttribute(a,p):u(a,o,"remove",f)||o.removeAttribute(a)}}function v(s,o,a){if(s instanceof HTMLInputElement&&o instanceof HTMLInputElement&&s.type!=="file"){let f=s.value,p=o.value;g(s,o,"checked",a),g(s,o,"disabled",a),s.hasAttribute("value")?f!==p&&(u("value",o,"update",a)||(o.setAttribute("value",f),o.value=f)):u("value",o,"remove",a)||(o.value="",o.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&o instanceof HTMLOptionElement)g(s,o,"selected",a);else if(s instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement){let f=s.value,p=o.value;if(u("value",o,"update",a))return;f!==p&&(o.value=f),o.firstChild&&o.firstChild.nodeValue!==f&&(o.firstChild.nodeValue=f)}}function S(s,o,a){let f=[],p=[],m=[],A=[],W=a.head.style,B=new Map;for(let O of s.children)B.set(O.outerHTML,O);for(let O of o.children){let K=B.has(O.outerHTML),ye=a.head.shouldReAppend(O),Ke=a.head.shouldPreserve(O);K||Ke?ye?p.push(O):(B.delete(O.outerHTML),m.push(O)):W==="append"?ye&&(p.push(O),A.push(O)):a.head.shouldRemove(O)!==!1&&p.push(O)}A.push(...B.values()),y("to append: ",A);let se=[];for(let O of A){y("adding: ",O);let K=document.createRange().createContextualFragment(O.outerHTML).firstChild;if(y(K),a.callbacks.beforeNodeAdded(K)!==!1){if("href"in K&&K.href||"src"in K&&K.src){let ye,Ke=new Promise(function(Vn){ye=Vn});K.addEventListener("load",function(){ye()}),se.push(Ke)}o.appendChild(K),a.callbacks.afterNodeAdded(K),f.push(K)}}for(let O of p)a.callbacks.beforeNodeRemoved(O)!==!1&&(o.removeChild(O),a.callbacks.afterNodeRemoved(O));return a.head.afterHeadMorphed(o,{added:f,kept:m,removed:p}),se}function y(...s){}function E(){}function h(s){let o=Object.assign({},e);return Object.assign(o,s),o.callbacks=Object.assign({},e.callbacks,s.callbacks),o.head=Object.assign({},e.head,s.head),o}function b(s,o,a){let f=h(a);return{target:s,newContent:o,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:Dn(s,o),deadIds:new Set,persistentIds:f.twoPass?kn(s,o):new Set,pantry:f.twoPass?M():document.createElement("div"),callbacks:f.callbacks,head:f.head}}function M(){let s=document.createElement("div");return s.hidden=!0,document.body.insertAdjacentElement("afterend",s),s}function w(s,o,a){return s==null||o==null?!1:s instanceof Element&&o instanceof Element&&s.tagName===o.tagName?s.id!==""&&s.id===o.id?!0:ve(a,s,o)>0:!1}function I(s,o){return s==null||o==null||s.id&&s.id!==o.id?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName}function F(s,o,a){let f=s;for(;f!==o;){let p=f;f=p.nextSibling,te(p,a)}return ne(a,o),o.nextSibling}function J(s,o,a,f,p){let m=ve(p,a,o),A=null;if(m>0){A=f;let W=0;for(;A!=null;){if(w(a,A,p))return A;if(W+=ve(p,A,s),W>m)return null;A=A.nextSibling}}return A}function N(s,o,a,f,p){let m=f,A=a.nextSibling,W=0;for(;m!=null;){if(ve(p,m,s)>0)return null;if(I(m,a))return m;if(I(m,A)&&(W++,A=A.nextSibling,W>=2))return null;m=m.nextSibling}return m}let R=new WeakSet;function C(s){let o=new DOMParser,a=s.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(a.match(/<\/html>/)||a.match(/<\/head>/)||a.match(/<\/body>/)){let f=o.parseFromString(s,"text/html");if(a.match(/<\/html>/))return R.add(f),f;{let p=f.firstChild;return p?(R.add(p),p):null}}else{let p=o.parseFromString("<body><template>"+s+"</template></body>","text/html").body.querySelector("template").content;return R.add(p),p}}function T(s){if(s==null)return document.createElement("div");if(R.has(s))return s;if(s instanceof Node){let o=document.createElement("div");return o.append(s),o}else{let o=document.createElement("div");for(let a of[...s])o.append(a);return o}}function L(s,o,a){let f=[],p=[];for(;s!=null;)f.push(s),s=s.previousSibling;let m=f.pop();for(;m!==void 0;)p.push(m),o.parentElement?.insertBefore(m,o),m=f.pop();for(p.push(o);a!=null;)f.push(a),p.push(a),a=a.nextSibling;for(;f.length>0;){let A=f.pop();o.parentElement?.insertBefore(A,o.nextSibling)}return p}function D(s,o,a){let f;f=s.firstChild;let p=f,m=0;for(;f;){let A=V(f,o,a);A>m&&(p=f,m=A),f=f.nextSibling}return p}function V(s,o,a){return I(o,s)?.5+ve(a,s,o):0}function te(s,o){if(ne(o,s),o.config.twoPass&&Ln(o,s)&&s instanceof Element)H(s,o);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function H(s,o){if(o.callbacks.beforeNodePantried(s)!==!1)if(Array.from(s.childNodes).forEach(a=>{H(a,o)}),o.persistentIds.has(s.id))o.pantry.moveBefore?o.pantry.moveBefore(s,null):o.pantry.insertBefore(s,null);else{if(o.callbacks.beforeNodeRemoved(s)===!1)return;s.parentNode?.removeChild(s),o.callbacks.afterNodeRemoved(s)}}function z(s,o){s instanceof Element&&(Array.from(o.pantry.children).reverse().forEach(a=>{let f=s.querySelector(`#${a.id}`);if(f){if(f.parentElement?.moveBefore)for(f.parentElement.moveBefore(a,f);f.hasChildNodes();)a.moveBefore(f.firstChild,null);else for(f.before(a);f.firstChild;)a.insertBefore(f.firstChild,null);o.callbacks.beforeNodeMorphed(a,f)!==!1&&(d(f,a,o),o.callbacks.afterNodeMorphed(a,f)),f.remove()}}),o.pantry.remove())}function Me(s,o){return!s.deadIds.has(o)}function ce(s,o,a){return(s.idMap.get(a)||t).has(o)}function ne(s,o){let a=s.idMap.get(o)||t;for(let f of a)s.deadIds.add(f)}function Ln(s,o){for(let a of s.idMap.get(o)||t)if(s.persistentIds.has(a))return!0;return!1}function ve(s,o,a){let f=s.idMap.get(o)||t,p=0;for(let m of f)Me(s,m)&&ce(s,m,a)&&++p;return p}function je(s){let o=Array.from(s.querySelectorAll("[id]"));return s.id&&o.push(s),o}function it(s,o){let a=s.parentElement;for(let f of je(s)){let p=f;for(;p!==a&&p!=null;){let m=o.get(p);m==null&&(m=new Set,o.set(p,m)),m.add(f.id),p=p.parentElement}}}function Dn(s,o){let a=new Map;return it(s,a),it(o,a),a}function kn(s,o){let a=m=>m.tagName+"#"+m.id,f=new Set(je(s).map(a)),p=new Set;for(let m of je(o))f.has(a(m))&&p.add(m.id);return p}return{morph:n,defaults:e}}();var jt={type:2,name:U.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");Z(U.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=ft,settleDuration:l=`${Ne}`,useViewTransition:c=`${Ce}`})=>{let u=Number.parseInt(l),d=re(c);e.innerHTML=n.trim();let g=[...e.content.children];for(let v of g){if(!(v instanceof Element))throw j("NoFragmentsFound",t);let S=r||`#${v.getAttribute("id")}`,y=[...document.querySelectorAll(S)||[]];if(!y.length)throw j("NoTargetsFound",t,{selectorOrID:S});ge&&d?xe.startViewTransition(()=>Bt(t,i,u,v,y)):Bt(t,i,u,v,y)}})}};function Bt(t,e,n,r,i){for(let l of i){l.classList.add(ue);let c=l.outerHTML,u=l;switch(e){case X.Morph:{let v=new Map,S=Gt.morph(u,r,{callbacks:{beforeAttributeUpdated:(y,E,h)=>{if(h==="update"&&y.startsWith("data-")){let b=v.get(E);b||(b=[],v.set(E,b));let M=y.slice(5);b.push(oe(M))}return!0}}});if(!S?.length)throw j("MorphFailed",t);u=S[0];for(let[y,E]of v.entries())for(let h of E)t.applyAttributePlugin(y,h);break}case X.Inner:u.innerHTML=r.outerHTML;break;case X.Outer:u.replaceWith(r);break;case X.Prepend:u.prepend(r);break;case X.Append:u.append(r);break;case X.Before:u.before(r);break;case X.After:u.after(r);break;case X.UpsertAttributes:for(let v of r.getAttributeNames()){let S=r.getAttribute(v);u.setAttribute(v,S)}break;default:throw j("InvalidMergeMode",t,{mergeMode:e})}let d=u.classList;d.add(ue),setTimeout(()=>{l.classList.remove(ue),d.remove(ue)},n);let g=u.outerHTML;c!==g&&(d.add(tt),setTimeout(()=>{d.remove(tt)},n))}}var Kt={type:2,name:U.MergeSignals,onGlobalInit:async t=>{Z(U.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${ut}`})=>{let{signals:r}=t,i=re(n);r.merge(Ie(e),i)})}};var Jt={type:2,name:U.RemoveFragments,onGlobalInit:async t=>{Z(U.RemoveFragments,({selector:e,settleDuration:n=`${Ne}`,useViewTransition:r=`${Ce}`})=>{if(!e.length)throw j("NoSelectorProvided",t);let i=Number.parseInt(n),l=re(r),c=document.querySelectorAll(e),u=()=>{for(let d of c)d.classList.add(ue);setTimeout(()=>{for(let d of c)d.remove()},i)};ge&&l?xe.startViewTransition(()=>u()):u()})}};var zt={type:2,name:U.RemoveSignals,onGlobalInit:async t=>{Z(U.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw j("NoPathsProvided",t);t.signals.remove(...n)})}};var Yt={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw x("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Xt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw x("CustomValidityInvalidElement",t);let i=n();return r(()=>{let l=i();if(typeof l!="string")throw x("CustomValidityInvalidExpression",t,{result:l});e.setCustomValidity(l)})}};var Qt="once",Zt="half",en="full",tn={type:1,name:"intersects",keyReq:2,mods:new Set([Qt,Zt,en]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(en)?i.threshold=1:n.has(Zt)&&(i.threshold=.5);let l=r(),c=new IntersectionObserver(u=>{for(let d of u)d.isIntersecting&&(l(),n.has(Qt)&&(c.disconnect(),delete t.dataset[e]))},i);return c.observe(t),()=>c.disconnect()}};var nn="session",rn={type:1,name:"persist",mods:new Set([nn]),onLoad:({key:t,effect:e,mods:n,signals:r,value:i})=>{t=q(t,n),t===""&&(t=$);let l=n.has(nn)?sessionStorage:localStorage,c=i.split(/\s+/).filter(g=>g!=="");c=c.map(g=>ie(g));let u=()=>{let g=l.getItem(t)||"{}",v=JSON.parse(g);r.merge(v)},d=()=>{let g;c.length?g=r.subset(...c):g=r.values(),l.setItem(t,JSON.stringify(g))};return u(),e(()=>{d()})}};var sn={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,l=new URL(r,i).toString();window.history.replaceState({},"",l)})}};var Ge="smooth",nt="instant",rt="auto",on="hstart",an="hcenter",ln="hend",un="hnearest",cn="vstart",fn="vcenter",dn="vend",pn="vnearest",zn="focus",Be="center",mn="start",gn="end",hn="nearest",vn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([Ge,nt,rt,on,an,ln,un,cn,fn,dn,pn,zn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:Ge,block:Be,inline:Be};if(n.has(Ge)&&(i.behavior=Ge),n.has(nt)&&(i.behavior=nt),n.has(rt)&&(i.behavior=rt),n.has(on)&&(i.inline=mn),n.has(an)&&(i.inline=Be),n.has(ln)&&(i.inline=gn),n.has(un)&&(i.inline=hn),n.has(cn)&&(i.block=mn),n.has(fn)&&(i.block=Be),n.has(dn)&&(i.block=gn),n.has(pn)&&(i.block=hn),!(e instanceof HTMLElement||e instanceof SVGElement))throw x("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var yn="none",bn="display",Sn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===yn&&t.removeProperty(bn):t.setProperty(bn,yn)})}};var En="view-transition",Tn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===En&&(t=!0);if(!t){let e=document.createElement("meta");e.name=En,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!ge){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let l=e.style;l.viewTransitionName=i})}};var An={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let l=i();for(let[c,u]of Object.entries(l))t.setAttribute(c,u)}):(e=Ee(e),n(async()=>{let l=!1;try{l=i()}catch{}let c;typeof l=="string"?c=l:c=JSON.stringify(l),!c||c==="false"||c==="null"||c==="undefined"?t.removeAttribute(e):t.setAttribute(e,c)}))}};var Yn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,_n=["change","input","keydown"],Rn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:l,effect:c}=t,u=n?q(n,r):ie(l),d=()=>{},g=()=>{},v=e.tagName.toLowerCase(),S="",y=v.includes("input"),E=e.getAttribute("type"),h=v.includes("checkbox")||y&&E==="checkbox";h&&(S=!1),y&&E==="number"&&(S=0);let M=v.includes("select"),w=v.includes("radio")||y&&E==="radio",I=y&&E==="file";w&&(e.getAttribute("name")?.length||e.setAttribute("name",u)),i.upsertIfMissing(u,S),d=()=>{let N="value"in e,R=i.value(u),C=`${R}`;if(h||w){let T=e;h?T.checked=!!R||R==="true":w&&(T.checked=C===T.value)}else if(!I)if(M){let T=e;if(T.multiple)for(let L of T.options){if(L?.disabled)return;Array.isArray(R)||typeof R=="string"?L.selected=R.includes(L.value):typeof R=="number"?L.selected=R===Number(L.value):L.selected=R}else T.value=C}else N?e.value=C:e.setAttribute("value",C)},g=async()=>{if(I){let C=[...e?.files||[]],T=[],L=[],D=[];await Promise.all(C.map(V=>new Promise(te=>{let H=new FileReader;H.onload=()=>{if(typeof H.result!="string")throw x("InvalidFileResultType",t,{resultType:typeof H.result});let z=H.result.match(Yn);if(!z?.groups)throw x("InvalidDataUri",t,{result:H.result});T.push(z.groups.contents),L.push(z.groups.mime),D.push(V.name)},H.onloadend=()=>te(void 0),H.readAsDataURL(V)}))),i.setValue(u,T),i.setValue(`${u}Mimes`,L),i.setValue(`${u}Names`,D);return}let N=i.value(u),R=e||e;if(typeof N=="number"){let C=Number(R.value||R.getAttribute("value"));i.setValue(u,C)}else if(typeof N=="string"){let C=R.value||R.getAttribute("value")||"";i.setValue(u,C)}else if(typeof N=="boolean")if(h){let C=R.checked||R.getAttribute("checked")==="true";i.setValue(u,C)}else{let C=!!(R.value||R.getAttribute("value"));i.setValue(u,C)}else if(!(typeof N>"u"))if(Array.isArray(N))if(M){let L=[...e.selectedOptions].filter(D=>D.selected).map(D=>D.value);i.setValue(u,L)}else{let C=JSON.stringify(R.value.split(","));i.setValue(u,C)}else throw x("BindUnsupportedSignalType",t,{signalType:typeof N})};for(let N of _n)e.addEventListener(N,g);let F=c(()=>d()),J=N=>{N.persisted&&g()};return window.addEventListener("pageshow",J),()=>{F();for(let N of _n)e.removeEventListener(N,g);window.removeEventListener("pageshow",J)}}};var wn={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let l=t.classList,c=i();return r(()=>{if(e===""){let u=c();for(let[d,g]of Object.entries(u)){let v=d.split(/\s+/);g?l.add(...v):l.remove(...v)}}else e=q(e,n),c()?l.add(e):l.remove(e)})}};function Pe(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function he(t,e,n=!1){return t?t.has(e.toLowerCase()):n}var Xn=new Map,Qn="evt",xn={type:1,name:"on",keyReq:1,valReq:1,argNames:[Qn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,key:e,mods:n,rawKey:r,value:i,genRX:l})=>{let c=l(),u=t;n.has("window")&&(u=window);let d=h=>{h&&((n.has("prevent")||e==="submit")&&h.preventDefault(),n.has("stop")&&h.stopPropagation()),c(h)},g=n.get("delay");if(g){let h=Pe(g);d=vt(d,h)}let v=n.get("debounce");if(v){let h=Pe(v),b=he(v,"leading",!1),M=!he(v,"notrail",!1);d=Le(d,h,b,M)}let S=n.get("throttle");if(S){let h=Pe(S),b=!he(S,"noleading",!1),M=he(S,"trail",!1);d=yt(d,h,b,M)}let y={capture:!0,passive:!1,once:!1};n.has("capture")||(y.capture=!1),n.has("passive")&&(y.passive=!0),n.has("once")&&(y.once=!0);let E=q(e,n);switch(E){case"load":return d(),()=>{};case"interval":{let h=1e3,b=n.get("duration");b&&(h=Pe(b),he(b,"leading",!1)&&(t.dataset[r.replace(".leading","")]=i,delete t.dataset[r],d()));let M=setInterval(d,h);return()=>{clearInterval(M)}}case"raf":{let h,b=()=>{d(),h=requestAnimationFrame(b)};return h=requestAnimationFrame(b),()=>{h&&cancelAnimationFrame(h)}}case"signals-change":{ht(t,()=>{Xn.delete(t.id)}),d();let h=b=>{d(b)};return document.addEventListener(Se,h),()=>{document.removeEventListener(Se,h)}}default:{if(n.has("outside")){u=document;let b=d;d=w=>{let I=w?.target;t.contains(I)||b(w)}}return u.addEventListener(E,d,y),()=>{u.removeEventListener(E,d)}}}}};var Pn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let l=e?q(e,n):ie(i);return r.setValue(l,t),()=>r.setValue(l,null)}};var Mn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||x("TextInvalidElement",t),n(()=>{let l=i(t);e.textContent=`${l}`})}};var{round:Zn,max:er,min:tr}=Math,Nn={type:3,name:"fit",fn:(t,e,n,r,i,l,c=!1,u=!1)=>{let d=(e-n)/(r-n)*(l-i)+i;return u&&(d=Zn(d)),c&&(d=er(i,tr(l,d))),d}};var Cn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var In={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};qe.load(An,Rn,wn,xn,Pn,Sn,Mn,$t,Ft,Wt,qt,Ht,Ot,jt,Kt,Jt,zt,Ut,Yt,Xt,tn,rn,sn,vn,Tn,Nn,Cn,In);qe.aliasPrefix="ds";var To=qe;export{To as Datastar};
//# sourceMappingURL=datastar-aliased.js.map
