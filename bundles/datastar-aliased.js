// Datastar v1.0.0-beta.8
var ze=/ðŸ–•JS_DSðŸš€/.source,ve=ze.slice(0,5),Ve=ze.slice(4),D="datastar";var Ye="Datastar-Request",ye=300,Xe=1e3,Qe="type module",Se=!1,Ze=!1,et=!0,W={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},tt=W.Morph,k={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var w=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(w||{});var ae=`${D}-signals`;var K=t=>t.trim()==="true",le=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),Y=t=>le(t).replace(/-./g,e=>e[1].toUpperCase()),De=t=>le(t).replace(/-/g,"_"),An=t=>Y(t).replace(/^./,e=>e[0].toUpperCase()),be=t=>new Function(`return Object.assign({}, ${t})`)(),J=t=>t.startsWith("$")?t.slice(1):t,En={kebab:le,snake:De,pascal:An};function V(t,e){for(let n of e.get("case")||[]){let r=En[n];r&&(t=r(t))}return t}var _n="computed",nt={type:1,name:_n,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=V(t,e);let o=r();n.setComputed(t,o)}};var rt={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,mods:n,signals:r,value:o,genRX:s}=t,u=n.has("ifmissing");if(e!==""){let i=V(e,n),m=o===""?o:s()();u?r.upsertIfMissing(i,m):r.setValue(i,m)}else{let i=be(t.value);t.value=JSON.stringify(i);let S=s()();r.merge(S,u)}}};var ot={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var Z=class{#e=0;#t;constructor(e=D){this.#t=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else typeof e=="boolean"?this.with(1<<(e?7:3)):this.#e=this.#e*33^e;return this}get value(){return this.#e}get string(){return this.#t+Math.abs(this.#e).toString(36)}};function Te(t){if(t.id)return t.id;let e=new Z,n=t;for(;n;){if(e.with(n.tagName||""),n.id){e.with(n.id);break}let r=n?.parentNode;r&&e.with([...r.children].indexOf(n)),n=r}return e.string}function it(t,e){return new Z().with(t).with(e).value}function ue(t,e){if(!t||!(t instanceof HTMLElement||t instanceof SVGElement))return null;let n=t.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||e(t);let r=t.firstElementChild;for(;r;)ue(r,e),r=r.nextElementSibling}var xn="https://data-star.dev/errors";function ke(t,e,n={}){let r=new Error;r.name=`${D} ${t} error`;let o=De(e),s=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),u=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${xn}/${t}/${o}?${s}
Context: ${u}`,r}function $(t,e,n={}){return ke("internal",e,Object.assign({from:t},n))}function H(t,e,n={}){let r={plugin:{name:e.plugin.name,type:w[e.plugin.type]}};return ke("init",t,Object.assign(r,n))}function N(t,e,n={}){let r={plugin:{name:e.plugin.name,type:w[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return ke("runtime",t,Object.assign(r,n))}var ee="preact-signals",Rn=Symbol.for("preact-signals"),G=1,te=2,fe=4,re=8,Ae=16,ne=32;function He(){Ee++}function Fe(){if(Ee>1){Ee--;return}let t,e=!1;for(;ce!==void 0;){let n=ce;for(ce=void 0,Oe++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~te,!(n._flags&re)&&at(n))try{n._callback()}catch(o){e||(t=o,e=!0)}n=r}}if(Oe=0,Ee--,e)throw t}var C;var ce,Ee=0,Oe=0,_e=0;function st(t){if(C===void 0)return;let e=t._node;if(e===void 0||e._target!==C)return e={_version:0,_source:t,_prevSource:C._sources,_nextSource:void 0,_target:C,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},C._sources!==void 0&&(C._sources._nextSource=e),C._sources=e,t._node=e,C._flags&ne&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=C._sources,e._nextSource=void 0,C._sources._nextSource=e,C._sources=e),e}function P(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}P.prototype.brand=Rn;P.prototype._refresh=()=>!0;P.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};P.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};P.prototype.subscribe=function(t){return xe(()=>{let e=this.value,n=C;C=void 0;try{t(e)}finally{C=n}})};P.prototype.valueOf=function(){return this.value};P.prototype.toString=function(){return`${this.value}`};P.prototype.toJSON=function(){return this.value};P.prototype.peek=function(){let t=C;C=void 0;try{return this.value}finally{C=t}};Object.defineProperty(P.prototype,"value",{get(){let t=st(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(Oe>100)throw $(ee,"SignalCycleDetected");let e=this._value,n=t;this._value=t,this._version++,_e++,He();try{for(let r=this._targets;r!==void 0;r=r._nextTarget)r._target._notify()}finally{Fe()}this?._onChange({old:e,revised:n})}}});function at(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function lt(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function ut(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function X(t){P.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=_e-1,this._flags=fe}X.prototype=new P;X.prototype._refresh=function(){if(this._flags&=~te,this._flags&G)return!1;if((this._flags&(fe|ne))===ne||(this._flags&=~fe,this._globalVersion===_e))return!0;if(this._globalVersion=_e,this._flags|=G,this._version>0&&!at(this))return this._flags&=~G,!0;let t=C;try{lt(this),C=this;let e=this._fn();(this._flags&Ae||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~Ae,this._version++)}catch(e){this._value=e,this._flags|=Ae,this._version++}return C=t,ut(this),this._flags&=~G,!0};X.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=fe|ne;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}P.prototype._subscribe.call(this,t)};X.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(P.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~ne;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};X.prototype._notify=function(){if(!(this._flags&te)){this._flags|=fe|te;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(X.prototype,"value",{get(){if(this._flags&G)throw $(ee,"SignalCycleDetected");let t=st(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&Ae)throw $(ee,"GetComputedError",{value:this._value});return this._value}});function ct(t){return new X(t)}function ft(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){He();let n=C;C=void 0;try{e()}catch(r){throw t._flags&=~G,t._flags|=re,qe(t),$(ee,"CleanupEffectError",{error:r})}finally{C=n,Fe()}}}function qe(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,ft(t)}function wn(t){if(C!==this)throw $(ee,"EndEffectError");ut(this),C=t,this._flags&=~G,this._flags&re&&qe(this),Fe()}function de(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=ne}de.prototype._callback=function(){let t=this._start();try{if(this._flags&re||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};de.prototype._start=function(){if(this._flags&G)throw $(ee,"SignalCycleDetected");this._flags|=G,this._flags&=~re,ft(this),lt(this),He();let t=C;return C=this,wn.bind(this,t)};de.prototype._notify=function(){this._flags&te||(this._flags|=te,this._nextBatchedEffect=ce,ce=this)};de.prototype._dispose=function(){this._flags|=re,this._flags&G||qe(this)};function xe(t){let e=new de(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var dt="namespacedSignals",oe=t=>{document.dispatchEvent(new CustomEvent(ae,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function pt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let o=t[r];o instanceof P?n[r]=o.value:n[r]=pt(o)}return n}function mt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let o in e)if(Object.hasOwn(e,o)){if(o.match(/\_\_+/))throw $(dt,"InvalidSignalKey",{key:o});let s=e[o];if(s instanceof Object&&!Array.isArray(s)){t[o]||(t[o]={});let u=mt(t[o],s,n);r.added.push(...u.added.map(i=>`${o}.${i}`)),r.removed.push(...u.removed.map(i=>`${o}.${i}`)),r.updated.push(...u.updated.map(i=>`${o}.${i}`))}else{if(Object.hasOwn(t,o)){if(n)continue;let m=t[o];if(m instanceof P){let S=m.value;m.value=s,S!==s&&r.updated.push(o);continue}}let i=new P(s);i._onChange=()=>{oe({updated:[o]})},t[o]=i,r.added.push(o)}}return r}function gt(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof P?e(n,r):gt(r,(o,s)=>{e(`${n}.${o}`,s)})}}function Mn(t,...e){let n={};for(let r of e){let o=r.split("."),s=t,u=n;for(let m=0;m<o.length-1;m++){let S=o[m];if(!s[S])return{};u[S]||(u[S]={}),s=s[S],u=u[S]}let i=o[o.length-1];u[i]=s[i]}return n}var Re=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let u=0;u<n.length-1;u++){let i=n[u];if(!r[i])return null;r=r[i]}let o=n[n.length-1],s=r[o];if(!s)throw $(dt,"SignalNotFound",{path:e});return s}setSignal(e,n){let r=e.split("."),o=this.#e;for(let u=0;u<r.length-1;u++){let i=r[u];o[i]||(o[i]={}),o=o[i]}let s=r[r.length-1];o[s]=n}setComputed(e,n){let r=ct(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let{signal:r}=this.upsertIfMissing(e,n),o=r.value;r.value=n,o!==n&&oe({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),o=this.#e;for(let m=0;m<r.length-1;m++){let S=r[m];o[S]||(o[S]={}),o=o[S]}let s=r[r.length-1],u=o[s];if(u instanceof P)return{signal:u,inserted:!1};let i=new P(n);return i._onChange=()=>{oe({updated:[e]})},o[s]=i,oe({added:[e]}),{signal:i,inserted:!0}}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let o=r.split("."),s=this.#e;for(let i=0;i<o.length-1;i++){let m=o[i];if(!s[m])return;s=s[m]}let u=o[o.length-1];delete s[u],n.push(r)}oe({removed:n})}merge(e,n=!1){let r=mt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&oe(r)}subset(...e){return Mn(this.values(),...e)}walk(e){gt(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return pt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var ht=new Re,We=[],we={},Nn=[],$e="";function Ge(t){$e=t}var pe=new Map;function Me(...t){for(let e of t){let n={signals:ht,effect:o=>xe(o),actions:we,plugin:e,applyToElement:Ne},r;switch(e.type){case 2:{let o=e;Nn.push(o),r=o.onGlobalInit;break}case 3:{we[e.name]=e;break}case 1:{let o=e;We.push(o),r=o.onGlobalInit;break}default:throw H("InvalidPluginType",n)}r&&r(n)}We.sort((e,n)=>{let r=n.name.length-e.name.length;return r!==0?r:e.name.localeCompare(n.name)})}function Ue(){Ne(document.documentElement),Cn()}function Ne(t){ue(t,e=>{let n=new Array,r=pe.get(e)||new Map,o=new Map([...r]),s=new Map;for(let u of Object.keys(e.dataset)){if(!u.startsWith($e))break;let i=e.dataset[u]||"",m=it(u,i);s.set(u,m),r.has(m)?o.delete(m):n.push(u)}for(let[u,i]of o)i();for(let u of n){let i=s.get(u);Pn(e,u,i)}})}function Cn(){new MutationObserver(e=>{let n=new Set,r=new Set;for(let{target:o,type:s,addedNodes:u,removedNodes:i}of e)switch(s){case"childList":{for(let m of i)n.add(m);for(let m of u)r.add(m)}break;case"attributes":{r.add(o);break}}for(let o of n){let s=pe.get(o);if(s){for(let[u,i]of s)i(),s.delete(u);s.size===0&&pe.delete(o)}}for(let o of r)Ne(o)}).observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0})}function Pn(t,e,n){let r=Y(e.slice($e.length)),o=We.find(A=>r.startsWith(A.name));if(!o)return;t.id.length||(t.id=Te(t));let[s,...u]=r.slice(o.name.length).split(/\_\_+/),i=s.length>0;i&&(s=Y(s));let m=t.dataset[e]||"",S=m.length>0,v={signals:ht,applyToElement:Ne,effect:A=>xe(A),actions:we,genRX:()=>Ln(v,...o.argNames||[]),plugin:o,el:t,rawKey:r,key:s,value:m,mods:new Map},M=o.keyReq||0;if(i){if(M===2)throw N(`${o.name}KeyNotAllowed`,v)}else if(M===1)throw N(`${o.name}KeyRequired`,v);let b=o.valReq||0;if(S){if(b===2)throw N(`${o.name}ValueNotAllowed`,v)}else if(b===1)throw N(`${o.name}ValueRequired`,v);if(M===3||b===3){if(i&&S)throw N(`${o.name}KeyAndValueProvided`,v);if(!i&&!S)throw N(`${o.name}KeyOrValueRequired`,v)}for(let A of u){let[h,...a]=A.split(".");v.mods.set(Y(h),new Set(a.map(c=>c.toLowerCase())))}let _=o.onLoad(v)??(()=>{}),T=o.removeOnLoad;if(T&&T(r)===!0){delete t.dataset[e];return}let x=pe.get(t);x||(x=new Map,pe.set(t,x)),x.set(n,_)}function Ln(t,...e){let n="",r=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,o=t.value.trim().match(r);if(o){let _=o.length-1,T=o[_].trim();T.startsWith("return")||(o[_]=`return (${T});`),n=o.join(`;
`)}let s=new Map,u=new RegExp(`(?:${ve})(.*?)(?:${Ve})`,"gm");for(let _ of n.matchAll(u)){let T=_[1],x=new Z("dsEscaped").with(T).string;s.set(x,T),n=n.replace(ve+T+Ve,x)}let i=/@(\w*)\(/gm,m=n.matchAll(i),S=new Set;for(let _ of m)S.add(_[1]);let v=new RegExp(`@(${Object.keys(we).join("|")})\\(`,"gm");n=n.replaceAll(v,"ctx.actions.$1.fn(ctx,");let M=t.signals.paths();if(M.length){let _=new RegExp(`\\$(${M.join("|")})(\\W|$)`,"gm");n=n.replaceAll(_,"ctx.signals.signal('$1').value$2")}for(let[_,T]of s)n=n.replace(_,T);let b=`return (()=> {
${n}
})()`;t.fnContent=b;try{let _=new Function("ctx",...e,b);return(...T)=>{try{return _(t,...T)}catch(x){throw N("ExecuteExpression",t,{error:x.message})}}}catch(_){throw N("GenerateExpression",t,{error:_.message})}}Me(ot,rt,nt);async function In(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function Vn(t){let e,n,r,o=!1;return function(u){e===void 0?(e=u,n=0,r=-1):e=kn(e,u);let i=e.length,m=0;for(;n<i;){o&&(e[n]===10&&(m=++n),o=!1);let S=-1;for(;n<i&&S===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-m);break;case 13:o=!0;case 10:S=n;break}if(S===-1)break;t(e.subarray(m,S),r),m=n,r=-1}m===i?e=void 0:m!==0&&(e=e.subarray(m),n-=m)}}function Dn(t,e,n){let r=vt(),o=new TextDecoder;return function(u,i){if(u.length===0)n?.(r),r=vt();else if(i>0){let m=o.decode(u.subarray(0,i)),S=i+(u[i+1]===32?2:1),v=o.decode(u.subarray(S));switch(m){case"data":r.data=r.data?`${r.data}
${v}`:v;break;case"event":r.event=v;break;case"id":t(r.id=v);break;case"retry":{let M=Number.parseInt(v,10);Number.isNaN(M)||e(r.retry=M);break}}}}}function kn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function vt(){return{data:"",event:"",id:"",retry:void 0}}var On="text/event-stream",yt="last-event-id";function St(t,e,{signal:n,headers:r,onopen:o,onmessage:s,onclose:u,onerror:i,openWhenHidden:m,fetch:S,retryInterval:v=1e3,retryScaler:M=2,retryMaxWaitMs:b=3e4,retryMaxCount:_=10,...T}){return new Promise((x,A)=>{let h=0,a={...r};a.accept||(a.accept=On);let c;function l(){c.abort(),document.hidden||y()}m||document.addEventListener("visibilitychange",l);let d=0;function g(){document.removeEventListener("visibilitychange",l),window.clearTimeout(d),c.abort()}n?.addEventListener("abort",()=>{g(),x()});let p=S??window.fetch,f=o??function(){};async function y(){c=new AbortController;try{let E=await p(e,{...T,headers:a,signal:c.signal});await f(E),await In(E.body,Vn(Dn(R=>{R?a[yt]=R:delete a[yt]},R=>{v=R},s))),u?.(),g(),x()}catch(E){if(!c.signal.aborted)try{let R=i?.(E)??v;window.clearTimeout(d),d=window.setTimeout(y,R),v*=M,v=Math.min(v,b),h++,h>=_?(g(),A(N("SseMaxRetries",t,{retryMaxCount:_}))):console.error(`Datastar failed to reach ${T.method}: ${e.toString()} retry in ${R}ms`)}catch(R){g(),A(R)}}}y()})}var ie=`${D}-sse`,Be=`${D}-settling`,Q=`${D}-swapping`,Ce="started",Pe="finished",bt="error",Tt="retrying";function U(t,e){document.addEventListener(ie,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function me(t,e){document.dispatchEvent(new CustomEvent(ie,{detail:{type:t,argsRaw:e}}))}var At=t=>`${t}`.includes("text/event-stream"),B=async(t,e,n,r)=>{let{el:{id:o},el:s,signals:u}=t,{headers:i,contentType:m,includeLocal:S,selector:v,openWhenHidden:M,retryInterval:b,retryScaler:_,retryMaxWaitMs:T,retryMaxCount:x,abort:A}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:Xe,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),h=e.toLowerCase(),a=()=>{};try{if(me(Ce,{elId:o}),!n?.length)throw N("SseNoUrlProvided",t,{action:h});let c={};c[Ye]=!0,m==="json"&&(c["Content-Type"]="application/json");let l=Object.assign({},c,i),d={method:e,headers:l,openWhenHidden:M,retryInterval:b,retryScaler:_,retryMaxWaitMs:T,retryMaxCount:x,signal:A,onopen:async f=>{if(f.status>=400){let y=f.status.toString();me(bt,{status:y})}},onmessage:f=>{if(!f.event.startsWith(D))return;let y=f.event,E={},R=f.data.split(`
`);for(let F of R){let I=F.indexOf(" "),q=F.slice(0,I),j=E[q];j||(j=[],E[q]=j);let Tn=F.slice(I+1);j.push(Tn)}let L={};for(let[F,I]of Object.entries(E))L[F]=I.join(`
`);me(y,L)},onerror:f=>{if(At(f))throw N("InvalidContentType",t,{url:n});f&&(console.error(f.message),me(Tt,{message:f.message}))}},g=new URL(n,window.location.origin),p=new URLSearchParams(g.search);if(m==="json"){let f=u.JSON(!1,!S);e==="GET"?p.set(D,f):d.body=f}else if(m==="form"){let f=v?document.querySelector(v):s.closest("form");if(f===null)throw v?N("SseFormNotFound",t,{action:h,selector:v}):N("SseClosestFormNotFound",t,{action:h});if(s!==f){let E=R=>R.preventDefault();f.addEventListener("submit",E),a=()=>f.removeEventListener("submit",E)}if(!f.checkValidity()){f.reportValidity(),a();return}let y=new FormData(f);if(e==="GET"){let E=new URLSearchParams(y);for(let[R,L]of E)p.set(R,L)}else d.body=y}else throw N("SseInvalidContentType",t,{action:h,contentType:m});g.search=p.toString();try{await St(t,g.toString(),d)}catch(f){if(!At(f))throw N("SseFetchFailed",t,{method:e,url:n,error:f})}}finally{me(Pe,{elId:o}),a()}};var Et={type:3,name:"delete",fn:async(t,e,n)=>B(t,"DELETE",e,{...n})};var _t={type:3,name:"get",fn:async(t,e,n)=>B(t,"GET",e,{...n})};var xt={type:3,name:"patch",fn:async(t,e,n)=>B(t,"PATCH",e,{...n})};var Rt={type:3,name:"post",fn:async(t,e,n)=>B(t,"POST",e,{...n})};var wt={type:3,name:"put",fn:async(t,e,n)=>B(t,"PUT",e,{...n})};var Mt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:o})=>{let s=e?V(e,n):J(o),{signal:u}=r.upsertIfMissing(s,!1),i=m=>{let{type:S,argsRaw:{elId:v}}=m.detail;if(v===t.id)switch(S){case Ce:u.value=!0;break;case Pe:u.value=!1;break}};return document.addEventListener(ie,i),()=>{document.removeEventListener(ie,i)}}};var Nt={type:2,name:k.ExecuteScript,onGlobalInit:async t=>{U(k.ExecuteScript,({autoRemove:e=`${et}`,attributes:n=Qe,script:r})=>{let o=K(e);if(!r?.length)throw H("NoScriptProvided",t);let s=document.createElement("script");for(let u of n.split(`
`)){let i=u.indexOf(" "),m=i?u.slice(0,i):u,S=i?u.slice(i):"";s.setAttribute(m.trim(),S.trim())}s.text=r,document.head.appendChild(s),o&&s.remove()})}};var ge=document,z=!!ge.startViewTransition;var Ct=function(){"use strict";let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:b=>b.getAttribute("im-preserve")==="true",shouldReAppend:b=>b.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function n(b,_,T={}){b=v(b);let x=M(_),A=S(b,x,T),h=o(A,()=>i(A,b,x,a=>a.morphStyle==="innerHTML"?(s(a,b,x),Array.from(b.childNodes)):r(a,b,x)));return A.pantry.remove(),h}function r(b,_,T){let x=M(_),A=Array.from(x.childNodes),h=A.indexOf(_),a=A.length-(h+1);return s(b,x,T,_,_.nextSibling),A=Array.from(x.childNodes),A.slice(h,A.length-a)}function o(b,_){if(!b.config.restoreFocus)return _();let T=document.activeElement;if(!(T instanceof HTMLInputElement||T instanceof HTMLTextAreaElement))return _();let{id:x,selectionStart:A,selectionEnd:h}=T,a=_();return x&&x!==document.activeElement?.id&&(T=b.target.querySelector(`#${x}`),T?.focus()),T&&!T.selectionEnd&&h&&T.setSelectionRange(A,h),a}let s=function(){function b(l,d,g,p=null,f=null){d instanceof HTMLTemplateElement&&g instanceof HTMLTemplateElement&&(d=d.content,g=g.content),p||=d.firstChild;for(let y of g.childNodes){if(p&&p!=f){let R=T(l,y,p,f);if(R){R!==p&&A(l,p,R),u(R,y,l),p=R.nextSibling;continue}}if(y instanceof Element&&l.persistentIds.has(y.id)){let R=h(d,y.id,p,l);u(R,y,l),p=R.nextSibling;continue}let E=_(d,y,p,l);E&&(p=E.nextSibling)}for(;p&&p!=f;){let y=p;p=p.nextSibling,x(l,y)}}function _(l,d,g,p){if(p.callbacks.beforeNodeAdded(d)===!1)return null;if(p.idMap.has(d)){let f=document.createElement(d.tagName);return l.insertBefore(f,g),u(f,d,p),p.callbacks.afterNodeAdded(f),f}else{let f=document.importNode(d,!0);return l.insertBefore(f,g),p.callbacks.afterNodeAdded(f),f}}let T=function(){function l(p,f,y,E){let R=null,L=f.nextSibling,F=0,I=y;for(;I&&I!=E;){if(g(I,f)){if(d(p,I,f))return I;R===null&&(p.idMap.has(I)||(R=I))}if(R===null&&L&&g(I,L)&&(F++,L=L.nextSibling,F>=2&&(R=void 0)),I.contains(document.activeElement))break;I=I.nextSibling}return R||null}function d(p,f,y){let E=p.idMap.get(f),R=p.idMap.get(y);if(!R||!E)return!1;for(let L of E)if(R.has(L))return!0;return!1}function g(p,f){let y=p,E=f;return y.nodeType===E.nodeType&&y.tagName===E.tagName&&(!y.id||y.id===E.id)}return l}();function x(l,d){if(l.idMap.has(d))c(l.pantry,d,null);else{if(l.callbacks.beforeNodeRemoved(d)===!1)return;d.parentNode?.removeChild(d),l.callbacks.afterNodeRemoved(d)}}function A(l,d,g){let p=d;for(;p&&p!==g;){let f=p;p=p.nextSibling,x(l,f)}return p}function h(l,d,g,p){let f=p.target.querySelector(`#${d}`)||p.pantry.querySelector(`#${d}`);return a(f,p),c(l,f,g),f}function a(l,d){let g=l.id;for(;l=l.parentNode;){let p=d.idMap.get(l);p&&(p.delete(g),p.size||d.idMap.delete(l))}}function c(l,d,g){if(l.moveBefore)try{l.moveBefore(d,g)}catch{l.insertBefore(d,g)}else l.insertBefore(d,g)}return b}(),u=function(){function b(a,c,l){return l.ignoreActive&&a===document.activeElement?null:(l.callbacks.beforeNodeMorphed(a,c)===!1||(a instanceof HTMLHeadElement&&l.head.ignore||(a instanceof HTMLHeadElement&&l.head.style!=="morph"?m(a,c,l):(_(a,c,l),h(a,l)||s(l,a,c))),l.callbacks.afterNodeMorphed(a,c)),a)}function _(a,c,l){let d=c.nodeType;if(d===1){let g=a,p=c,f=g.attributes,y=p.attributes;for(let E of y)A(E.name,g,"update",l)||g.getAttribute(E.name)!==E.value&&g.setAttribute(E.name,E.value);for(let E=f.length-1;0<=E;E--){let R=f[E];if(R&&!p.hasAttribute(R.name)){if(A(R.name,g,"remove",l))continue;g.removeAttribute(R.name)}}h(g,l)||T(g,p,l)}(d===8||d===3)&&a.nodeValue!==c.nodeValue&&(a.nodeValue=c.nodeValue)}function T(a,c,l){if(a instanceof HTMLInputElement&&c instanceof HTMLInputElement&&c.type!=="file"){let d=c.value,g=a.value;x(a,c,"checked",l),x(a,c,"disabled",l),c.hasAttribute("value")?g!==d&&(A("value",a,"update",l)||(a.setAttribute("value",d),a.value=d)):A("value",a,"remove",l)||(a.value="",a.removeAttribute("value"))}else if(a instanceof HTMLOptionElement&&c instanceof HTMLOptionElement)x(a,c,"selected",l);else if(a instanceof HTMLTextAreaElement&&c instanceof HTMLTextAreaElement){let d=c.value,g=a.value;if(A("value",a,"update",l))return;d!==g&&(a.value=d),a.firstChild&&a.firstChild.nodeValue!==d&&(a.firstChild.nodeValue=d)}}function x(a,c,l,d){let g=c[l],p=a[l];if(g!==p){let f=A(l,a,"update",d);f||(a[l]=c[l]),g?f||a.setAttribute(l,""):A(l,a,"remove",d)||a.removeAttribute(l)}}function A(a,c,l,d){return a==="value"&&d.ignoreActiveValue&&c===document.activeElement?!0:d.callbacks.beforeAttributeUpdated(a,c,l)===!1}function h(a,c){return!!c.ignoreActiveValue&&a===document.activeElement&&a!==document.body}return b}();function i(b,_,T,x){if(b.head.block){let A=_.querySelector("head"),h=T.querySelector("head");if(A&&h){let a=m(A,h,b);return Promise.all(a).then(()=>{let c=Object.assign(b,{head:{block:!1,ignore:!0}});return x(c)})}}return x(b)}function m(b,_,T){let x=[],A=[],h=[],a=[],c=new Map;for(let d of _.children)c.set(d.outerHTML,d);for(let d of b.children){let g=c.has(d.outerHTML),p=T.head.shouldReAppend(d),f=T.head.shouldPreserve(d);g||f?p?A.push(d):(c.delete(d.outerHTML),h.push(d)):T.head.style==="append"?p&&(A.push(d),a.push(d)):T.head.shouldRemove(d)!==!1&&A.push(d)}a.push(...c.values());let l=[];for(let d of a){let g=document.createRange().createContextualFragment(d.outerHTML).firstChild;if(T.callbacks.beforeNodeAdded(g)!==!1){if("href"in g&&g.href||"src"in g&&g.src){let p,f=new Promise(function(y){p=y});g.addEventListener("load",function(){p()}),l.push(f)}b.appendChild(g),T.callbacks.afterNodeAdded(g),x.push(g)}}for(let d of A)T.callbacks.beforeNodeRemoved(d)!==!1&&(b.removeChild(d),T.callbacks.afterNodeRemoved(d));return T.head.afterHeadMorphed(b,{added:x,kept:h,removed:A}),l}let S=function(){function b(c,l,d){let{persistentIds:g,idMap:p}=h(c,l),f=_(d),y=f.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(y))throw`Do not understand how to morph style ${y}`;return{target:c,newContent:l,config:f,morphStyle:y,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,restoreFocus:f.restoreFocus,idMap:p,persistentIds:g,pantry:T(),callbacks:f.callbacks,head:f.head}}function _(c){let l=Object.assign({},e);return Object.assign(l,c),l.callbacks=Object.assign({},e.callbacks,c.callbacks),l.head=Object.assign({},e.head,c.head),l}function T(){let c=document.createElement("div");return c.hidden=!0,document.body.insertAdjacentElement("afterend",c),c}function x(c){let l=Array.from(c.querySelectorAll("[id]"));return c.id&&l.push(c),l}function A(c,l,d,g){for(let p of g)if(l.has(p.id)){let f=p;for(;f;){let y=c.get(f);if(y==null&&(y=new Set,c.set(f,y)),y.add(p.id),f===d)break;f=f.parentElement}}}function h(c,l){let d=x(c),g=x(l),p=a(d,g),f=new Map;A(f,p,c,d);let y=l.__idiomorphRoot||l;return A(f,p,y,g),{persistentIds:p,idMap:f}}function a(c,l){let d=new Set,g=new Map;for(let{id:f,tagName:y}of c)g.has(f)?d.add(f):g.set(f,y);let p=new Set;for(let{id:f,tagName:y}of l)p.has(f)?d.add(f):g.get(f)===y&&p.add(f);for(let f of d)p.delete(f);return p}return b}(),{normalizeElement:v,normalizeParent:M}=function(){let b=new WeakSet;function _(h){return h instanceof Document?h.documentElement:h}function T(h){if(h==null)return document.createElement("div");if(typeof h=="string")return T(A(h));if(b.has(h))return h;if(h instanceof Node){if(h.parentNode)return x(h);{let a=document.createElement("div");return a.append(h),a}}else{let a=document.createElement("div");for(let c of[...h])a.append(c);return a}}function x(h){return{childNodes:[h],querySelectorAll:a=>{let c=h.querySelectorAll(a);return h.matches(a)?[h,...c]:c},insertBefore:(a,c)=>h.parentNode.insertBefore(a,c),moveBefore:(a,c)=>h.parentNode.moveBefore(a,c),get __idiomorphRoot(){return h}}}function A(h){let a=new DOMParser,c=h.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(c.match(/<\/html>/)||c.match(/<\/head>/)||c.match(/<\/body>/)){let l=a.parseFromString(h,"text/html");if(c.match(/<\/html>/))return b.add(l),l;{let d=l.firstChild;return d&&b.add(d),d}}else{let d=a.parseFromString("<body><template>"+h+"</template></body>","text/html").body.querySelector("template").content;return b.add(d),d}}return{normalizeElement:_,normalizeParent:T}}();return{morph:n,defaults:e}}();var Lt={type:2,name:k.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");U(k.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:o=tt,settleDuration:s=`${ye}`,useViewTransition:u=`${Se}`})=>{let i=Number.parseInt(s),m=K(u);e.innerHTML=n.trim();let S=[...e.content.children];for(let v of S){if(!(v instanceof Element))throw H("NoFragmentsFound",t);let M=r||`#${v.getAttribute("id")}`,b=[...document.querySelectorAll(M)||[]];if(!b.length)throw H("NoTargetsFound",t,{selectorOrID:M});m&&z?ge.startViewTransition(()=>Pt(t,o,i,v,b)):Pt(t,o,i,v,b)}})}};function Pt(t,e,n,r,o){for(let s of o){s.classList.add(Q);let u=s.outerHTML,i=s;switch(e){case W.Morph:{let v=r.cloneNode(!0);ue(v,M=>{!M.id?.length&&Object.keys(M.dataset).length&&(M.id=Te(M))}),Ct.morph(i,v);break}case W.Inner:i.innerHTML=r.outerHTML;break;case W.Outer:i.replaceWith(r);break;case W.Prepend:i.prepend(r);break;case W.Append:i.append(r);break;case W.Before:i.before(r);break;case W.After:i.after(r);break;case W.UpsertAttributes:for(let v of r.getAttributeNames()){let M=r.getAttribute(v);i.setAttribute(v,M)}break;default:throw H("InvalidMergeMode",t,{mergeMode:e})}let m=i.classList;m?.add(Q),setTimeout(()=>{s.classList.remove(Q),m?.remove(Q)},n);let S=i.outerHTML;m&&u!==S&&(m.add(Be),setTimeout(()=>{m.remove(Be)},n))}}var It={type:2,name:k.MergeSignals,onGlobalInit:async t=>{U(k.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${Ze}`})=>{let{signals:r}=t,o=K(n);r.merge(be(e),o)})}};var Vt={type:2,name:k.RemoveFragments,onGlobalInit:async t=>{U(k.RemoveFragments,({selector:e,settleDuration:n=`${ye}`,useViewTransition:r=`${Se}`})=>{if(!e.length)throw H("NoSelectorProvided",t);let o=Number.parseInt(n),s=K(r),u=document.querySelectorAll(e),i=()=>{for(let m of u)m.classList.add(Q);setTimeout(()=>{for(let m of u)m.remove()},o)};s&&z?ge.startViewTransition(()=>i()):i()})}};var Dt={type:2,name:k.RemoveSignals,onGlobalInit:async t=>{U(k.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw H("NoPathsProvided",t);t.signals.remove(...n)})}};var kt={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw N("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Ot={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw N("CustomValidityInvalidElement",t);let o=n();return r(()=>{let s=o();if(typeof s!="string")throw N("CustomValidityInvalidExpression",t,{result:s});e.setCustomValidity(s)})}};var Ht="once",Ft="half",qt="full",Wt={type:1,name:"intersects",keyReq:2,mods:new Set([Ht,Ft,qt]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let o={threshold:0};n.has(qt)?o.threshold=1:n.has(Ft)&&(o.threshold=.5);let s=r(),u=new IntersectionObserver(i=>{for(let m of i)m.isIntersecting&&(s(),n.has(Ht)&&(u.disconnect(),delete t.dataset[e]))},o);return u.observe(t),()=>u.disconnect()}};var $t="session",Gt={type:1,name:"persist",mods:new Set([$t]),onLoad:({key:t,effect:e,mods:n,signals:r,value:o})=>{t=V(t,n),t===""&&(t=D);let s=n.has($t)?sessionStorage:localStorage,u=o.split(/\s+/).filter(S=>S!=="");u=u.map(S=>J(S));let i=()=>{let S=s.getItem(t)||"{}",v=JSON.parse(S);r.merge(v)},m=()=>{let S;u.length?S=r.subset(...u):S=r.values(),s.setItem(t,JSON.stringify(S))};return i(),e(()=>{m()})}};var Ut={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),o=window.location.href,s=new URL(r,o).toString();window.history.replaceState({},"",s)})}};var Le="smooth",je="instant",Ke="auto",Bt="hstart",jt="hcenter",Kt="hend",Jt="hnearest",zt="vstart",Yt="vcenter",Xt="vend",Qt="vnearest",Hn="focus",Ie="center",Zt="start",en="end",tn="nearest",nn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([Le,je,Ke,Bt,jt,Kt,Jt,zt,Yt,Xt,Qt,Hn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let o={behavior:Le,block:Ie,inline:Ie};if(n.has(Le)&&(o.behavior=Le),n.has(je)&&(o.behavior=je),n.has(Ke)&&(o.behavior=Ke),n.has(Bt)&&(o.inline=Zt),n.has(jt)&&(o.inline=Ie),n.has(Kt)&&(o.inline=en),n.has(Jt)&&(o.inline=tn),n.has(zt)&&(o.block=Zt),n.has(Yt)&&(o.block=Ie),n.has(Xt)&&(o.block=en),n.has(Qt)&&(o.block=tn),!(e instanceof HTMLElement||e instanceof SVGElement))throw N("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(o),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var rn="none",on="display",sn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===rn&&t.removeProperty(on):t.setProperty(on,rn)})}};var an="view-transition",ln={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===an&&(t=!0);if(!t){let e=document.createElement("meta");e.name=an,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!z){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let o=r();if(!o?.length)return;let s=e.style;s.viewTransitionName=o})}};var un={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let o=r();return e===""?n(async()=>{let s=o();for(let[u,i]of Object.entries(s))i===!1?t.removeAttribute(u):t.setAttribute(u,i)}):(e=le(e),n(async()=>{let s=!1;try{s=o()}catch{}let u;typeof s=="string"?u=s:u=JSON.stringify(s),!u||u==="false"||u==="null"||u==="undefined"?t.removeAttribute(e):t.setAttribute(e,u)}))}};var Fn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,cn=["change","input","keydown"],fn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:o,value:s,effect:u}=t,i=n?V(n,r):J(s),m=e.tagName.toLowerCase(),S="",v=m.includes("input"),M=e.getAttribute("type"),b=m.includes("checkbox")||v&&M==="checkbox";b&&(S=!1),v&&M==="number"&&(S=0);let T=m.includes("select"),x=m.includes("radio")||v&&M==="radio",A=v&&M==="file";x&&(e.getAttribute("name")?.length||e.setAttribute("name",i));let h=()=>{let g="value"in e,p=o.value(i),f=`${p}`;if(b||x){let y=e;Array.isArray(p)?y.checked=p.includes(y.value):typeof p=="boolean"?y.checked=!!p:y.checked=f===y.value}else if(T){let y=e;if(y.multiple)for(let E of y.options){if(E?.disabled)return;Array.isArray(p)||typeof p=="string"?E.selected=p.includes(E.value):typeof p=="number"?E.selected=p===Number(E.value):E.selected=p}else y.value=f}else A||(g?e.value=f:e.setAttribute("value",f))},a=async()=>{if(A){let y=[...e?.files||[]],E=[],R=[],L=[];await Promise.all(y.map(F=>new Promise(I=>{let q=new FileReader;q.onload=()=>{if(typeof q.result!="string")throw N("InvalidFileResultType",t,{resultType:typeof q.result});let j=q.result.match(Fn);if(!j?.groups)throw N("InvalidDataUri",t,{result:q.result});E.push(j.groups.contents),R.push(j.groups.mime),L.push(F.name)},q.onloadend=()=>I(void 0),q.readAsDataURL(F)}))),o.setValue(i,E),o.setValue(`${i}Mimes`,R),o.setValue(`${i}Names`,L);return}let g=o.value(i),p=e||e,f=p.value||p.getAttribute("value")||"";if(b){let y=p.checked||p.getAttribute("checked")==="true";if(Array.isArray(g)){let E=new Set(g);y?E.add(p.value):E.delete(p.value),o.setValue(i,[...E])}else if(p.getAttribute("value")){let R=y?f:!1;o.setValue(i,R)}else o.setValue(i,y);return}if(typeof g=="number")o.setValue(i,Number(f));else if(typeof g=="string")o.setValue(i,f||"");else if(typeof g=="boolean")o.setValue(i,!!f);else if(Array.isArray(g))if(T){let R=[...e.selectedOptions].filter(L=>L.selected).map(L=>L.value);o.setValue(i,R)}else o.setValue(i,JSON.stringify(f.split(",")));else if(!(typeof g>"u"))throw N("BindUnsupportedSignalType",t,{signalType:typeof g})},{inserted:c}=o.upsertIfMissing(i,S);c&&a();for(let g of cn)e.addEventListener(g,a);let l=u(()=>h()),d=g=>{g.persisted&&a()};return window.addEventListener("pageshow",d),()=>{l();for(let g of cn)e.removeEventListener(g,a);window.removeEventListener("pageshow",d)}}};var dn={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:o})=>{let s=t.classList,u=o();return r(()=>{if(e===""){let i=u();for(let[m,S]of Object.entries(i)){let v=m.split(/\s+/);S?s.add(...v):s.remove(...v)}}else e=V(e,n),u()?s.add(e):s.remove(e)})}};function he(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function se(t,e,n=!1){return t?t.has(e.toLowerCase()):n}function pn(t,e,n=!1,r=!0){let o=-1,s=()=>o&&clearTimeout(o);return(...u)=>{s(),n&&!o&&t(...u),o=setTimeout(()=>{r&&t(...u),s()},e)}}function mn(t,e,n=!0,r=!1){let o=!1;return(...s)=>{o||(n&&t(...s),o=!0,setTimeout(()=>{o=!1,r&&t(...s)},e))}}var qn="evt",Je="signalsChange",Wn=Je.length,gn={type:1,name:"on",keyReq:1,valReq:1,argNames:[qn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,key:e,mods:n,rawKey:r,signals:o,value:s,effect:u,genRX:i})=>{let m=i(),S=t;n.has("window")&&(S=window);let v=h=>{h&&((n.has("prevent")||e==="submit")&&h.preventDefault(),n.has("stop")&&h.stopPropagation()),m(h)},M=n.get("delay");if(M){let h=he(M);setTimeout(()=>{v()},h)}let b=n.get("debounce");if(b){let h=he(b),a=se(b,"leading",!1),c=!se(b,"notrail",!1);v=pn(v,h,a,c)}let _=n.get("throttle");if(_){let h=he(_),a=!se(_,"noleading",!1),c=se(_,"trail",!1);v=mn(v,h,a,c)}if(n.has("viewtransition")&&z){let h=v;v=(...a)=>document.startViewTransition(()=>h(...a))}let T={capture:!0,passive:!1,once:!1};if(n.has("capture")||(T.capture=!1),n.has("passive")&&(T.passive=!0),n.has("once")&&(T.once=!0),e==="load")return setTimeout(()=>v(),0),()=>{};if(e==="interval"){let h=1e3,a=n.get("duration");a&&(h=he(a),se(a,"leading",!1)&&(t.dataset[r.replace(".leading","")]=s,delete t.dataset[r],v()));let c=setInterval(v,h);return()=>{clearInterval(c)}}if(e==="raf"){let h,a=()=>{v(),h=requestAnimationFrame(a)};return h=requestAnimationFrame(a),()=>{h&&cancelAnimationFrame(h)}}if(e.startsWith(Je)){if(e===Je){let c=l=>v(l);return document.addEventListener(ae,c),()=>{document.removeEventListener(ae,c)}}let h=V(Y(e.slice(Wn)),n),a=new Map;return o.walk((c,l)=>{c.startsWith(h)&&a.set(l,l.value)}),u(()=>{for(let[c,l]of a)l!==c.value&&(v(),a.set(c,c.value))})}if(n.has("outside")){S=document;let h=v;v=c=>{let l=c?.target;t.contains(l)||h(c)}}let A=V(e,n);return S.addEventListener(A,v,T),()=>{S.removeEventListener(A,v)}}};var hn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:o})=>{let s=e?V(e,n):J(o);r.setValue(s,t)}};var vn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,o=r();return e instanceof HTMLElement||N("TextInvalidElement",t),n(()=>{let s=o(t);e.textContent=`${s}`})}};var{round:$n,max:Gn,min:Un}=Math,yn={type:3,name:"fit",fn:(t,e,n,r,o,s,u=!1,i=!1)=>{let m=(e-n)/(r-n)*(s-o)+o;return i&&(m=$n(m)),u&&(m=Gn(o,Un(s,m))),m}};var Sn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,o)=>{r.startsWith(e)&&(o.value=n)})}};var bn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};Ge("ds");Me(un,fn,dn,gn,hn,sn,vn,Mt,_t,Rt,wt,xt,Et,Lt,It,Vt,Dt,Nt,kt,Ot,Wt,Gt,Ut,nn,ln,yn,Sn,bn);Ue();export{Ue as apply,Me as load,Ge as setAlias};
//# sourceMappingURL=datastar-aliased.js.map
