// Datastar v1.0.0-beta.7
var Ue=/ðŸ–•JS_DSðŸš€/.source,se=Ue.slice(0,5),Ie=Ue.slice(4),V="datastar";var Be="Datastar-Request",ve=300,je=1e3,Ke="type module",ye=!1,Je=!1,ze=!0,W={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},Ye=W.Morph,k={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var M=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(M||{});var oe=`${V}-signals`;var j=t=>t.trim()==="true",ae=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),B=t=>ae(t).replace(/-./g,e=>e[1].toUpperCase()),De=t=>ae(t).replace(/-/g,"_"),vn=t=>B(t).replace(/^./,e=>e[0].toUpperCase()),be=t=>new Function(`return Object.assign({}, ${t})`)(),K=t=>t.startsWith("$")?t.slice(1):t,yn={kebab:ae,snake:De,pascal:vn};function D(t,e){for(let n of e.get("case")||[]){let r=yn[n];r&&(t=r(t))}return t}var bn="computed",Xe={type:1,name:bn,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=D(t,e);let i=r();n.setComputed(t,i)}};var Qe={type:1,name:"signals",removeOnLoad:()=>!0,onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:o}=t,l=n.has("ifmissing");if(e!==""){let u=D(e,n),h=i===""?i:o()();l?r.upsertIfMissing(u,h):r.setValue(u,h)}else{let u=be(t.value);t.value=JSON.stringify(u);let T=o()();r.merge(T,l)}}};var Ze={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var le=class{#e=0;#n;constructor(e=V){this.#n=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else this.#e=(this.#e<<5)-this.#e+e;return this}get value(){return this.#n+Math.abs(this.#e).toString(36)}};function Se(t){if(t.id)return t.id;let e=new le,n=t;for(;n;){if(n.id){e.with(n.id);break}let r=n?.parentNode;r?e.with([...r.children].indexOf(n)):e.with(n.tagName),n=r}return e.value}function ue(t,e){if(!t||!(t instanceof HTMLElement||t instanceof SVGElement))return null;let n=t.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||e(t);let r=t.firstElementChild;for(;r;)ue(r,e),r=r.nextElementSibling}function Te(t,e){return(...n)=>{setTimeout(()=>{t(...n)},e)}}function et(t,e,n=!1,r=!0){let i=-1,o=()=>i&&clearTimeout(i);return(...l)=>{o(),n&&!i&&t(...l),i=setTimeout(()=>{r&&t(...l),o()},e)}}function tt(t,e,n=!0,r=!1){let i=!1;return(...o)=>{i||(n&&t(...o),i=!0,setTimeout(()=>{i=!1,r&&t(...o)},e))}}var Sn="https://data-star.dev/errors";function Ve(t,e,n={}){let r=new Error;r.name=`${V} ${t} error`;let i=De(e),o=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),l=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${Sn}/${t}/${i}?${o}
Context: ${l}`,r}function q(t,e,n={}){return Ve("internal",e,Object.assign({from:t},n))}function H(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]}};return Ve("init",t,Object.assign(r,n))}function N(t,e,n={}){let r={plugin:{name:e.plugin.name,type:M[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return Ve("runtime",t,Object.assign(r,n))}var Q="preact-signals",Tn=Symbol.for("preact-signals"),$=1,Z=2,fe=4,te=8,Ae=16,ee=32;function Oe(){Ee++}function Fe(){if(Ee>1){Ee--;return}let t,e=!1;for(;ce!==void 0;){let n=ce;for(ce=void 0,ke++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~Z,!(n._flags&te)&&rt(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if(ke=0,Ee--,e)throw t}var P;var ce,Ee=0,ke=0,_e=0;function nt(t){if(P===void 0)return;let e=t._node;if(e===void 0||e._target!==P)return e={_version:0,_source:t,_prevSource:P._sources,_nextSource:void 0,_target:P,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},P._sources!==void 0&&(P._sources._nextSource=e),P._sources=e,t._node=e,P._flags&ee&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=P._sources,e._nextSource=void 0,P._sources._nextSource=e,P._sources=e),e}function I(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}I.prototype.brand=Tn;I.prototype._refresh=()=>!0;I.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};I.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};I.prototype.subscribe=function(t){return xe(()=>{let e=this.value,n=P;P=void 0;try{t(e)}finally{P=n}})};I.prototype.valueOf=function(){return this.value};I.prototype.toString=function(){return`${this.value}`};I.prototype.toJSON=function(){return this.value};I.prototype.peek=function(){let t=P;P=void 0;try{return this.value}finally{P=t}};Object.defineProperty(I.prototype,"value",{get(){let t=nt(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if(ke>100)throw q(Q,"SignalCycleDetected");let e=this._value,n=t;this._value=t,this._version++,_e++,Oe();try{for(let r=this._targets;r!==void 0;r=r._nextTarget)r._target._notify()}finally{Fe()}this?._onChange({old:e,revised:n})}}});function rt(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function it(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function st(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function z(t){I.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=_e-1,this._flags=fe}z.prototype=new I;z.prototype._refresh=function(){if(this._flags&=~Z,this._flags&$)return!1;if((this._flags&(fe|ee))===ee||(this._flags&=~fe,this._globalVersion===_e))return!0;if(this._globalVersion=_e,this._flags|=$,this._version>0&&!rt(this))return this._flags&=~$,!0;let t=P;try{it(this),P=this;let e=this._fn();(this._flags&Ae||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~Ae,this._version++)}catch(e){this._value=e,this._flags|=Ae,this._version++}return P=t,st(this),this._flags&=~$,!0};z.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=fe|ee;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}I.prototype._subscribe.call(this,t)};z.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(I.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~ee;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};z.prototype._notify=function(){if(!(this._flags&Z)){this._flags|=fe|Z;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(z.prototype,"value",{get(){if(this._flags&$)throw q(Q,"SignalCycleDetected");let t=nt(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&Ae)throw q(Q,"GetComputedError",{value:this._value});return this._value}});function ot(t){return new z(t)}function at(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){Oe();let n=P;P=void 0;try{e()}catch(r){throw t._flags&=~$,t._flags|=te,He(t),q(Q,"CleanupEffectError",{error:r})}finally{P=n,Fe()}}}function He(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,at(t)}function An(t){if(P!==this)throw q(Q,"EndEffectError");st(this),P=t,this._flags&=~$,this._flags&te&&He(this),Fe()}function de(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=ee}de.prototype._callback=function(){let t=this._start();try{if(this._flags&te||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};de.prototype._start=function(){if(this._flags&$)throw q(Q,"SignalCycleDetected");this._flags|=$,this._flags&=~te,at(this),it(this),Oe();let t=P;return P=this,An.bind(this,t)};de.prototype._notify=function(){this._flags&Z||(this._flags|=Z,this._nextBatchedEffect=ce,ce=this)};de.prototype._dispose=function(){this._flags|=te,this._flags&$||He(this)};function xe(t){let e=new de(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var lt="namespacedSignals",ne=t=>{document.dispatchEvent(new CustomEvent(oe,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function ut(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof I?n[r]=i.value:n[r]=ut(i)}return n}function ct(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw q(lt,"InvalidSignalKey",{key:i});let o=e[i];if(o instanceof Object&&!Array.isArray(o)){t[i]||(t[i]={});let l=ct(t[i],o,n);r.added.push(...l.added.map(u=>`${i}.${u}`)),r.removed.push(...l.removed.map(u=>`${i}.${u}`)),r.updated.push(...l.updated.map(u=>`${i}.${u}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let h=t[i];if(h instanceof I){let T=h.value;h.value=o,T!==o&&r.updated.push(i);continue}}let u=new I(o);u._onChange=()=>{ne({updated:[i]})},t[i]=u,r.added.push(i)}}return r}function ft(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof I?e(n,r):ft(r,(i,o)=>{e(`${n}.${i}`,o)})}}function En(t,...e){let n={};for(let r of e){let i=r.split("."),o=t,l=n;for(let h=0;h<i.length-1;h++){let T=i[h];if(!o[T])return{};l[T]||(l[T]={}),o=o[T],l=l[T]}let u=i[i.length-1];l[u]=o[u]}return n}var Re=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let l=0;l<n.length-1;l++){let u=n[l];if(!r[u])return null;r=r[u]}let i=n[n.length-1],o=r[i];if(!o)throw q(lt,"SignalNotFound",{path:e});return o}setSignal(e,n){let r=e.split("."),i=this.#e;for(let l=0;l<r.length-1;l++){let u=r[l];i[u]||(i[u]={}),i=i[u]}let o=r[r.length-1];i[o]=n}setComputed(e,n){let r=ot(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let r=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&ne({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let h=0;h<r.length-1;h++){let T=r[h];i[T]||(i[T]={}),i=i[T]}let o=r[r.length-1],l=i[o];if(l instanceof I)return l;let u=new I(n);return u._onChange=()=>{ne({updated:[e]})},i[o]=u,ne({added:[e]}),u}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),o=this.#e;for(let u=0;u<i.length-1;u++){let h=i[u];if(!o[h])return;o=o[h]}let l=i[i.length-1];delete o[l],n.push(r)}ne({removed:n})}merge(e,n=!1){let r=ct(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&ne(r)}subset(...e){return En(this.values(),...e)}walk(e){ft(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return ut(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var dt=(t,e)=>`${t}${se}${e}`,we=class{constructor(){this.aliasPrefix="";this.#e=new Re;this.#n=[];this.#r={};this.#a=[];this.#s=null;this.#t=new Map;this.#l=Te(()=>{this.#o(document.body),this.#u()},1)}#e;#n;#r;#a;#s;#t;get signals(){return this.#e}load(...e){let n=this;for(let r of e){let i={get signals(){return n.#e},effect:l=>xe(l),actions:this.#r,plugin:r,applyAttributePlugin:n.#i.bind(n)},o;switch(r.type){case 2:{let l=r;this.#a.push(l),o=l.onGlobalInit;break}case 3:{this.#r[r.name]=r;break}case 1:{let l=r;this.#n.push(l),o=l.onGlobalInit;break}default:throw H("InvalidPluginType",i)}o&&o(i)}this.#n.sort((r,i)=>{let o=i.name.length-r.name.length;return o!==0?o:r.name.localeCompare(i.name)}),this.#l()}#l;#o(e){ue(e,n=>{let r=this.#t.get(n);if(r){for(let[,i]of r)i();this.#t.delete(n)}for(let i of Object.keys(n.dataset))this.#i(n,i)})}#u(){this.#s||(this.#s=new MutationObserver(e=>{for(let{target:n,type:r,attributeName:i,oldValue:o,addedNodes:l,removedNodes:u}of e)switch(r){case"childList":{for(let h of u){let T=h,b=this.#t.get(T);if(b){for(let[w,y]of b)y();this.#t.delete(T)}}for(let h of l){let T=h;this.#o(T)}}break;case"attributes":{{let h="data-",T=h+(this.aliasPrefix?`${this.aliasPrefix}-`:"");if(!i?.startsWith(T))break;let b=n,w=B(i.slice(h.length));if(o!==null&&b.dataset[w]!==o){let y=this.#t.get(b);if(y){let A=dt(w,o),S=y.get(A);S&&(S(),y.delete(A))}}w in b.dataset&&this.#i(b,w)}break}}}),this.#s.observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}))}#i(e,n){let r=n.slice(this.aliasPrefix.length),i=this.#n.find(m=>r.startsWith(m.name));if(!i)return;let o=this.#t.get(e);if(o)for(let[m,s]of o)m.startsWith(n)&&(s(),o.delete(m));e.id.length||(e.id=Se(e));let[l,...u]=r.slice(i.name.length).split(/\_\_+/),h=l.length>0;h&&(l=B(l));let T=e.dataset[n]||"",b=T.length>0,w=this,y={get signals(){return w.#e},applyAttributePlugin:w.#i.bind(w),effect:m=>xe(m),actions:this.#r,genRX:()=>this.#c(y,...i.argNames||[]),plugin:i,el:e,rawKey:r,key:l,value:T,mods:new Map},A=i.keyReq||0;if(h){if(A===2)throw N(`${i.name}KeyNotAllowed`,y)}else if(A===1)throw N(`${i.name}KeyRequired`,y);let S=i.valReq||0;if(b){if(S===2)throw N(`${i.name}ValueNotAllowed`,y)}else if(S===1)throw N(`${i.name}ValueRequired`,y);if(A===3||S===3){if(h&&b)throw N(`${i.name}KeyAndValueProvided`,y);if(!h&&!b)throw N(`${i.name}KeyOrValueRequired`,y)}for(let m of u){let[s,...f]=m.split(".");y.mods.set(B(s),new Set(f.map(c=>c.toLowerCase())))}let E=i.onLoad(y);if(E){let m=this.#t.get(e);m||(m=new Map,this.#t.set(e,m)),m.set(dt(n,T),E)}let v=i.removeOnLoad;v&&v(r)===!0&&delete e.dataset[n]}#c(e,...n){let r="",i=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,o=e.value.trim().match(i);if(o){let S=o.length-1,E=o[S].trim();E.startsWith("return")||(o[S]=`return (${E});`),r=o.join(`;
`)}let l=new Map,u=new RegExp(`(?:${se})(.*?)(?:${Ie})`,"gm");for(let S of r.matchAll(u)){let E=S[1],v=new le("dsEscaped").with(E).value;l.set(v,E),r=r.replace(se+E+Ie,v)}let h=/@(\w*)\(/gm,T=r.matchAll(h),b=new Set;for(let S of T)b.add(S[1]);let w=new RegExp(`@(${Object.keys(this.#r).join("|")})\\(`,"gm");r=r.replaceAll(w,"ctx.actions.$1.fn(ctx,");let y=e.signals.paths();if(y.length){let S=new RegExp(`\\$(${y.join("|")})(\\W|$)`,"gm");r=r.replaceAll(S,"ctx.signals.signal('$1').value$2")}for(let[S,E]of l)r=r.replace(S,E);let A=`return (()=> {
${r}
})()`;e.fnContent=A;try{let S=new Function("ctx",...n,A);return(...E)=>{try{return S(e,...E)}catch(v){throw N("ExecuteExpression",e,{error:v.message})}}}catch(S){throw N("GenerateExpression",e,{error:S.message})}}};var pt=new we;pt.load(Ze,Qe,Xe);var Me=pt;async function _n(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function xn(t){let e,n,r,i=!1;return function(l){e===void 0?(e=l,n=0,r=-1):e=wn(e,l);let u=e.length,h=0;for(;n<u;){i&&(e[n]===10&&(h=++n),i=!1);let T=-1;for(;n<u&&T===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-h);break;case 13:i=!0;case 10:T=n;break}if(T===-1)break;t(e.subarray(h,T),r),h=n,r=-1}h===u?e=void 0:h!==0&&(e=e.subarray(h),n-=h)}}function Rn(t,e,n){let r=mt(),i=new TextDecoder;return function(l,u){if(l.length===0)n?.(r),r=mt();else if(u>0){let h=i.decode(l.subarray(0,u)),T=u+(l[u+1]===32?2:1),b=i.decode(l.subarray(T));switch(h){case"data":r.data=r.data?`${r.data}
${b}`:b;break;case"event":r.event=b;break;case"id":t(r.id=b);break;case"retry":{let w=Number.parseInt(b,10);Number.isNaN(w)||e(r.retry=w);break}}}}}function wn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function mt(){return{data:"",event:"",id:"",retry:void 0}}var Mn="text/event-stream",gt="last-event-id";function ht(t,e,{signal:n,headers:r,onopen:i,onmessage:o,onclose:l,onerror:u,openWhenHidden:h,fetch:T,retryInterval:b=1e3,retryScaler:w=2,retryMaxWaitMs:y=3e4,retryMaxCount:A=10,...S}){return new Promise((E,v)=>{let m=0,s={...r};s.accept||(s.accept=Mn);let f;function c(){f.abort(),document.hidden||_()}h||document.addEventListener("visibilitychange",c);let a=0;function g(){document.removeEventListener("visibilitychange",c),window.clearTimeout(a),f.abort()}n?.addEventListener("abort",()=>{g(),E()});let p=T??window.fetch,d=i??function(){};async function _(){f=new AbortController;try{let R=await p(e,{...S,headers:s,signal:f.signal});await d(R),await _n(R.body,xn(Rn(x=>{x?s[gt]=x:delete s[gt]},x=>{b=x},o))),l?.(),g(),E()}catch(R){if(!f.signal.aborted)try{let x=u?.(R)??b;window.clearTimeout(a),a=window.setTimeout(_,x),b*=w,b=Math.min(b,y),m++,m>=A?(g(),v(N("SseMaxRetries",t,{retryMaxCount:A}))):console.error(`Datastar failed to reach ${S.method}: ${e.toString()} retry in ${x}ms`)}catch(x){g(),v(x)}}}_()})}var re=`${V}-sse`,We=`${V}-settling`,Y=`${V}-swapping`,Ne="started",Pe="finished",vt="error",yt="retrying";function G(t,e){document.addEventListener(re,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function pe(t,e){document.dispatchEvent(new CustomEvent(re,{detail:{type:t,argsRaw:e}}))}var bt=t=>`${t}`.includes("text/event-stream"),U=async(t,e,n,r)=>{let{el:{id:i},el:o,signals:l}=t,{headers:u,contentType:h,includeLocal:T,selector:b,openWhenHidden:w,retryInterval:y,retryScaler:A,retryMaxWaitMs:S,retryMaxCount:E,abort:v}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:je,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),m=e.toLowerCase(),s=()=>{};try{if(pe(Ne,{elId:i}),!n?.length)throw N("SseNoUrlProvided",t,{action:m});let f={};f[Be]=!0,h==="json"&&(f["Content-Type"]="application/json");let c=Object.assign({},f,u),a={method:e,headers:c,openWhenHidden:w,retryInterval:y,retryScaler:A,retryMaxWaitMs:S,retryMaxCount:E,signal:v,onopen:async d=>{if(d.status>=400){let _=d.status.toString();pe(vt,{status:_})}},onmessage:d=>{if(!d.event.startsWith(V))return;let _=d.event,R={},x=d.data.split(`
`);for(let F of x){let L=F.indexOf(" "),X=F.slice(0,L),he=R[X];he||(he=[],R[X]=he);let hn=F.slice(L+1).trim();he.push(hn)}let C={};for(let[F,L]of Object.entries(R))C[F]=L.join(`
`);pe(_,C)},onerror:d=>{if(bt(d))throw N("InvalidContentType",t,{url:n});d&&(console.error(d.message),pe(yt,{message:d.message}))}},g=new URL(n,window.location.origin),p=new URLSearchParams(g.search);if(h==="json"){let d=l.JSON(!1,!T);e==="GET"?p.set(V,d):a.body=d}else if(h==="form"){let d=b?document.querySelector(b):o.closest("form");if(d===null)throw b?N("SseFormNotFound",t,{action:m,selector:b}):N("SseClosestFormNotFound",t,{action:m});if(o!==d){let R=x=>x.preventDefault();d.addEventListener("submit",R),s=()=>d.removeEventListener("submit",R)}if(!d.checkValidity()){d.reportValidity(),s();return}let _=new FormData(d);if(e==="GET"){let R=new URLSearchParams(_);for(let[x,C]of R)p.set(x,C)}else a.body=_}else throw N("SseInvalidContentType",t,{action:m,contentType:h});g.search=p.toString();try{await ht(t,g.toString(),a)}catch(d){if(!bt(d))throw N("SseFetchFailed",t,{method:e,url:n,error:d})}}finally{pe(Pe,{elId:i}),s()}};var St={type:3,name:"delete",fn:async(t,e,n)=>U(t,"DELETE",e,{...n})};var Tt={type:3,name:"get",fn:async(t,e,n)=>U(t,"GET",e,{...n})};var At={type:3,name:"patch",fn:async(t,e,n)=>U(t,"PATCH",e,{...n})};var Et={type:3,name:"post",fn:async(t,e,n)=>U(t,"POST",e,{...n})};var _t={type:3,name:"put",fn:async(t,e,n)=>U(t,"PUT",e,{...n})};var xt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let o=e?D(e,n):K(i),l=r.upsertIfMissing(o,!1),u=h=>{let{type:T,argsRaw:{elId:b}}=h.detail;if(b===t.id)switch(T){case Ne:l.value=!0;break;case Pe:l.value=!1;break}};return document.addEventListener(re,u),()=>{document.removeEventListener(re,u)}}};var Rt={type:2,name:k.ExecuteScript,onGlobalInit:async t=>{G(k.ExecuteScript,({autoRemove:e=`${ze}`,attributes:n=Ke,script:r})=>{let i=j(e);if(!r?.length)throw H("NoScriptProvided",t);let o=document.createElement("script");for(let l of n.split(`
`)){let u=l.indexOf(" "),h=u?l.slice(0,u):l,T=u?l.slice(u):"";o.setAttribute(h.trim(),T.trim())}o.text=r,document.head.appendChild(o),i&&o.remove()})}};var me=document,J=!!me.startViewTransition;var wt=function(){"use strict";let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:y=>y.getAttribute("im-preserve")==="true",shouldReAppend:y=>y.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function n(y,A,S={}){y=b(y);let E=w(A),v=T(y,E,S),m=i(v,()=>u(v,y,E,s=>s.morphStyle==="innerHTML"?(o(s,y,E),Array.from(y.childNodes)):r(s,y,E)));return v.pantry.remove(),m}function r(y,A,S){let E=w(A),v=Array.from(E.childNodes),m=v.indexOf(A),s=v.length-(m+1);return o(y,E,S,A,A.nextSibling),v=Array.from(E.childNodes),v.slice(m,v.length-s)}function i(y,A){if(!y.config.restoreFocus)return A();let S=document.activeElement;if(!(S instanceof HTMLInputElement||S instanceof HTMLTextAreaElement))return A();let{id:E,selectionStart:v,selectionEnd:m}=S,s=A();return E&&E!==document.activeElement?.id&&(S=y.target.querySelector(`#${E}`),S?.focus()),S&&v&&m&&S.setSelectionRange(v,m),s}let o=function(){function y(c,a,g,p=null,d=null){a instanceof HTMLTemplateElement&&g instanceof HTMLTemplateElement&&(a=a.content,g=g.content),p||=a.firstChild;for(let _ of g.childNodes){if(p&&p!=d){let x=S(c,_,p,d);if(x){x!==p&&v(c,p,x),l(x,_,c),p=x.nextSibling;continue}}if(_ instanceof Element&&c.persistentIds.has(_.id)){let x=m(a,_.id,p,c);l(x,_,c),p=x.nextSibling;continue}let R=A(a,_,p,c);R&&(p=R.nextSibling)}for(;p&&p!=d;){let _=p;p=p.nextSibling,E(c,_)}}function A(c,a,g,p){if(p.callbacks.beforeNodeAdded(a)===!1)return null;if(p.idMap.has(a)&&a instanceof Element){let d=document.createElement(a.tagName);return c.insertBefore(d,g),l(d,a,p),p.callbacks.afterNodeAdded(d),d}else{let d=document.importNode(a,!0);return c.insertBefore(d,g),p.callbacks.afterNodeAdded(d),d}}let S=function(){function c(p,d,_,R){let x=null,C=d.nextSibling,F=0,L=_;for(;L&&L!=R;){if(g(L,d)){if(a(p,L,d))return L;x===null&&(p.idMap.has(L)||(x=L))}x===null&&C&&g(L,C)&&(F++,C=C.nextSibling,F>=2&&(x=void 0)),L=L.nextSibling}return x||null}function a(p,d,_){let R=p.idMap.get(d),x=p.idMap.get(_);if(!x||!R)return!1;for(let C of R)if(x.has(C))return!0;return!1}function g(p,d){let _=p,R=d;return _.nodeType===R.nodeType&&_.tagName===R.tagName&&(!_.id||_.id===R.id)}return c}();function E(c,a){if(c.idMap.has(a)&&a instanceof Element)f(c.pantry,a,null);else{if(c.callbacks.beforeNodeRemoved(a)===!1)return;a.parentNode?.removeChild(a),c.callbacks.afterNodeRemoved(a)}}function v(c,a,g){let p=a;for(;p&&p!==g;){let d=p;p=p.nextSibling,E(c,d)}return p}function m(c,a,g,p){let d=p.target.querySelector(`#${a}`)||p.pantry.querySelector(`#${a}`);return s(d,p),f(c,d,g),d}function s(c,a){let g=c.id;for(;c=c.parentNode;){let p=a.idMap.get(c);p&&(p.delete(g),p.size||a.idMap.delete(c))}}function f(c,a,g){if(c.moveBefore)try{c.moveBefore(a,g)}catch{c.insertBefore(a,g)}else c.insertBefore(a,g)}return y}(),l=function(){function y(s,f,c){return c.ignoreActive&&s===document.activeElement?null:(c.callbacks.beforeNodeMorphed(s,f)===!1||(s instanceof HTMLHeadElement&&c.head.ignore||(s instanceof HTMLHeadElement&&c.head.style!=="morph"?h(s,f,c):(A(s,f,c),m(s,c)||o(c,s,f))),c.callbacks.afterNodeMorphed(s,f)),s)}function A(s,f,c){let a=f.nodeType;if(a===1){let g=s,p=f,d=g.attributes,_=p.attributes;for(let R of _)v(R.name,g,"update",c)||g.getAttribute(R.name)!==R.value&&g.setAttribute(R.name,R.value);for(let R=d.length-1;0<=R;R--){let x=d[R];if(x&&!p.hasAttribute(x.name)){if(v(x.name,g,"remove",c))continue;g.removeAttribute(x.name)}}m(g,c)||S(g,p,c)}(a===8||a===3)&&s.nodeValue!==f.nodeValue&&(s.nodeValue=f.nodeValue)}function S(s,f,c){if(s instanceof HTMLInputElement&&f instanceof HTMLInputElement&&f.type!=="file"){let a=f.value,g=s.value;E(s,f,"checked",c),E(s,f,"disabled",c),f.hasAttribute("value")?g!==a&&(v("value",s,"update",c)||(s.setAttribute("value",a),s.value=a)):v("value",s,"remove",c)||(s.value="",s.removeAttribute("value"))}else if(s instanceof HTMLOptionElement&&f instanceof HTMLOptionElement)E(s,f,"selected",c);else if(s instanceof HTMLTextAreaElement&&f instanceof HTMLTextAreaElement){let a=f.value,g=s.value;if(v("value",s,"update",c))return;a!==g&&(s.value=a),s.firstChild&&s.firstChild.nodeValue!==a&&(s.firstChild.nodeValue=a)}}function E(s,f,c,a){let g=f[c],p=s[c];if(g!==p){let d=v(c,s,"update",a);d||(s[c]=f[c]),g?d||s.setAttribute(c,""):v(c,s,"remove",a)||s.removeAttribute(c)}}function v(s,f,c,a){return s==="value"&&a.ignoreActiveValue&&f===document.activeElement?!0:a.callbacks.beforeAttributeUpdated(s,f,c)===!1}function m(s,f){return!!f.ignoreActiveValue&&s===document.activeElement&&s!==document.body}return y}();function u(y,A,S,E){if(y.head.block){let v=A.querySelector("head"),m=S.querySelector("head");if(v&&m){let s=h(v,m,y);return Promise.all(s).then(()=>{let f=Object.assign(y,{head:{block:!1,ignore:!0}});return E(f)})}}return E(y)}function h(y,A,S){let E=[],v=[],m=[],s=[],f=new Map;for(let a of A.children)f.set(a.outerHTML,a);for(let a of y.children){let g=f.has(a.outerHTML),p=S.head.shouldReAppend(a),d=S.head.shouldPreserve(a);g||d?p?v.push(a):(f.delete(a.outerHTML),m.push(a)):S.head.style==="append"?p&&(v.push(a),s.push(a)):S.head.shouldRemove(a)!==!1&&v.push(a)}s.push(...f.values());let c=[];for(let a of s){let g=document.createRange().createContextualFragment(a.outerHTML).firstChild;if(S.callbacks.beforeNodeAdded(g)!==!1){if("href"in g&&g.href||"src"in g&&g.src){let p,d=new Promise(function(_){p=_});g.addEventListener("load",function(){p()}),c.push(d)}y.appendChild(g),S.callbacks.afterNodeAdded(g),E.push(g)}}for(let a of v)S.callbacks.beforeNodeRemoved(a)!==!1&&(y.removeChild(a),S.callbacks.afterNodeRemoved(a));return S.head.afterHeadMorphed(y,{added:E,kept:m,removed:v}),c}let T=function(){function y(s,f,c){let a=A(c),{persistentIds:g,idMap:p}=m(s,f),d=a.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(d))throw`Do not understand how to morph style ${d}`;return{target:s,newContent:f,config:a,morphStyle:d,ignoreActive:a.ignoreActive,ignoreActiveValue:a.ignoreActiveValue,restoreFocus:a.restoreFocus,idMap:p,persistentIds:g,pantry:S(),callbacks:a.callbacks,head:a.head}}function A(s){let f=Object.assign({},e);return Object.assign(f,s),f.callbacks=Object.assign({},e.callbacks,s.callbacks),f.head=Object.assign({},e.head,s.head),f}function S(){let s=document.createElement("div");return s.hidden=!0,document.body.insertAdjacentElement("afterend",s),s}function E(s){let f=Array.from(s.querySelectorAll("[id]"));return s.id&&f.push(s),f}function v(s,f,c,a){for(let g of f)if(c.has(g.id)){let p=g;for(;p;){let d=a.get(p);if(d==null&&(d=new Set,a.set(p,d)),d.add(g.id),p===s)break;p=p.parentElement}}}function m(s,f){let c=new Map,a=new Set,g=E(s);for(let x of g){let C=x.id;c.has(C)?a.add(C):c.set(C,x.tagName)}let p=new Set,d=E(f);for(let x of d){let C=x.id,F=c.get(C);(p.has(C)||F&&F!==x.tagName)&&(a.add(C),p.delete(C)),F===x.tagName&&!a.has(C)&&p.add(C)}let _=new Map;v(s,g,p,_);let R=f;return f.__idiomorphDummyParent&&(R=f.childNodes[0]),v(R,d,p,_),{persistentIds:p,idMap:_}}return y}(),{normalizeElement:b,normalizeParent:w}=function(){let y=new WeakSet;function A(v){return v instanceof Document?v.documentElement:v}function S(v){if(v==null)return document.createElement("div");if(typeof v=="string")return S(E(v));if(y.has(v))return v;if(v instanceof Node){if(v.parentNode)return{childNodes:[v],querySelectorAll:m=>{let s=v.querySelectorAll(m);return v.matches(m)?[v,...s]:s},insertBefore:(m,s)=>v.parentNode.insertBefore(m,s),moveBefore:(m,s)=>v.parentNode.moveBefore(m,s),__idiomorphDummyParent:!0};{let m=document.createElement("div");return m.append(v),m}}else{let m=document.createElement("div");for(let s of[...v])m.append(s);return m}}function E(v){let m=new DOMParser,s=v.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(s.match(/<\/html>/)||s.match(/<\/head>/)||s.match(/<\/body>/)){let f=m.parseFromString(v,"text/html");if(s.match(/<\/html>/))return y.add(f),f;{let c=f.firstChild;return c&&y.add(c),c}}else{let c=m.parseFromString("<body><template>"+v+"</template></body>","text/html").body.querySelector("template").content;return y.add(c),c}}return{normalizeElement:A,normalizeParent:S}}();return{morph:n,defaults:e}}();var Nt={type:2,name:k.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");G(k.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=Ye,settleDuration:o=`${ve}`,useViewTransition:l=`${ye}`})=>{let u=Number.parseInt(o),h=j(l);e.innerHTML=n.trim();let T=[...e.content.children];for(let b of T){if(!(b instanceof Element))throw H("NoFragmentsFound",t);let w=r||`#${b.getAttribute("id")}`,y=[...document.querySelectorAll(w)||[]];if(!y.length)throw H("NoTargetsFound",t,{selectorOrID:w});h&&J?me.startViewTransition(()=>Mt(t,i,u,b,y)):Mt(t,i,u,b,y)}})}};function Mt(t,e,n,r,i){for(let o of i){o.classList.add(Y);let l=o.outerHTML,u=o;switch(e){case W.Morph:{let b=new Map,w=r.cloneNode(!0);ue(w,A=>{!A.id?.length&&Object.keys(A.dataset).length&&(A.id=Se(A))});let y=wt.morph(u,w,{restoreFocus:!0,callbacks:{beforeAttributeUpdated:(A,S,E)=>{if(E==="update"&&A.startsWith("data-")){let v=b.get(S);v||(v=[],b.set(S,v));let m=A.slice(5);v.push(B(m))}return!0}}});if(y?.length){u=y[0];for(let[A,S]of b.entries())for(let E of S)t.applyAttributePlugin(A,E)}break}case W.Inner:u.innerHTML=r.outerHTML;break;case W.Outer:u.replaceWith(r);break;case W.Prepend:u.prepend(r);break;case W.Append:u.append(r);break;case W.Before:u.before(r);break;case W.After:u.after(r);break;case W.UpsertAttributes:for(let b of r.getAttributeNames()){let w=r.getAttribute(b);u.setAttribute(b,w)}break;default:throw H("InvalidMergeMode",t,{mergeMode:e})}let h=u.classList;h?.add(Y),setTimeout(()=>{o.classList.remove(Y),h?.remove(Y)},n);let T=u.outerHTML;h&&l!==T&&(h.add(We),setTimeout(()=>{h.remove(We)},n))}}var Pt={type:2,name:k.MergeSignals,onGlobalInit:async t=>{G(k.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${Je}`})=>{let{signals:r}=t,i=j(n);r.merge(be(e),i)})}};var Ct={type:2,name:k.RemoveFragments,onGlobalInit:async t=>{G(k.RemoveFragments,({selector:e,settleDuration:n=`${ve}`,useViewTransition:r=`${ye}`})=>{if(!e.length)throw H("NoSelectorProvided",t);let i=Number.parseInt(n),o=j(r),l=document.querySelectorAll(e),u=()=>{for(let h of l)h.classList.add(Y);setTimeout(()=>{for(let h of l)h.remove()},i)};o&&J?me.startViewTransition(()=>u()):u()})}};var Lt={type:2,name:k.RemoveSignals,onGlobalInit:async t=>{G(k.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw H("NoPathsProvided",t);t.signals.remove(...n)})}};var It={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw N("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Dt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw N("CustomValidityInvalidElement",t);let i=n();return r(()=>{let o=i();if(typeof o!="string")throw N("CustomValidityInvalidExpression",t,{result:o});e.setCustomValidity(o)})}};var Vt="once",kt="half",Ot="full",Ft={type:1,name:"intersects",keyReq:2,mods:new Set([Vt,kt,Ot]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i={threshold:0};n.has(Ot)?i.threshold=1:n.has(kt)&&(i.threshold=.5);let o=r(),l=new IntersectionObserver(u=>{for(let h of u)h.isIntersecting&&(o(),n.has(Vt)&&(l.disconnect(),delete t.dataset[e]))},i);return l.observe(t),()=>l.disconnect()}};var Ht="session",Wt={type:1,name:"persist",mods:new Set([Ht]),onLoad:({key:t,effect:e,mods:n,signals:r,value:i})=>{t=D(t,n),t===""&&(t=V);let o=n.has(Ht)?sessionStorage:localStorage,l=i.split(/\s+/).filter(T=>T!=="");l=l.map(T=>K(T));let u=()=>{let T=o.getItem(t)||"{}",b=JSON.parse(T);r.merge(b)},h=()=>{let T;l.length?T=r.subset(...l):T=r.values(),o.setItem(t,JSON.stringify(T))};return u(),e(()=>{h()})}};var qt={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,o=new URL(r,i).toString();window.history.replaceState({},"",o)})}};var Ce="smooth",qe="instant",$e="auto",$t="hstart",Gt="hcenter",Ut="hend",Bt="hnearest",jt="vstart",Kt="vcenter",Jt="vend",zt="vnearest",Nn="focus",Le="center",Yt="start",Xt="end",Qt="nearest",Zt={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([Ce,qe,$e,$t,Gt,Ut,Bt,jt,Kt,Jt,zt,Nn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:Ce,block:Le,inline:Le};if(n.has(Ce)&&(i.behavior=Ce),n.has(qe)&&(i.behavior=qe),n.has($e)&&(i.behavior=$e),n.has($t)&&(i.inline=Yt),n.has(Gt)&&(i.inline=Le),n.has(Ut)&&(i.inline=Xt),n.has(Bt)&&(i.inline=Qt),n.has(jt)&&(i.block=Yt),n.has(Kt)&&(i.block=Le),n.has(Jt)&&(i.block=Xt),n.has(zt)&&(i.block=Qt),!(e instanceof HTMLElement||e instanceof SVGElement))throw N("ScrollIntoViewInvalidElement",t);return e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r],()=>{}}};var en="none",tn="display",nn={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===en&&t.removeProperty(tn):t.setProperty(tn,en)})}};var rn="view-transition",sn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===rn&&(t=!0);if(!t){let e=document.createElement("meta");e.name=rn,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!J){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let o=e.style;o.viewTransitionName=i})}};var on={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let o=i();for(let[l,u]of Object.entries(o))t.setAttribute(l,u)}):(e=ae(e),n(async()=>{let o=!1;try{o=i()}catch{}let l;typeof o=="string"?l=o:l=JSON.stringify(o),!l||l==="false"||l==="null"||l==="undefined"?t.removeAttribute(e):t.setAttribute(e,l)}))}};var Pn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,an=["change","input","keydown"],ln={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:o,effect:l}=t,u=n?D(n,r):K(o),h=()=>{},T=()=>{},b=e.tagName.toLowerCase(),w="",y=b.includes("input"),A=e.getAttribute("type"),S=b.includes("checkbox")||y&&A==="checkbox";S&&(w=!1),y&&A==="number"&&(w=0);let v=b.includes("select"),m=b.includes("radio")||y&&A==="radio",s=y&&A==="file";m&&(e.getAttribute("name")?.length||e.setAttribute("name",u)),i.upsertIfMissing(u,w),h=()=>{let a="value"in e,g=i.value(u),p=`${g}`;if(S||m){let d=e;Array.isArray(g)?d.checked=g.includes(d.value):typeof g=="string"?d.checked=p===d.value:d.checked=!!g||g==="true"}else if(v){let d=e;if(d.multiple)for(let _ of d.options){if(_?.disabled)return;Array.isArray(g)||typeof g=="string"?_.selected=g.includes(_.value):typeof g=="number"?_.selected=g===Number(_.value):_.selected=g}else d.value=p}else s||(a?e.value=p:e.setAttribute("value",p))},T=async()=>{if(s){let d=[...e?.files||[]],_=[],R=[],x=[];await Promise.all(d.map(C=>new Promise(F=>{let L=new FileReader;L.onload=()=>{if(typeof L.result!="string")throw N("InvalidFileResultType",t,{resultType:typeof L.result});let X=L.result.match(Pn);if(!X?.groups)throw N("InvalidDataUri",t,{result:L.result});_.push(X.groups.contents),R.push(X.groups.mime),x.push(C.name)},L.onloadend=()=>F(void 0),L.readAsDataURL(C)}))),i.setValue(u,_),i.setValue(`${u}Mimes`,R),i.setValue(`${u}Names`,x);return}let a=i.value(u),g=e||e;if(S){let d=g.checked||g.getAttribute("checked")==="true";if(Array.isArray(a)){let _=new Set(a);d?_.add(g.value):_.delete(g.value),i.setValue(u,[..._])}else if(typeof a=="string"){let _=d?g.value:"";i.setValue(u,_)}else i.setValue(u,d);return}let p=g.value||g.getAttribute("value")||"";if(typeof a=="number")i.setValue(u,Number(p));else if(typeof a=="string")i.setValue(u,p||"");else if(typeof a=="boolean")i.setValue(u,!!p);else if(Array.isArray(a))if(v){let R=[...e.selectedOptions].filter(x=>x.selected).map(x=>x.value);i.setValue(u,R)}else i.setValue(u,JSON.stringify(p.split(",")));else if(!(typeof a>"u"))throw N("BindUnsupportedSignalType",t,{signalType:typeof a})};for(let a of an)e.addEventListener(a,T);let f=l(()=>h()),c=a=>{a.persisted&&T()};return window.addEventListener("pageshow",c),()=>{f();for(let a of an)e.removeEventListener(a,T);window.removeEventListener("pageshow",c)}}};var un={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let o=t.classList,l=i();return r(()=>{if(e===""){let u=l();for(let[h,T]of Object.entries(u)){let b=h.split(/\s+/);T?o.add(...b):o.remove(...b)}}else e=D(e,n),l()?o.add(e):o.remove(e)})}};function ge(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function ie(t,e,n=!1){return t?t.has(e.toLowerCase()):n}var Cn="evt",Ge="signalsChange",Ln=Ge.length,cn={type:1,name:"on",keyReq:1,valReq:1,argNames:[Cn],removeOnLoad:t=>t.startsWith("onLoad"),onLoad:({el:t,key:e,mods:n,rawKey:r,signals:i,value:o,effect:l,genRX:u})=>{let h=u(),T=t;n.has("window")&&(T=window);let b=m=>{m&&((n.has("prevent")||e==="submit")&&m.preventDefault(),n.has("stop")&&m.stopPropagation()),h(m)},w=n.get("delay");if(w){let m=ge(w);b=Te(b,m)}let y=n.get("debounce");if(y){let m=ge(y),s=ie(y,"leading",!1),f=!ie(y,"notrail",!1);b=et(b,m,s,f)}let A=n.get("throttle");if(A){let m=ge(A),s=!ie(A,"noleading",!1),f=ie(A,"trail",!1);b=tt(b,m,s,f)}if(n.has("viewtransition")&&J){let m=b;b=(...s)=>document.startViewTransition(()=>m(...s))}let S={capture:!0,passive:!1,once:!1};if(n.has("capture")||(S.capture=!1),n.has("passive")&&(S.passive=!0),n.has("once")&&(S.once=!0),e==="load")return setTimeout(()=>b(),0),()=>{};if(e==="interval"){let m=1e3,s=n.get("duration");s&&(m=ge(s),ie(s,"leading",!1)&&(t.dataset[r.replace(".leading","")]=o,delete t.dataset[r],b()));let f=setInterval(b,m);return()=>{clearInterval(f)}}if(e==="raf"){let m,s=()=>{b(),m=requestAnimationFrame(s)};return m=requestAnimationFrame(s),()=>{m&&cancelAnimationFrame(m)}}if(e.startsWith(Ge)){if(e===Ge){b();let f=c=>b(c);return document.addEventListener(oe,f),()=>{document.removeEventListener(oe,f)}}let m=D(B(e.slice(Ln)),n),s=new Map;return i.walk((f,c)=>{f.startsWith(m)&&s.set(c,c.value)}),l(()=>{for(let[f,c]of s)c!==f.value&&(b(),s.set(f,f.value))})}if(n.has("outside")){T=document;let m=b;b=f=>{let c=f?.target;t.contains(c)||m(f)}}let v=D(e,n);return T.addEventListener(v,b,S),()=>{T.removeEventListener(v,b)}}};var fn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let o=e?D(e,n):K(i);r.setValue(o,t)}};var dn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||N("TextInvalidElement",t),n(()=>{let o=i(t);e.textContent=`${o}`})}};var{round:In,max:Dn,min:Vn}=Math,pn={type:3,name:"fit",fn:(t,e,n,r,i,o,l=!1,u=!1)=>{let h=(e-n)/(r-n)*(o-i)+i;return u&&(h=In(h)),l&&(h=Dn(i,Vn(o,h))),h}};var mn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var gn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};Me.load(on,ln,un,cn,fn,nn,dn,xt,Tt,Et,_t,At,St,Nt,Pt,Ct,Lt,Rt,It,Dt,Ft,Wt,qt,Zt,sn,pn,mn,gn);Me.aliasPrefix="ds";var no=Me;export{no as Datastar};
//# sourceMappingURL=datastar-aliased.js.map
