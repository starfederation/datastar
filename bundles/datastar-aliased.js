// Datastar v1.0.0-beta.10
var tt=/ðŸ–•JS_DSðŸš€/.source,Ae=tt.slice(0,5),Fe=tt.slice(4),q="datastar",nt="Datastar-Request",rt=1e3,it="type module",Ee=!1,ot=!1,st=!0,U={Morph:"morph",Inner:"inner",Outer:"outer",Prepend:"prepend",Append:"append",Before:"before",After:"after",UpsertAttributes:"upsertAttributes"},at=U.Morph,F={MergeFragments:"datastar-merge-fragments",MergeSignals:"datastar-merge-signals",RemoveFragments:"datastar-remove-fragments",RemoveSignals:"datastar-remove-signals",ExecuteScript:"datastar-execute-script"};var w=(r=>(r[r.Attribute=1]="Attribute",r[r.Watcher=2]="Watcher",r[r.Action=3]="Action",r))(w||{});var ge=`${q}-signals`;var X=t=>t.trim()==="true",z=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase()),he=t=>z(t).replace(/-./g,e=>e[1].toUpperCase()),qe=t=>z(t).replace(/-/g,"_"),Pn=t=>he(t).replace(/^./,e=>e[0].toUpperCase()),_e=t=>new Function(`return Object.assign({}, ${t})`)(),Z=t=>t.startsWith("$")?t.slice(1):t,Cn={kebab:z,snake:qe,pascal:Pn};function H(t,e){for(let n of e.get("case")||[]){let r=Cn[n];r&&(t=r(t))}return t}var In="computed",lt={type:1,name:In,keyReq:1,valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{t=H(t,e);let i=r();n.setComputed(t,i)}};var ut={type:1,name:"signals",onLoad:t=>{let{key:e,mods:n,signals:r,value:i,genRX:s}=t,o=n.has("ifmissing");if(e!==""){let a=H(e,n),p=i===""?i:s()();o?r.upsertIfMissing(a,p):r.setValue(a,p)}else{let a=_e(t.value);t.value=JSON.stringify(a);let h=s()();r.merge(h,o)}}};var ct={type:1,name:"star",keyReq:2,valReq:2,onLoad:()=>{alert("YOU ARE PROBABLY OVERCOMPLICATING IT")}};var ae=class{#e=0;#t;constructor(e=q){this.#t=e}with(e){if(typeof e=="string")for(let n of e.split(""))this.with(n.charCodeAt(0));else typeof e=="boolean"?this.with(1<<(e?7:3)):this.#e=this.#e*33^e;return this}get value(){return this.#e}get string(){return this.#t+Math.abs(this.#e).toString(36)}};function Re(t){if(t.id)return t.id;let e=new ae,n=t;for(;n;){if(e.with(n.tagName||""),n.id){e.with(n.id);break}let r=n?.parentNode;r&&e.with([...r.children].indexOf(n)),n=r}return e.string}function we(t,e){return new ae().with(t).with(e).value}function ye(t,e){if(!t||!(t instanceof HTMLElement||t instanceof SVGElement))return null;let n=t.dataset;if("starIgnore"in n)return null;"starIgnore__self"in n||e(t);let r=t.firstElementChild;for(;r;)ye(r,e),r=r.nextElementSibling}var kn="https://data-star.dev/errors";function We(t,e,n={}){let r=new Error;r.name=`${q} ${t} error`;let i=qe(e),s=new URLSearchParams({metadata:JSON.stringify(n)}).toString(),o=JSON.stringify(n,null,2);return r.message=`${e}
More info: ${kn}/${t}/${i}?${s}
Context: ${o}`,r}function B(t,e,n={}){return We("internal",e,Object.assign({from:t},n))}function W(t,e,n={}){let r={plugin:{name:e.plugin.name,type:w[e.plugin.type]}};return We("init",t,Object.assign(r,n))}function N(t,e,n={}){let r={plugin:{name:e.plugin.name,type:w[e.plugin.type]},element:{id:e.el.id,tag:e.el.tagName},expression:{rawKey:e.rawKey,key:e.key,value:e.value,validSignals:e.signals.paths(),fnContent:e.fnContent}};return We("runtime",t,Object.assign(r,n))}var le="preact-signals",Ln=Symbol.for("preact-signals"),j=1,ue=2,be=4,fe=8,xe=16,ce=32;function Ge(){Me++}function Ue(){if(Me>1){Me--;return}let t,e=!1;for(;ve!==void 0;){let n=ve;for(ve=void 0,$e++;n!==void 0;){let r=n._nextBatchedEffect;if(n._nextBatchedEffect=void 0,n._flags&=~ue,!(n._flags&fe)&&dt(n))try{n._callback()}catch(i){e||(t=i,e=!0)}n=r}}if($e=0,Me--,e)throw t}var P;var ve,Me=0,$e=0,Ne=0;function ft(t){if(P===void 0)return;let e=t._node;if(e===void 0||e._target!==P)return e={_version:0,_source:t,_prevSource:P._sources,_nextSource:void 0,_target:P,_prevTarget:void 0,_nextTarget:void 0,_rollbackNode:e},P._sources!==void 0&&(P._sources._nextSource=e),P._sources=e,t._node=e,P._flags&ce&&t._subscribe(e),e;if(e._version===-1)return e._version=0,e._nextSource!==void 0&&(e._nextSource._prevSource=e._prevSource,e._prevSource!==void 0&&(e._prevSource._nextSource=e._nextSource),e._prevSource=P._sources,e._nextSource=void 0,P._sources._nextSource=e,P._sources=e),e}function k(t){this._value=t,this._version=0,this._node=void 0,this._targets=void 0}k.prototype.brand=Ln;k.prototype._refresh=()=>!0;k.prototype._subscribe=function(t){this._targets!==t&&t._prevTarget===void 0&&(t._nextTarget=this._targets,this._targets!==void 0&&(this._targets._prevTarget=t),this._targets=t)};k.prototype._unsubscribe=function(t){if(this._targets!==void 0){let e=t._prevTarget,n=t._nextTarget;e!==void 0&&(e._nextTarget=n,t._prevTarget=void 0),n!==void 0&&(n._prevTarget=e,t._nextTarget=void 0),t===this._targets&&(this._targets=n)}};k.prototype.subscribe=function(t){return de(()=>{let e=this.value,n=P;P=void 0;try{t(e)}finally{P=n}})};k.prototype.valueOf=function(){return this.value};k.prototype.toString=function(){return`${this.value}`};k.prototype.toJSON=function(){return this.value};k.prototype.peek=function(){let t=P;P=void 0;try{return this.value}finally{P=t}};Object.defineProperty(k.prototype,"value",{get(){let t=ft(this);return t!==void 0&&(t._version=this._version),this._value},set(t){if(t!==this._value){if($e>100)throw B(le,"SignalCycleDetected");let e=this._value,n=t;this._value=t,this._version++,Ne++,Ge();try{for(let r=this._targets;r!==void 0;r=r._nextTarget)r._target._notify()}finally{Ue()}this?._onChange({old:e,revised:n})}}});function dt(t){for(let e=t._sources;e!==void 0;e=e._nextSource)if(e._source._version!==e._version||!e._source._refresh()||e._source._version!==e._version)return!0;return!1}function pt(t){for(let e=t._sources;e!==void 0;e=e._nextSource){let n=e._source._node;if(n!==void 0&&(e._rollbackNode=n),e._source._node=e,e._version=-1,e._nextSource===void 0){t._sources=e;break}}}function mt(t){let e=t._sources,n;for(;e!==void 0;){let r=e._prevSource;e._version===-1?(e._source._unsubscribe(e),r!==void 0&&(r._nextSource=e._nextSource),e._nextSource!==void 0&&(e._nextSource._prevSource=r)):n=e,e._source._node=e._rollbackNode,e._rollbackNode!==void 0&&(e._rollbackNode=void 0),e=r}t._sources=n}function ne(t){k.call(this,void 0),this._fn=t,this._sources=void 0,this._globalVersion=Ne-1,this._flags=be}ne.prototype=new k;ne.prototype._refresh=function(){if(this._flags&=~ue,this._flags&j)return!1;if((this._flags&(be|ce))===ce||(this._flags&=~be,this._globalVersion===Ne))return!0;if(this._globalVersion=Ne,this._flags|=j,this._version>0&&!dt(this))return this._flags&=~j,!0;let t=P;try{pt(this),P=this;let e=this._fn();(this._flags&xe||this._value!==e||this._version===0)&&(this._value=e,this._flags&=~xe,this._version++)}catch(e){this._value=e,this._flags|=xe,this._version++}return P=t,mt(this),this._flags&=~j,!0};ne.prototype._subscribe=function(t){if(this._targets===void 0){this._flags|=be|ce;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._subscribe(e)}k.prototype._subscribe.call(this,t)};ne.prototype._unsubscribe=function(t){if(this._targets!==void 0&&(k.prototype._unsubscribe.call(this,t),this._targets===void 0)){this._flags&=~ce;for(let e=this._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e)}};ne.prototype._notify=function(){if(!(this._flags&ue)){this._flags|=be|ue;for(let t=this._targets;t!==void 0;t=t._nextTarget)t._target._notify()}};Object.defineProperty(ne.prototype,"value",{get(){if(this._flags&j)throw B(le,"SignalCycleDetected");let t=ft(this);if(this._refresh(),t!==void 0&&(t._version=this._version),this._flags&xe)throw B(le,"GetComputedError",{value:this._value});return this._value}});function gt(t){return new ne(t)}function ht(t){let e=t._cleanup;if(t._cleanup=void 0,typeof e=="function"){Ge();let n=P;P=void 0;try{e()}catch(r){throw t._flags&=~j,t._flags|=fe,Be(t),B(le,"CleanupEffectError",{error:r})}finally{P=n,Ue()}}}function Be(t){for(let e=t._sources;e!==void 0;e=e._nextSource)e._source._unsubscribe(e);t._fn=void 0,t._sources=void 0,ht(t)}function Vn(t){if(P!==this)throw B(le,"EndEffectError");mt(this),P=t,this._flags&=~j,this._flags&fe&&Be(this),Ue()}function Se(t){this._fn=t,this._cleanup=void 0,this._sources=void 0,this._nextBatchedEffect=void 0,this._flags=ce}Se.prototype._callback=function(){let t=this._start();try{if(this._flags&fe||this._fn===void 0)return;let e=this._fn();typeof e=="function"&&(this._cleanup=e)}finally{t()}};Se.prototype._start=function(){if(this._flags&j)throw B(le,"SignalCycleDetected");this._flags|=j,this._flags&=~fe,ht(this),pt(this),Ge();let t=P;return P=this,Vn.bind(this,t)};Se.prototype._notify=function(){this._flags&ue||(this._flags|=ue,this._nextBatchedEffect=ve,ve=this)};Se.prototype._dispose=function(){this._flags|=fe,this._flags&j||Be(this)};function de(t){let e=new Se(t);try{e._callback()}catch(n){throw e._dispose(),n}return e._dispose.bind(e)}var yt="namespacedSignals",pe=t=>{document.dispatchEvent(new CustomEvent(ge,{detail:Object.assign({added:[],removed:[],updated:[]},t)}))};function vt(t,e=!1){let n={};for(let r in t)if(Object.hasOwn(t,r)){if(e&&r.startsWith("_"))continue;let i=t[r];i instanceof k?n[r]=i.value:n[r]=vt(i)}return n}function bt(t,e,n=!1){let r={added:[],removed:[],updated:[]};for(let i in e)if(Object.hasOwn(e,i)){if(i.match(/\_\_+/))throw B(yt,"InvalidSignalKey",{key:i});let s=e[i];if(s instanceof Object&&!Array.isArray(s)){t[i]||(t[i]={});let o=bt(t[i],s,n);r.added.push(...o.added.map(a=>`${i}.${a}`)),r.removed.push(...o.removed.map(a=>`${i}.${a}`)),r.updated.push(...o.updated.map(a=>`${i}.${a}`))}else{if(Object.hasOwn(t,i)){if(n)continue;let p=t[i];if(p instanceof k){let h=p.value;p.value=s,h!==s&&r.updated.push(i);continue}}let a=new k(s);a._onChange=()=>{pe({updated:[i]})},t[i]=a,r.added.push(i)}}return r}function St(t,e){for(let n in t)if(Object.hasOwn(t,n)){let r=t[n];r instanceof k?e(n,r):St(r,(i,s)=>{e(`${n}.${i}`,s)})}}function Dn(t,...e){let n={};for(let r of e){let i=r.split("."),s=t,o=n;for(let p=0;p<i.length-1;p++){let h=i[p];if(!s[h])return{};o[h]||(o[h]={}),s=s[h],o=o[h]}let a=i[i.length-1];o[a]=s[a]}return n}var Pe=class{#e={};exists(e){return!!this.signal(e)}signal(e){let n=e.split("."),r=this.#e;for(let o=0;o<n.length-1;o++){let a=n[o];if(!r[a])return null;r=r[a]}let i=n[n.length-1],s=r[i];if(!s)throw B(yt,"SignalNotFound",{path:e});return s}setSignal(e,n){let r=e.split("."),i=this.#e;for(let o=0;o<r.length-1;o++){let a=r[o];i[a]||(i[a]={}),i=i[a]}let s=r[r.length-1];i[s]=n}setComputed(e,n){let r=gt(()=>n());this.setSignal(e,r)}value(e){return this.signal(e)?.value}setValue(e,n){let{signal:r}=this.upsertIfMissing(e,n),i=r.value;r.value=n,i!==n&&pe({updated:[e]})}upsertIfMissing(e,n){let r=e.split("."),i=this.#e;for(let p=0;p<r.length-1;p++){let h=r[p];i[h]||(i[h]={}),i=i[h]}let s=r[r.length-1],o=i[s];if(o instanceof k)return{signal:o,inserted:!1};let a=new k(n);return a._onChange=()=>{pe({updated:[e]})},i[s]=a,pe({added:[e]}),{signal:a,inserted:!0}}remove(...e){if(!e.length){this.#e={};return}let n=Array();for(let r of e){let i=r.split("."),s=this.#e;for(let a=0;a<i.length-1;a++){let p=i[a];if(!s[p])return;s=s[p]}let o=i[i.length-1];delete s[o],n.push(r)}pe({removed:n})}merge(e,n=!1){let r=bt(this.#e,e,n);(r.added.length||r.removed.length||r.updated.length)&&pe(r)}subset(...e){return Dn(this.values(),...e)}walk(e){St(this.#e,e)}paths(){let e=new Array;return this.walk(n=>e.push(n)),e}values(e=!1){return vt(this.#e,e)}JSON(e=!0,n=!1){let r=this.values(n);return e?JSON.stringify(r,null,2):JSON.stringify(r)}toString(){return this.JSON()}};var Tt=new Pe,Ce={},Ke=[],re=new Map,je=null,Je="";function ze(t){Je=t}function Ie(...t){for(let e of t){let n={plugin:e,signals:Tt,effect:i=>de(i),actions:Ce,removals:re,applyToElement:ke},r;switch(e.type){case 3:{Ce[e.name]=e;break}case 1:{let i=e;Ke.push(i),r=i.onGlobalInit;break}case 2:{r=e.onGlobalInit;break}default:throw W("InvalidPluginType",n)}r&&r(n)}Ke.sort((e,n)=>{let r=n.name.length-e.name.length;return r!==0?r:e.name.localeCompare(n.name)})}function Ye(){queueMicrotask(()=>{ke(document.documentElement),On()})}function ke(t){ye(t,e=>{let n=new Array,r=re.get(e.id)||new Map,i=new Map([...r]),s=new Map;for(let o of Object.keys(e.dataset)){if(!o.startsWith(Je))break;let a=e.dataset[o]||"",p=we(o,a);s.set(o,p),r.has(p)?i.delete(p):n.push(o)}for(let[o,a]of i)a();for(let o of n){let a=s.get(o);Hn(e,o,a)}})}function On(){je||(je=new MutationObserver(t=>{let e=new Set,n=new Set;for(let{target:r,type:i,addedNodes:s,removedNodes:o}of t)switch(i){case"childList":{for(let a of o)e.add(a);for(let a of s)n.add(a)}break;case"attributes":{n.add(r);break}}for(let r of e){let i=re.get(r.id);if(i){for(let[s,o]of i)o(),i.delete(s);i.size===0&&re.delete(r.id)}}for(let r of n)ke(r)}),je.observe(document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}))}function Hn(t,e,n){let r=he(e.slice(Je.length)),i=Ke.find(A=>new RegExp(`^${A.name}([A-Z]|_|$)`).test(r));if(!i)return;t.id.length||(t.id=Re(t));let[s,...o]=r.slice(i.name.length).split(/\_\_+/),a=s.length>0;a&&(s=he(s));let p=t.dataset[e]||"",h=p.length>0,v={signals:Tt,applyToElement:ke,effect:A=>de(A),actions:Ce,removals:re,genRX:()=>Fn(v,...i.argNames||[]),plugin:i,el:t,rawKey:r,key:s,value:p,mods:new Map},C=i.keyReq||0;if(a){if(C===2)throw N(`${i.name}KeyNotAllowed`,v)}else if(C===1)throw N(`${i.name}KeyRequired`,v);let b=i.valReq||0;if(h){if(b===2)throw N(`${i.name}ValueNotAllowed`,v)}else if(b===1)throw N(`${i.name}ValueRequired`,v);if(C===3||b===3){if(a&&h)throw N(`${i.name}KeyAndValueProvided`,v);if(!a&&!h)throw N(`${i.name}KeyOrValueRequired`,v)}for(let A of o){let[_,...T]=A.split(".");v.mods.set(he(_),new Set(T.map(c=>c.toLowerCase())))}let E=i.onLoad(v)??(()=>{}),y=re.get(t.id);y||(y=new Map,re.set(t.id,y)),y.set(n,E)}function Fn(t,...e){let n="",r=/(\/(\\\/|[^\/])*\/|"(\\"|[^\"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|[^;])+/gm,i=t.value.trim().match(r);if(i){let E=i.length-1,y=i[E].trim();y.startsWith("return")||(i[E]=`return (${y});`),n=i.join(`;
`)}let s=new Map,o=new RegExp(`(?:${Ae})(.*?)(?:${Fe})`,"gm");for(let E of n.matchAll(o)){let y=E[1],A=new ae("dsEscaped").with(y).string;s.set(A,y),n=n.replace(Ae+y+Fe,A)}let a=/@(\w*)\(/gm,p=n.matchAll(a),h=new Set;for(let E of p)h.add(E[1]);let v=new RegExp(`@(${Object.keys(Ce).join("|")})\\(`,"gm");n=n.replaceAll(v,"ctx.actions.$1.fn(ctx,");let C=t.signals.paths();if(C.length){let E=new RegExp(`\\$(${C.join("|")})(\\W|$)`,"gm");n=n.replaceAll(E,"ctx.signals.signal('$1').value$2")}for(let[E,y]of s)n=n.replace(E,y);let b=`return (() => {
${n}
})()`;t.fnContent=b;try{let E=new Function("ctx",...e,b);return(...y)=>{try{return E(t,...y)}catch(A){throw N("ExecuteExpression",t,{error:A.message})}}}catch(E){throw N("GenerateExpression",t,{error:E.message})}}Ie(ct,ut,lt);var ie=`${q}-sse`,Le="started",Ve="finished",At="error",Et="retrying",_t="retries-failed";function K(t,e){document.addEventListener(ie,n=>{if(n.detail.type!==t)return;let{argsRaw:r}=n.detail;e(r)})}function Q(t,e,n){document.dispatchEvent(new CustomEvent(ie,{detail:{type:t,elId:e,argsRaw:n}}))}async function qn(t,e){let n=t.getReader(),r;for(;!(r=await n.read()).done;)e(r.value)}function Wn(t){let e,n,r,i=!1;return function(o){e===void 0?(e=o,n=0,r=-1):e=Gn(e,o);let a=e.length,p=0;for(;n<a;){i&&(e[n]===10&&(p=++n),i=!1);let h=-1;for(;n<a&&h===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-p);break;case 13:i=!0;case 10:h=n;break}if(h===-1)break;t(e.subarray(p,h),r),p=n,r=-1}p===a?e=void 0:p!==0&&(e=e.subarray(p),n-=p)}}function $n(t,e,n){let r=Rt(),i=new TextDecoder;return function(o,a){if(o.length===0)n?.(r),r=Rt();else if(a>0){let p=i.decode(o.subarray(0,a)),h=a+(o[a+1]===32?2:1),v=i.decode(o.subarray(h));switch(p){case"data":r.data=r.data?`${r.data}
${v}`:v;break;case"event":r.event=v;break;case"id":t(r.id=v);break;case"retry":{let C=Number.parseInt(v,10);Number.isNaN(C)||e(r.retry=C);break}}}}}function Gn(t,e){let n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Rt(){return{data:"",event:"",id:"",retry:void 0}}var Un="text/event-stream",wt="last-event-id";function xt(t,e,{signal:n,headers:r,onopen:i,onmessage:s,onclose:o,onerror:a,openWhenHidden:p,fetch:h,retryInterval:v=1e3,retryScaler:C=2,retryMaxWaitMs:b=3e4,retryMaxCount:E=10,...y}){return new Promise((A,_)=>{let T=0,c={...r};c.accept||(c.accept=Un);let d;function u(){d.abort(),document.hidden||S()}p||document.addEventListener("visibilitychange",u);let l=0;function g(){document.removeEventListener("visibilitychange",u),window.clearTimeout(l),d.abort()}n?.addEventListener("abort",()=>{g(),A()});let m=h??window.fetch,f=i??function(){};async function S(){d=new AbortController;try{let x=await m(t,{...y,headers:c,signal:d.signal});await f(x),await qn(x.body,Wn($n(R=>{R?c[wt]=R:delete c[wt]},R=>{v=R},s))),o?.(),g(),A()}catch(x){if(!d.signal.aborted)try{let R=a?.(x)??v;window.clearTimeout(l),l=window.setTimeout(S,R),v*=C,v=Math.min(v,b),T++,T>E?(Q(_t,e,{}),g(),_("Max retries reached.")):console.error(`Datastar failed to reach ${t.toString()} retrying in ${R}ms.`)}catch(R){g(),_(R)}}}S()})}var Mt=t=>`${t}`.includes("text/event-stream"),J=async(t,e,n,r)=>{let{el:i,signals:s}=t,o=i.id,{headers:a,contentType:p,includeLocal:h,selector:v,openWhenHidden:C,retryInterval:b,retryScaler:E,retryMaxWaitMs:y,retryMaxCount:A,abort:_}=Object.assign({headers:{},contentType:"json",includeLocal:!1,selector:null,openWhenHidden:!1,retryInterval:rt,retryScaler:2,retryMaxWaitMs:3e4,retryMaxCount:10,abort:void 0},r),T=e.toLowerCase(),c=()=>{};try{if(Q(Le,o,{}),!n?.length)throw N("SseNoUrlProvided",t,{action:T});let d={};d[nt]=!0,p==="json"&&(d["Content-Type"]="application/json");let u=Object.assign({},d,a),l={method:e,headers:u,openWhenHidden:C,retryInterval:b,retryScaler:E,retryMaxWaitMs:y,retryMaxCount:A,signal:_,onopen:async f=>{if(f.status>=400){let S=f.status.toString();Q(At,o,{status:S})}},onmessage:f=>{if(!f.event.startsWith(q))return;let S=f.event,x={},R=f.data.split(`
`);for(let V of R){let I=V.indexOf(" "),O=V.slice(0,I),D=x[O];D||(D=[],x[O]=D);let $=V.slice(I+1);D.push($)}let M={};for(let[V,I]of Object.entries(x))M[V]=I.join(`
`);Q(S,o,M)},onerror:f=>{if(Mt(f))throw N("InvalidContentType",t,{url:n});f&&(console.error(f.message),Q(Et,o,{message:f.message}))}},g=new URL(n,window.location.origin),m=new URLSearchParams(g.search);if(p==="json"){let f=s.JSON(!1,!h);e==="GET"?m.set(q,f):l.body=f}else if(p==="form"){let f=v?document.querySelector(v):i.closest("form");if(f===null)throw v?N("SseFormNotFound",t,{action:T,selector:v}):N("SseClosestFormNotFound",t,{action:T});if(i!==f){let x=R=>R.preventDefault();f.addEventListener("submit",x),c=()=>f.removeEventListener("submit",x)}if(!f.checkValidity()){f.reportValidity(),c();return}let S=new FormData(f);if(e==="GET"){let x=new URLSearchParams(S);for(let[R,M]of x)m.set(R,M)}else l.body=S}else throw N("SseInvalidContentType",t,{action:T,contentType:p});g.search=m.toString();try{await xt(g.toString(),o,l)}catch(f){if(!Mt(f))throw N("SseFetchFailed",t,{method:e,url:n,error:f})}}finally{Q(Ve,o,{}),c()}};var Nt={type:3,name:"delete",fn:async(t,e,n)=>J(t,"DELETE",e,{...n})};var Pt={type:3,name:"get",fn:async(t,e,n)=>J(t,"GET",e,{...n})};var Ct={type:3,name:"patch",fn:async(t,e,n)=>J(t,"PATCH",e,{...n})};var It={type:3,name:"post",fn:async(t,e,n)=>J(t,"POST",e,{...n})};var kt={type:3,name:"put",fn:async(t,e,n)=>J(t,"PUT",e,{...n})};var Lt={type:1,name:"indicator",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let s=e?H(e,n):Z(i),{signal:o}=r.upsertIfMissing(s,!1),a=p=>{let{type:h,elId:v}=p.detail;if(v===t.id)switch(h){case Le:o.value=!0;break;case Ve:o.value=!1,document.removeEventListener(ie,a);break}};document.addEventListener(ie,a)}};var Vt={type:2,name:F.ExecuteScript,onGlobalInit:async t=>{K(F.ExecuteScript,({autoRemove:e=`${st}`,attributes:n=it,script:r})=>{let i=X(e);if(!r?.length)throw W("NoScriptProvided",t);let s=document.createElement("script");for(let o of n.split(`
`)){let a=o.indexOf(" "),p=a?o.slice(0,a):o,h=a?o.slice(a):"";s.setAttribute(p.trim(),h.trim())}s.text=r,document.head.appendChild(s),i&&s.remove()})}};var Te=document,Y=!!Te.startViewTransition;function me(t,e){if(e.has("viewtransition")&&Y){let n=t;t=(...r)=>document.startViewTransition(()=>n(...r))}return t}var Dt=function(){"use strict";let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:b=>b.getAttribute("im-preserve")==="true",shouldReAppend:b=>b.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function n(b,E,y={}){b=v(b);let A=C(E),_=h(b,A,y),T=i(_,()=>a(_,b,A,c=>c.morphStyle==="innerHTML"?(s(c,b,A),Array.from(b.childNodes)):r(c,b,A)));return _.pantry.remove(),T}function r(b,E,y){let A=C(E);return s(b,A,y,E,E.nextSibling),Array.from(A.childNodes)}function i(b,E){if(!b.config.restoreFocus)return E();let y=document.activeElement;if(!(y instanceof HTMLInputElement||y instanceof HTMLTextAreaElement))return E();let{id:A,selectionStart:_,selectionEnd:T}=y,c=E();return A&&A!==document.activeElement?.id&&(y=b.target.querySelector(`[id="${A}"]`),y?.focus()),y&&!y.selectionEnd&&T&&y.setSelectionRange(_,T),c}let s=function(){function b(u,l,g,m=null,f=null){l instanceof HTMLTemplateElement&&g instanceof HTMLTemplateElement&&(l=l.content,g=g.content),m||=l.firstChild;for(let S of g.childNodes){if(m&&m!=f){let R=y(u,S,m,f);if(R){R!==m&&_(u,m,R),o(R,S,u),m=R.nextSibling;continue}}if(S instanceof Element&&u.persistentIds.has(S.id)){let R=T(l,S.id,m,u);o(R,S,u),m=R.nextSibling;continue}let x=E(l,S,m,u);x&&(m=x.nextSibling)}for(;m&&m!=f;){let S=m;m=m.nextSibling,A(u,S)}}function E(u,l,g,m){if(m.callbacks.beforeNodeAdded(l)===!1)return null;if(m.idMap.has(l)){let f=document.createElement(l.tagName);return u.insertBefore(f,g),o(f,l,m),m.callbacks.afterNodeAdded(f),f}else{let f=document.importNode(l,!0);return u.insertBefore(f,g),m.callbacks.afterNodeAdded(f),f}}let y=function(){function u(m,f,S,x){let R=null,M=f.nextSibling,V=0,I=S;for(;I&&I!=x;){if(g(I,f)){if(l(m,I,f))return I;R===null&&(m.idMap.has(I)||(R=I))}if(R===null&&M&&g(I,M)&&(V++,M=M.nextSibling,V>=2&&(R=void 0)),I.contains(document.activeElement))break;I=I.nextSibling}return R||null}function l(m,f,S){let x=m.idMap.get(f),R=m.idMap.get(S);if(!R||!x)return!1;for(let M of x)if(R.has(M))return!0;return!1}function g(m,f){let S=m,x=f;return S.nodeType===x.nodeType&&S.tagName===x.tagName&&(!S.id||S.id===x.id)}return u}();function A(u,l){if(u.idMap.has(l))d(u.pantry,l,null);else{if(u.callbacks.beforeNodeRemoved(l)===!1)return;l.parentNode?.removeChild(l),u.callbacks.afterNodeRemoved(l)}}function _(u,l,g){let m=l;for(;m&&m!==g;){let f=m;m=m.nextSibling,A(u,f)}return m}function T(u,l,g,m){let f=m.target.id===l&&m.target||m.target.querySelector(`[id="${l}"]`)||m.pantry.querySelector(`[id="${l}"]`);return c(f,m),d(u,f,g),f}function c(u,l){let g=u.id;for(;u=u.parentNode;){let m=l.idMap.get(u);m&&(m.delete(g),m.size||l.idMap.delete(u))}}function d(u,l,g){if(u.moveBefore)try{u.moveBefore(l,g)}catch{u.insertBefore(l,g)}else u.insertBefore(l,g)}return b}(),o=function(){function b(c,d,u){return u.ignoreActive&&c===document.activeElement?null:(u.callbacks.beforeNodeMorphed(c,d)===!1||(c instanceof HTMLHeadElement&&u.head.ignore||(c instanceof HTMLHeadElement&&u.head.style!=="morph"?p(c,d,u):(E(c,d,u),T(c,u)||s(u,c,d))),u.callbacks.afterNodeMorphed(c,d)),c)}function E(c,d,u){let l=d.nodeType;if(l===1){let g=c,m=d,f=g.attributes,S=m.attributes;for(let x of S)_(x.name,g,"update",u)||g.getAttribute(x.name)!==x.value&&g.setAttribute(x.name,x.value);for(let x=f.length-1;0<=x;x--){let R=f[x];if(R&&!m.hasAttribute(R.name)){if(_(R.name,g,"remove",u))continue;g.removeAttribute(R.name)}}T(g,u)||y(g,m,u)}(l===8||l===3)&&c.nodeValue!==d.nodeValue&&(c.nodeValue=d.nodeValue)}function y(c,d,u){if(c instanceof HTMLInputElement&&d instanceof HTMLInputElement&&d.type!=="file"){let l=d.value,g=c.value;A(c,d,"checked",u),A(c,d,"disabled",u),d.hasAttribute("value")?g!==l&&(_("value",c,"update",u)||(c.setAttribute("value",l),c.value=l)):_("value",c,"remove",u)||(c.value="",c.removeAttribute("value"))}else if(c instanceof HTMLOptionElement&&d instanceof HTMLOptionElement)A(c,d,"selected",u);else if(c instanceof HTMLTextAreaElement&&d instanceof HTMLTextAreaElement){let l=d.value,g=c.value;if(_("value",c,"update",u))return;l!==g&&(c.value=l),c.firstChild&&c.firstChild.nodeValue!==l&&(c.firstChild.nodeValue=l)}}function A(c,d,u,l){let g=d[u],m=c[u];if(g!==m){let f=_(u,c,"update",l);f||(c[u]=d[u]),g?f||c.setAttribute(u,""):_(u,c,"remove",l)||c.removeAttribute(u)}}function _(c,d,u,l){return c==="value"&&l.ignoreActiveValue&&d===document.activeElement?!0:l.callbacks.beforeAttributeUpdated(c,d,u)===!1}function T(c,d){return!!d.ignoreActiveValue&&c===document.activeElement&&c!==document.body}return b}();function a(b,E,y,A){if(b.head.block){let _=E.querySelector("head"),T=y.querySelector("head");if(_&&T){let c=p(_,T,b);return Promise.all(c).then(()=>{let d=Object.assign(b,{head:{block:!1,ignore:!0}});return A(d)})}}return A(b)}function p(b,E,y){let A=[],_=[],T=[],c=[],d=new Map;for(let l of E.children)d.set(l.outerHTML,l);for(let l of b.children){let g=d.has(l.outerHTML),m=y.head.shouldReAppend(l),f=y.head.shouldPreserve(l);g||f?m?_.push(l):(d.delete(l.outerHTML),T.push(l)):y.head.style==="append"?m&&(_.push(l),c.push(l)):y.head.shouldRemove(l)!==!1&&_.push(l)}c.push(...d.values());let u=[];for(let l of c){let g=document.createRange().createContextualFragment(l.outerHTML).firstChild;if(y.callbacks.beforeNodeAdded(g)!==!1){if("href"in g&&g.href||"src"in g&&g.src){let m,f=new Promise(function(S){m=S});g.addEventListener("load",function(){m()}),u.push(f)}b.appendChild(g),y.callbacks.afterNodeAdded(g),A.push(g)}}for(let l of _)y.callbacks.beforeNodeRemoved(l)!==!1&&(b.removeChild(l),y.callbacks.afterNodeRemoved(l));return y.head.afterHeadMorphed(b,{added:A,kept:T,removed:_}),u}let h=function(){function b(d,u,l){let{persistentIds:g,idMap:m}=T(d,u),f=E(l),S=f.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(S))throw`Do not understand how to morph style ${S}`;return{target:d,newContent:u,config:f,morphStyle:S,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,restoreFocus:f.restoreFocus,idMap:m,persistentIds:g,pantry:y(),callbacks:f.callbacks,head:f.head}}function E(d){let u=Object.assign({},e);return Object.assign(u,d),u.callbacks=Object.assign({},e.callbacks,d.callbacks),u.head=Object.assign({},e.head,d.head),u}function y(){let d=document.createElement("div");return d.hidden=!0,document.body.insertAdjacentElement("afterend",d),d}function A(d){let u=Array.from(d.querySelectorAll("[id]"));return d.id&&u.push(d),u}function _(d,u,l,g){for(let m of g)if(u.has(m.id)){let f=m;for(;f;){let S=d.get(f);if(S==null&&(S=new Set,d.set(f,S)),S.add(m.id),f===l)break;f=f.parentElement}}}function T(d,u){let l=A(d),g=A(u),m=c(l,g),f=new Map;_(f,m,d,l);let S=u.__idiomorphRoot||u;return _(f,m,S,g),{persistentIds:m,idMap:f}}function c(d,u){let l=new Set,g=new Map;for(let{id:f,tagName:S}of d)g.has(f)?l.add(f):g.set(f,S);let m=new Set;for(let{id:f,tagName:S}of u)m.has(f)?l.add(f):g.get(f)===S&&m.add(f);for(let f of l)m.delete(f);return m}return b}(),{normalizeElement:v,normalizeParent:C}=function(){let b=new WeakSet;function E(T){return T instanceof Document?T.documentElement:T}function y(T){if(T==null)return document.createElement("div");if(typeof T=="string")return y(_(T));if(b.has(T))return T;if(T instanceof Node){if(T.parentNode)return new A(T);{let c=document.createElement("div");return c.append(T),c}}else{let c=document.createElement("div");for(let d of[...T])c.append(d);return c}}class A{constructor(c){this.originalNode=c,this.realParentNode=c.parentNode,this.previousSibling=c.previousSibling,this.nextSibling=c.nextSibling}get childNodes(){let c=[],d=this.previousSibling?this.previousSibling.nextSibling:this.realParentNode.firstChild;for(;d&&d!=this.nextSibling;)c.push(d),d=d.nextSibling;return c}querySelectorAll(c){return this.childNodes.reduce((d,u)=>{if(u instanceof Element){u.matches(c)&&d.push(u);let l=u.querySelectorAll(c);for(let g=0;g<l.length;g++)d.push(l[g])}return d},[])}insertBefore(c,d){return this.realParentNode.insertBefore(c,d)}moveBefore(c,d){return this.realParentNode.moveBefore(c,d)}get __idiomorphRoot(){return this.originalNode}}function _(T){let c=new DOMParser,d=T.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(d.match(/<\/html>/)||d.match(/<\/head>/)||d.match(/<\/body>/)){let u=c.parseFromString(T,"text/html");if(d.match(/<\/html>/))return b.add(u),u;{let l=u.firstChild;return l&&b.add(l),l}}else{let l=c.parseFromString("<body><template>"+T+"</template></body>","text/html").body.querySelector("template").content;return b.add(l),l}}return{normalizeElement:E,normalizeParent:y}}();return{morph:n,defaults:e}}();var Ht={type:2,name:F.MergeFragments,onGlobalInit:async t=>{let e=document.createElement("template");K(F.MergeFragments,({fragments:n="<div></div>",selector:r="",mergeMode:i=at,useViewTransition:s=`${Ee}`})=>{let o=X(s);e.innerHTML=n.trim();let a=[...e.content.children];for(let p of a){if(!(p instanceof Element))throw W("NoFragmentsFound",t);let h=r||`#${p.getAttribute("id")}`,v=[...document.querySelectorAll(h)||[]];if(!v.length)throw W("NoTargetsFound",t,{selectorOrID:h});o&&Y?Te.startViewTransition(()=>Ot(t,i,p,v)):Ot(t,i,p,v)}})}};function Ot(t,e,n,r){for(let i of r){i.dataset.fragmentMergeTarget="true";let s=n.cloneNode(!0);switch(e){case U.Morph:{ye(s,o=>{!o.id?.length&&Object.keys(o.dataset).length&&(o.id=Re(o));let a=t.removals.get(o.id);if(a){let p=new Map;for(let[h,v]of a){let C=we(h,h);p.set(C,v),a.delete(h)}t.removals.set(o.id,p)}}),Dt.morph(i,s);break}case U.Inner:i.innerHTML=s.outerHTML;break;case U.Outer:i.replaceWith(s);break;case U.Prepend:i.prepend(s);break;case U.Append:i.append(s);break;case U.Before:i.before(s);break;case U.After:i.after(s);break;case U.UpsertAttributes:for(let o of s.getAttributeNames()){let a=s.getAttribute(o);i.setAttribute(o,a)}break;default:throw W("InvalidMergeMode",t,{mergeMode:e})}}}var Ft={type:2,name:F.MergeSignals,onGlobalInit:async t=>{K(F.MergeSignals,({signals:e="{}",onlyIfMissing:n=`${ot}`})=>{let{signals:r}=t,i=X(n);r.merge(_e(e),i)})}};var qt={type:2,name:F.RemoveFragments,onGlobalInit:async t=>{K(F.RemoveFragments,({selector:e,useViewTransition:n=`${Ee}`})=>{if(!e.length)throw W("NoSelectorProvided",t);let r=X(n),i=document.querySelectorAll(e),s=()=>{for(let o of i)o.remove()};r&&Y?Te.startViewTransition(()=>s()):s()})}};var Wt={type:2,name:F.RemoveSignals,onGlobalInit:async t=>{K(F.RemoveSignals,({paths:e=""})=>{let n=e.split(`
`).map(r=>r.trim());if(!n?.length)throw W("NoPathsProvided",t);t.signals.remove(...n)})}};var $t={type:3,name:"clipboard",fn:(t,e)=>{if(!navigator.clipboard)throw N("ClipboardNotAvailable",t);navigator.clipboard.writeText(e)}};var Gt={type:1,name:"customValidity",keyReq:2,valReq:1,onLoad:t=>{let{el:e,genRX:n,effect:r}=t;if(!(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement))throw N("CustomValidityInvalidElement",t);let i=n();return r(()=>{let s=i();if(typeof s!="string")throw N("CustomValidityInvalidExpression",t,{result:s});e.setCustomValidity(s)})}};function oe(t){if(!t||t.size<=0)return 0;for(let e of t){if(e.endsWith("ms"))return Number(e.replace("ms",""));if(e.endsWith("s"))return Number(e.replace("s",""))*1e3;try{return Number.parseFloat(e)}catch{}}return 0}function se(t,e,n=!1){return t?t.has(e.toLowerCase()):n}function Bn(t,e,n=!1,r=!0){let i=-1,s=()=>i&&clearTimeout(i);return(...o)=>{s(),n&&!i&&t(...o),i=setTimeout(()=>{r&&t(...o),s()},e)}}function jn(t,e,n=!0,r=!1){let i=!1;return(...s)=>{i||(n&&t(...s),i=!0,setTimeout(()=>{i=!1,r&&t(...s)},e))}}function ee(t,e){let n=e.get("debounce");if(n){let i=oe(n),s=se(n,"leading",!1),o=!se(n,"notrail",!1);t=Bn(t,i,s,o)}let r=e.get("throttle");if(r){let i=oe(r),s=!se(r,"noleading",!1),o=se(r,"trail",!1);t=jn(t,i,s,o)}return t}var Ut="once",Bt="half",jt="full",Kt={type:1,name:"onIntersect",keyReq:2,mods:new Set([Ut,Bt,jt]),onLoad:({el:t,rawKey:e,mods:n,genRX:r})=>{let i=ee(r(),n);i=me(i,n);let s={threshold:0};n.has(jt)?s.threshold=1:n.has(Bt)&&(s.threshold=.5);let o=new IntersectionObserver(a=>{for(let p of a)p.isIntersecting&&(i(),n.has(Ut)&&(o.disconnect(),delete t.dataset[e]))},s);return o.observe(t),()=>o.disconnect()}};var Jt={type:1,name:"onInterval",keyReq:2,valReq:1,onLoad:({mods:t,genRX:e})=>{let n=e();n=me(n,t);let r=1e3,i=t.get("duration");i&&(r=oe(i),se(i,"leading",!1)&&n());let s=setInterval(n,r);return()=>{clearInterval(s)}}};var zt={type:1,name:"onLoad",keyReq:2,valReq:1,onLoad:({mods:t,genRX:e})=>{let n=e();n=me(n,t);let r=0,i=t.get("delay");return i&&(r=oe(i)),setTimeout(n,r),()=>{}}};var Yt={type:1,name:"onRaf",keyReq:2,valReq:1,onLoad:({mods:t,genRX:e})=>{let n=ee(e(),t),r,i=()=>{n(),r=requestAnimationFrame(i)};return r=requestAnimationFrame(i),()=>{r&&cancelAnimationFrame(r)}}};var Xt={type:1,name:"onSignalChange",valReq:1,onLoad:({key:t,mods:e,signals:n,genRX:r})=>{let i=ee(r(),e);if(t===""){let a=p=>i(p);return document.addEventListener(ge,a),()=>{document.removeEventListener(ge,a)}}let s=H(t,e),o=new Map;return n.walk((a,p)=>{a.startsWith(s)&&o.set(p,p.value)}),de(()=>{for(let[a,p]of o)p!==a.value&&(i(),o.set(a,a.value))})}};var Zt="session",Qt={type:1,name:"persist",keyReq:2,mods:new Set([Zt]),onLoad:({effect:t,mods:e,signals:n,value:r})=>{let i=q,s=e.has(Zt)?sessionStorage:localStorage,o=r.split(/\s+/).filter(h=>h!=="");o=o.map(h=>Z(h));let a=()=>{let h=s.getItem(i)||"{}",v=JSON.parse(h);n.merge(v)},p=()=>{let h;o.length?h=n.subset(...o):h=n.values(),s.setItem(i,JSON.stringify(h))};return a(),t(()=>{p()})}};var en={type:1,name:"replaceUrl",keyReq:2,valReq:1,onLoad:({effect:t,genRX:e})=>{let n=e();return t(()=>{let r=n(),i=window.location.href,s=new URL(r,i).toString();window.history.replaceState({},"",s)})}};var De="smooth",Xe="instant",Ze="auto",tn="hstart",nn="hcenter",rn="hend",on="hnearest",sn="vstart",an="vcenter",ln="vend",un="vnearest",Kn="focus",Oe="center",cn="start",fn="end",dn="nearest",pn={type:1,name:"scrollIntoView",keyReq:2,valReq:2,mods:new Set([De,Xe,Ze,tn,nn,rn,on,sn,an,ln,un,Kn]),onLoad:t=>{let{el:e,mods:n,rawKey:r}=t;e.tabIndex||e.setAttribute("tabindex","0");let i={behavior:De,block:Oe,inline:Oe};if(n.has(De)&&(i.behavior=De),n.has(Xe)&&(i.behavior=Xe),n.has(Ze)&&(i.behavior=Ze),n.has(tn)&&(i.inline=cn),n.has(nn)&&(i.inline=Oe),n.has(rn)&&(i.inline=fn),n.has(on)&&(i.inline=dn),n.has(sn)&&(i.block=cn),n.has(an)&&(i.block=Oe),n.has(ln)&&(i.block=fn),n.has(un)&&(i.block=dn),!(e instanceof HTMLElement||e instanceof SVGElement))throw N("ScrollIntoViewInvalidElement",t);e.tabIndex||e.setAttribute("tabindex","0"),e.scrollIntoView(i),n.has("focus")&&e.focus(),delete e.dataset[r]}};var mn="view-transition",gn={type:1,name:"viewTransition",keyReq:2,valReq:1,onGlobalInit(){let t=!1;for(let e of document.head.childNodes)e instanceof HTMLMetaElement&&e.name===mn&&(t=!0);if(!t){let e=document.createElement("meta");e.name=mn,e.content="same-origin",document.head.appendChild(e)}},onLoad:({effect:t,el:e,genRX:n})=>{if(!Y){console.error("Browser does not support view transitions");return}let r=n();return t(()=>{let i=r();if(!i?.length)return;let s=e.style;s.viewTransitionName=i})}};var hn={type:1,name:"attr",valReq:1,onLoad:({el:t,key:e,effect:n,genRX:r})=>{let i=r();return e===""?n(async()=>{let s=i();for(let[o,a]of Object.entries(s))a===!1?t.removeAttribute(o):t.setAttribute(o,a)}):(e=z(e),n(async()=>{let s=!1;try{s=i()}catch{}let o;typeof s=="string"?o=s:o=JSON.stringify(s),!o||o==="false"||o==="null"||o==="undefined"?t.removeAttribute(e):t.setAttribute(e,o)}))}};var Jn=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,yn=["change","input","keydown"],vn={type:1,name:"bind",keyReq:3,valReq:3,onLoad:t=>{let{el:e,key:n,mods:r,signals:i,value:s,effect:o}=t,a=e,p=n?H(n,r):Z(s),h=e.tagName.toLowerCase(),v=h.includes("input"),C=h.includes("select"),b=e.getAttribute("type"),E=e.hasAttribute("value"),y="",A=v&&b==="checkbox";A&&(y=E?"":!1);let _=v&&b==="number";_&&(y=0);let T=v&&b==="radio";T&&(e.getAttribute("name")?.length||e.setAttribute("name",p));let c=v&&b==="file",{signal:d,inserted:u}=i.upsertIfMissing(p,y),l=-1;Array.isArray(d.value)&&(e.getAttribute("name")===null&&e.setAttribute("name",p),l=[...document.querySelectorAll(`[name="${p}"]`)].findIndex(M=>M===t.el));let g=l>=0,m=()=>[...i.value(p)],f=()=>{let M=i.value(p);g&&!C&&(M=M[l]||y);let V=`${M}`;if(A||T)typeof M=="boolean"?a.checked=M:a.checked=V===a.value;else if(C){let I=e;if(I.multiple){if(!g)throw N("BindSelectMultiple",t);for(let O of I.options){if(O?.disabled)return;let D=_?Number(O.value):O.value;O.selected=M.includes(D)}}else I.value=V}else c||("value"in e?e.value=V:e.setAttribute("value",V))},S=async()=>{let M=i.value(p);if(g){let D=M;for(;l>=D.length;)D.push(y);M=D[l]||y}let V=(D,$)=>{let G=$;g&&!C&&(G=m(),G[l]=$),i.setValue(D,G)};if(c){let D=[...a?.files||[]],$=[],G=[],Qe=[];await Promise.all(D.map(et=>new Promise(Nn=>{let te=new FileReader;te.onload=()=>{if(typeof te.result!="string")throw N("InvalidFileResultType",t,{resultType:typeof te.result});let He=te.result.match(Jn);if(!He?.groups)throw N("InvalidDataUri",t,{result:te.result});$.push(He.groups.contents),G.push(He.groups.mime),Qe.push(et.name)},te.onloadend=()=>Nn(void 0),te.readAsDataURL(et)}))),V(p,$),V(`${p}Mimes`,G),V(`${p}Names`,Qe);return}let I=a.value||"",O;if(A){let D=a.checked||a.getAttribute("checked")==="true";E?O=D?I:"":O=D}else if(C){let $=[...e.selectedOptions];g?O=$.filter(G=>G.selected).map(G=>G.value):O=$[0]?.value||y}else typeof M=="boolean"?O=!!I:typeof M=="number"?O=Number(I):O=I||"";V(p,O)};u&&S();for(let M of yn)e.addEventListener(M,S);let x=M=>{M.persisted&&S()};window.addEventListener("pageshow",x);let R=o(()=>f());return()=>{R();for(let M of yn)e.removeEventListener(M,S);window.removeEventListener("pageshow",x)}}};var bn={type:1,name:"class",valReq:1,onLoad:({el:t,key:e,mods:n,effect:r,genRX:i})=>{let s=t.classList,o=i();return r(()=>{if(e===""){let a=o();for(let[p,h]of Object.entries(a)){let v=p.split(/\s+/);h?s.add(...v):s.remove(...v)}}else{let a=z(e);a=H(a,n),o()?s.add(a):s.remove(a)}})}};var Sn={type:1,name:"on",keyReq:1,valReq:1,argNames:["evt"],onLoad:({el:t,key:e,mods:n,genRX:r})=>{let i=r(),s=t;n.has("window")&&(s=window);let o=v=>{v&&((n.has("prevent")||e==="submit")&&v.preventDefault(),n.has("stop")&&v.stopPropagation()),i(v)};if(o=ee(o,n),n.has("viewtransition")&&Y){let v=o;o=(...C)=>document.startViewTransition(()=>v(...C))}let a={capture:!1,passive:!1,once:!1};if(n.has("capture")&&(a.capture=!0),n.has("passive")&&(a.passive=!0),n.has("once")&&(a.once=!0),n.has("outside")){s=document;let v=o;o=b=>{let E=b?.target;t.contains(E)||v(b)}}let h=z(e);return h=H(h,n),h===ie&&(s=document),s.addEventListener(h,o,a),()=>{s.removeEventListener(h,o)}}};var Tn={type:1,name:"ref",keyReq:3,valReq:3,onLoad:({el:t,key:e,mods:n,signals:r,value:i})=>{let s=e?H(e,n):Z(i);r.setValue(s,t)}};var An="none",En="display",_n={type:1,name:"show",keyReq:2,valReq:1,onLoad:({el:{style:t},genRX:e,effect:n})=>{let r=e();return n(async()=>{r()?t.display===An&&t.removeProperty(En):t.setProperty(En,An)})}};var Rn={type:1,name:"text",keyReq:2,valReq:1,onLoad:t=>{let{el:e,effect:n,genRX:r}=t,i=r();return e instanceof HTMLElement||N("TextInvalidElement",t),n(()=>{let s=i(t);e.textContent=`${s}`})}};var{round:zn,max:Yn,min:Xn}=Math,wn={type:3,name:"fit",fn:(t,e,n,r,i,s,o=!1,a=!1)=>{let p=(e-n)/(r-n)*(s-i)+i;return a&&(p=zn(p)),o&&(p=Yn(i,Xn(s,p))),p}};var xn={type:3,name:"setAll",fn:({signals:t},e,n)=>{t.walk((r,i)=>{r.startsWith(e)&&(i.value=n)})}};var Mn={type:3,name:"toggleAll",fn:({signals:t},e)=>{t.walk((n,r)=>{n.startsWith(e)&&(r.value=!r.value)})}};ze("star");Ie(hn,vn,bn,Sn,Tn,_n,Rn,Lt,Pt,It,kt,Ct,Nt,Ht,Ft,qt,Wt,Vt,$t,Gt,Kt,Jt,zt,Yt,Xt,Qt,en,pn,gn,wn,xn,Mn);Ye();export{Ye as apply,Ie as load,ze as setAlias};
//# sourceMappingURL=datastar-aliased.js.map
